<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <!-- [META:VERSION] å•ç‚¹ç‰ˆæœ¬å·ï¼šä»¥ååªæ”¹è¿™é‡Œå³å¯ï¼ˆæ ‡é¢˜/ä¾§æ /JS ä¼šè‡ªåŠ¨åŒæ­¥ï¼‰ -->
  <!-- [APP:VERSION] -->

  <meta name="app-version" content="1.0.40" />

  <title>è¿è¥å·¥å…·ç®±</title>

  <style>/* =====================================================================================
  [UI:STYLE] v1.0.40
  è¯´æ˜ï¼šä»…æ•´ç†ä¸å¢åŠ é”šç‚¹æ³¨é‡Šï¼›ä¸æ”¹åŠŸèƒ½é€»è¾‘ã€‚
===================================================================================== */


    /*
      ============================================================
      è¿è¥å·¥å…·ç®±ï¼ˆå•æ–‡ä»¶åŸºçº¿ï¼‰
      ç‰ˆæœ¬ï¼šè§ <meta name="app-version" ...>

      ğŸ” å¿«é€Ÿå®šä½é”šç‚¹ï¼ˆCtrl+F æœç´¢ï¼‰ï¼š
      - [CSS:BASE] / [CSS:LAYOUT] / [CSS:COMPONENTS]
      - [CSS:MODULE_COUNT] / [CSS:MODULE_TRANSLATE]
      - [HTML:SIDEBAR] / [HTML:PANEL_UNIT] / [HTML:PANEL_COUNT]
      - [HTML:PANEL_TRANSLATE] / [HTML:PANEL_AMAZON]
      - [JS:CONFIG] / [JS:HELPERS] / [JS:FX] / [JS:UNIT]
      - [JS:COUNT] / [JS:TRANSLATE] / [JS:AMAZON] / [JS:APP]
      ============================================================
    */

    /* =========================
       [CSS:BASE]
    ========================= */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%;font-family:Arial,system-ui,-apple-system,Segoe UI,Roboto,"PingFang SC","Microsoft YaHei",sans-serif;background:#f3f4f6;color:#111827}

    /* =========================
       [CSS:LAYOUT]
    ========================= */
    .app{display:flex;height:100vh}
    .sidebar{width:220px;min-width:190px;max-width:240px;background:#fff;border-right:1px solid #e5e7eb;padding:14px 12px;display:flex;flex-direction:column;gap:12px}
    @media (max-width:980px){.sidebar{width:195px;min-width:175px}}
    .content{flex:1;padding:22px 24px;overflow:auto}
    @media (max-width:520px){.content{padding:16px 12px}}

    /* =========================
       [CSS:COMPONENTS]
    ========================= */
    .brand{padding:10px;border-radius:12px;border:1px solid #eef2f7;background:linear-gradient(180deg,#f8fafc,#fff)}
    .brand .t{font-weight:800;font-size:14px}
    .brand .s{margin-top:4px;color:#6b7280;font-size:12px;line-height:1.45}

    .nav{display:flex;flex-direction:column;gap:10px}
    .nav button{width:100%;text-align:left;padding:10px;border-radius:10px;border:1px solid #eef2f7;background:#fff;cursor:pointer;box-shadow:0 2px 10px rgba(0,0,0,.05);transition:.15s}
    .nav button:hover{transform:translateY(-1px);background:#f8fafc;box-shadow:0 6px 18px rgba(0,0,0,.08)}
    .nav button.active{background:#eef2ff;border-color:rgba(37,99,235,.25);box-shadow:inset 0 0 0 2px rgba(37,99,235,.16),0 6px 18px rgba(0,0,0,.08)}

    .footer{margin-top:auto;padding:10px;border-top:1px solid #eef2f7;color:#6b7280;font-size:12px;display:flex;justify-content:space-between}

    .panel{display:none;background:#fff;border-radius:12px;padding:16px 18px;box-shadow:0 8px 20px rgba(0,0,0,.08)}
    .panel.active{display:block}

    .head{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:10px}
    h2{font-size:18px}
    h3{margin:14px 0 8px;font-size:14px}

    .hint{margin-top:8px;color:#6b7280;font-size:13px;line-height:1.5}
    .muted{color:#6b7280;font-size:12px;line-height:1.5}

    .row{display:flex;flex-wrap:wrap;gap:12px;align-items:center}
    .row+.row{margin-top:10px}

    label{display:flex;flex-direction:column;gap:6px;font-size:12px;color:#374151}
    input,select,textarea{border:1px solid #d1d5db;border-radius:10px;padding:8px 10px;height:36px;font:inherit;background:#fff}
    input:focus,select:focus,textarea:focus{outline:none;border-color:rgba(37,99,235,.55);box-shadow:0 0 0 3px rgba(37,99,235,.14)}

    /* ä¸‹æ‹‰æ˜¾ç¤ºä¼˜åŒ–ï¼šé˜²æ­¢â€œå˜ç±³/è‹±å¯¸â€ç­‰è¢«æˆªæ–­ */
    select{font-size:13px;line-height:1.2;padding-right:28px;min-width:132px}
    option{font-size:13px}

    input[type="number"]{width:130px}
    .sel{min-width:160px}
    textarea{height:auto;resize:vertical}

    .btn{padding:8px 12px;border:1px solid #e5e7eb;border-radius:8px;background:#fff;cursor:pointer;font-size:13px}
    .btn:hover{background:#f9fafb}
    .primary{padding:10px 14px;border:none;border-radius:8px;background:#2563eb;color:#fff;cursor:pointer}

    .swap{cursor:pointer;font-size:18px;color:#2563eb;user-select:none}
    .result{margin-top:8px;font-weight:800}

    .cards{display:flex;flex-direction:column;gap:12px}
    .card{border:1px solid #e5e7eb;background:#fbfdff;border-radius:12px;padding:12px}
    .cardTitle{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
    .badge{font-size:12px;color:#6b7280;background:#f3f4f6;border-radius:999px;padding:4px 8px}

    .pill{display:inline-block;padding:4px 8px;border-radius:999px;background:#f3f4f6;color:#374151;font-size:12px;margin-right:8px}
    .pill.over{background:#fee2e2;color:#991b1b;font-weight:800}

    iframe{width:100%;height:420px;border:1px solid #e5e7eb;border-radius:10px}

    /* =========================
       [CSS:MODULE_COUNT]
    ========================= */
    .split{display:flex;flex-direction:column;gap:12px;margin-top:10px}
    .box{border:1px solid #e5e7eb;background:#fbfdff;border-radius:12px;padding:12px}
    .boxHead{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:8px}
    .boxHead h3{margin:0;font-size:14px}

    .stats{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px}
    .stat{border:1px solid #eef2f7;background:#fff;border-radius:10px;padding:10px 12px;min-width:150px}
    .stat .k{color:#6b7280;font-size:12px}
    .stat .v{font-weight:900;font-size:18px;margin-top:4px}

    /* =========================
       [CSS:MODULE_TRANSLATE]
    ========================= */
    .seg{display:inline-flex;border:1px solid #e5e7eb;border-radius:999px;overflow:hidden;background:#fff}
    .seg button{border:0;background:transparent;padding:8px 12px;font-size:13px;cursor:pointer;color:#374151}
    .seg button.active{background:#eef2ff;color:#1d4ed8;font-weight:800}
    .tPane{display:none;margin-top:12px}
    .tPane.active{display:block}
    .two{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media (max-width:860px){.two{grid-template-columns:1fr}}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}
  
    /* =========================
       [CSS:MOBILE] æ‰‹æœºé€‚é…ï¼ˆ<=720pxï¼‰
       - é¡¶éƒ¨æ˜¾ç¤ºå·¥å…·æ ï¼ˆèœå•/æ ‡é¢˜/ç‰ˆæœ¬ï¼‰
       - ä¾§æ å˜ä¸ºæŠ½å±‰èœå•ï¼ˆé»˜è®¤éšè—ï¼‰
       - ç‚¹å‡»é®ç½©/åˆ‡æ¢é¢æ¿è‡ªåŠ¨æ”¶èµ·
    ========================= */
    .mbar{display:none}
    .backdrop{display:none}
    .iconBtn{
      border:1px solid #e5e7eb;
      background:#fff;
      border-radius:10px;
      width:40px;height:36px;
      font-size:18px;
      cursor:pointer;
    }
    @media (max-width:720px){
      .app{flex-direction:column}
      /* é¡¶éƒ¨æ å›ºå®šåœ¨å†…å®¹åŒºé¡¶éƒ¨ */
      .mbar{
        display:flex;
        align-items:center;
        justify-content:space-between;
        gap:10px;
        position:sticky;
        top:0;
        z-index:40;
        padding:10px 10px;
        margin:-22px -24px 12px -24px; /* æŠµæ¶ˆ .content çš„ padding */
        background:rgba(243,244,246,.88);
        backdrop-filter:saturate(1.2) blur(8px);
        border-bottom:1px solid #e5e7eb;
      }
      .mtitle{font-weight:800;font-size:14px}
      .mver{font-size:12px;color:#6b7280;white-space:nowrap}

      /* æŠ½å±‰ä¾§æ  */
      .sidebar{
        position:fixed;
        left:0; top:0; bottom:0;
        width:min(78vw, 320px);
        max-width:320px;
        transform:translateX(-110%);
        transition:transform .18s ease;
        z-index:60;
        box-shadow:0 12px 40px rgba(0,0,0,.18);
      }
      .sidebar.open{transform:translateX(0)}
      .nav button{padding:12px 12px;font-size:14px}

      /* é®ç½© */
      .backdrop{
        display:block;
        position:fixed;
        inset:0;
        background:rgba(0,0,0,.28);
        z-index:55;
        opacity:0;
        pointer-events:none;
        transition:opacity .18s ease;
      }
      .backdrop.show{opacity:1;pointer-events:auto}

      /* å†…å®¹åŒº padding å˜å°ä¸€ç‚¹ */
      .content{padding:14px 12px}
      .mbar{margin:-14px -12px 12px -12px}
    }

  
    /* ===== [UI:DESKTOP_MOBILE_MODES] v1.0.40 ===== */
    @media (min-width: 981px){
      .nav button{
        font-size:16px;
        font-weight:700;
        letter-spacing:.2px;
        padding:12px 12px;
        display:flex;
        align-items:center;
        gap:10px;
      }
      .nav button .btn-ic{
        width:22px;
        flex:0 0 22px;
        display:inline-flex;
        align-items:center;
        justify-content:center;
        font-size:18px;
        line-height:1;
      }
      .brand .t{font-size:16px;font-weight:900}
    }
    @media (max-width: 980px){
      .nav button{
        display:flex;
        align-items:center;
        gap:8px;
      }
      .nav button .btn-ic{
        width:20px;
        flex:0 0 20px;
        display:inline-flex;
        align-items:center;
        justify-content:center;
        font-size:16px;
        line-height:1;
      }
    }

/* ===== [PANEL:AMZ][RATE_ROW_LAYOUT] v1.0.40 ===== */
.panel#amazon .rateRow label{
  flex-direction:row;
  align-items:center;
  gap:6px;
}
.panel#amazon .rateRow input{
  width:92px;
}
.panel#amazon .rateRow label{
  white-space:nowrap;
}

/* ===== [THEME:DARK_NEON] 1.0.35 ===== */

:root{
  --bg:#0b1220;
  --card:#101a2f;
  --text:#e5e7eb;
  --muted:#a3adc2;
  --accent:#22c55e;
  --accent2:#60a5fa;
  --accent3:#f472b6;
  --line: rgba(148,163,184,.18);
  --shadow: 0 12px 26px rgba(0,0,0,.35);
  --radius: 14px;
}
body{
  background:
    radial-gradient(900px 420px at 15% -10%, rgba(96,165,250,.18), transparent 60%),
    radial-gradient(900px 420px at 85% -10%, rgba(244,114,182,.16), transparent 60%),
    var(--bg);
  color:var(--text);
}
.sidebar{
  background: rgba(16,26,47,.86);
  border:1px solid rgba(148,163,184,.14);
  border-radius: var(--radius);
  box-shadow: var(--shadow);
}
.brand{border-bottom:1px solid rgba(148,163,184,.16);}
.nav button{color:rgba(229,231,235,.92);border-radius:12px;}
.nav button:hover{background: rgba(96,165,250,.10);}
.nav button.active{
  background: linear-gradient(90deg, rgba(96,165,250,.18), rgba(244,114,182,.16));
  border:1px solid rgba(96,165,250,.25);
}
.main{
  background: rgba(16,26,47,.86);
  backdrop-filter: blur(10px);
  border-radius: var(--radius);
  border:1px solid rgba(148,163,184,.16);
  box-shadow: var(--shadow);
}
.card{
  background: rgba(16,26,47,.72);
  border-radius: 14px;
  border:1px solid rgba(148,163,184,.16);
}
.badge{
  background: rgba(96,165,250,.14);
  border:1px solid rgba(96,165,250,.22);
  color:#cfe3ff;
}
.btn{
  border-radius: 12px;
  background: linear-gradient(90deg, rgba(34,197,94,1), rgba(96,165,250,1));
  border:none;
  color:#071016;
  font-weight:900;
}
.btn:hover{filter: brightness(1.03);}
input,textarea,select{
  background: rgba(2,6,23,.45);
  border:1px solid rgba(148,163,184,.24);
  color: var(--text);
  border-radius: 12px;
}
input::placeholder, textarea::placeholder{color: rgba(163,173,194,.75);}
.result{
  background: rgba(34,197,94,.08);
  border:1px dashed rgba(34,197,94,.30);
  border-radius: 12px;
}
.hint{color:var(--muted)}
a{color:#93c5fd}
@media (max-width:980px){
  .sidebar{border-radius:0; box-shadow:none;}
  .main{border-radius:0; box-shadow:none;}
}



/* ===== [THEME:DARK_NEON_PLUS][CONTRAST_FIX] 1.0.36 ===== */
:root{
  --bg:#0b1220;
  --panel:#0f1a30;
  --card:#101a2f;
  --text:#e5e7eb;
  --text2:#cbd5e1;
  --muted:#9aa6bd;
  --muted2:#7d8aa6;
  --accent:#22c55e;
  --accent2:#60a5fa;
  --accent3:#f472b6;
  --line: rgba(148,163,184,.18);
  --shadow: 0 12px 26px rgba(0,0,0,.35);
  --radius: 14px;
}

/* å…¨å±€å¯¹æ¯”åº¦ï¼šæ·±è‰²èƒŒæ™¯æ—¶å¼ºåˆ¶æ–‡å­—èµ°äº®è‰²å˜é‡ */
body{color:var(--text);}
h1,h2,h3,h4,h5{color:var(--text); font-weight:900;}
p,div,span{color:inherit;}
.hint{color:var(--muted) !important;}
label{color:var(--text2) !important;}
label small, .muted, .sub{color:var(--muted2) !important;}

/* ä¾§è¾¹æ æ–‡å­—ä¸æ¿€æ´»æ€æ›´æ¸…æ™° */
.sidebar{color:var(--text);}
.brand .t{color:var(--text) !important;}
.brand .s{color:rgba(203,213,225,.85) !important;}
.nav button{color:rgba(229,231,235,.92) !important;}
.nav button.active{color:var(--text) !important;}
.nav button .btn-ic{filter: saturate(1.1);}

/* ä¸»ä½“/å¡ç‰‡ï¼šç»Ÿä¸€æ·±åº•æµ…å­— */
.main{color:var(--text);}
.card, .box{color:var(--text);}
.cardTitle, .boxHead{color:var(--text);}
.cardTitle h3, .boxHead h3{color:var(--text) !important;}
.badge{color:#dbeafe !important;}

/* è¡¨å•æ§ä»¶ï¼šè¾“å…¥æ–‡å­—/å ä½ç¬¦/è¾¹æ¡†ç»Ÿä¸€å¯¹æ¯”åº¦ */
input, textarea, select{
  color: var(--text) !important;
  background: rgba(2,6,23,.55) !important;
  border:1px solid rgba(148,163,184,.28) !important;
}
input:focus, textarea:focus, select:focus{
  outline:none;
  border-color: rgba(96,165,250,.55) !important;
  box-shadow: 0 0 0 3px rgba(96,165,250,.18);
}
input::placeholder, textarea::placeholder{
  color: rgba(156,163,175,.78) !important;
}

/* ç»“æœåŒºï¼šæ›´æœ‰å±‚æ¬¡ */
.result{
  color: var(--text) !important;
  background: linear-gradient(180deg, rgba(34,197,94,.10), rgba(96,165,250,.06)) !important;
  border:1px dashed rgba(34,197,94,.34) !important;
}

/* æŒ‰é’®ï¼šä¿è¯æ–‡å­—å¯è¯» */
.btn{
  color:#061019 !important;
  font-weight:900 !important;
}
.btn.secondary{
  background: rgba(96,165,250,.18) !important;
  color: var(--text) !important;
  border:1px solid rgba(96,165,250,.35) !important;
}

/* è½»å¾®æ’ç‰ˆå¢å¼ºï¼šé—´è·æ›´èˆ’æœ */
.card{padding:14px 14px 12px;}
.head{margin-bottom:10px;}
.row{gap:12px;}



/* ===== [THEME:DARK_NEON_PLUS][SIDEBAR_REBALANCE] v1.0.40 ===== */
/* è®¾è®¡ç›®æ ‡ï¼š
   1. å·¦ä¾§æ•´ä½“æ·±è‰²åŸºè°ƒç»Ÿä¸€ï¼Œä¸å‡ºç°â€œé»‘ä¸€å—ç™½ä¸€å—â€
   2. æœªæ¿€æ´»æŒ‰é’®å¯è¯»æ€§æé«˜ï¼ˆä¸å†æµ…ç°ï¼‰
   3. æ¿€æ´»æ€=å¼ºè°ƒï¼Œè€Œä¸æ˜¯â€œåè‰²çªå…€â€
*/

/* ä¾§è¾¹æ æ•´ä½“ */
.sidebar{
  background: linear-gradient(180deg, #0f1a30, #0b1220);
}

/* å¯¼èˆªæŒ‰é’®ï¼šé»˜è®¤æ€ */
.nav button{
  background: transparent;
  color: #e5e7eb !important;   /* æäº®é»˜è®¤æ–‡å­— */
  font-weight: 600;
}

/* hoverï¼šè½»å¾®é«˜äº®ï¼Œè€Œä¸æ˜¯å˜è‰²å— */
.nav button:hover{
  background: rgba(96,165,250,.08);
}

/* æ¿€æ´»æ€ï¼šäº®åº¦ + ç»†è¾¹æ¡† + è½»æ¸å˜ */
.nav button.active{
  background: linear-gradient(
    90deg,
    rgba(96,165,250,.22),
    rgba(34,197,94,.18)
  );
  color: #ffffff !important;
  border: 1px solid rgba(96,165,250,.35);
  box-shadow: inset 0 0 0 1px rgba(255,255,255,.06);
}

/* å›¾æ ‡åŒæ­¥æäº® */
.nav button .btn-ic{
  color: #ffffff;
}

/* ç§»åŠ¨ç«¯ä¿æŒä¸€è‡´ */
@media (max-width:980px){
  .nav button{
    color:#f1f5f9 !important;
  }
}



/* ===== [THEME:DARK_NEON_PLUS][WORKSPACE_REDESIGN] v1.0.40 =====
  ç›®æ ‡ï¼šå³ä¾§â€œå·¥ä½œå°â€æ›´åƒåå°ç³»ç»Ÿï¼šç»Ÿä¸€æ·±è‰²å±‚çº§ã€æ¸…æ™°ä¿¡æ¯ç»“æ„ã€å¡ç‰‡æ›´è€çœ‹ã€‚
*/

/* å³ä¾§ä¸»ä½“å®¹å™¨ */
.main{
  background: linear-gradient(180deg, rgba(15,26,48,.92), rgba(11,18,32,.92)) !important;
  border: 1px solid rgba(148,163,184,.16) !important;
  box-shadow: 0 18px 40px rgba(0,0,0,.35) !important;
  padding: 16px !important;
}

/* é¢æ¿æ ‡é¢˜åŒº */
.head{
  padding: 10px 12px !important;
  border: 1px solid rgba(148,163,184,.14);
  border-radius: 14px;
  background: rgba(2,6,23,.28);
  margin-bottom: 14px !important;
}
.head h2{
  font-size: 20px !important;
  letter-spacing: .2px;
}
.head .btn{transform: translateY(-1px);}

/* å¡ç‰‡ï¼šç»Ÿä¸€å±‚çº§ä¸è´¨æ„Ÿ */
.card, .box{
  background: linear-gradient(180deg, rgba(16,26,47,.85), rgba(2,6,23,.35)) !important;
  border: 1px solid rgba(148,163,184,.16) !important;
  box-shadow: 0 10px 22px rgba(0,0,0,.28) !important;
  border-radius: 16px !important;
}
.card{margin-bottom: 14px !important;}
.cardTitle, .boxHead{
  border-bottom: 1px solid rgba(148,163,184,.14);
  padding-bottom: 10px;
  margin-bottom: 10px;
}
.cardTitle h3, .boxHead h3{
  font-size: 16px !important;
  font-weight: 900 !important;
}
.badge{
  border-radius: 999px !important;
  padding: 4px 10px !important;
  font-weight: 800 !important;
  background: rgba(96,165,250,.14) !important;
  border: 1px solid rgba(96,165,250,.22) !important;
  color: #e6f0ff !important;
}

/* è¡¨å•ä¸è¡Œå¸ƒå±€ï¼šæ›´åƒâ€œåå°è¡¨å•â€ */
.row{
  gap: 12px !important;
  align-items: flex-end !important;
}
label{
  font-size: 12px !important;
  color: rgba(226,232,240,.92) !important;
}
label input, label select{
  margin-top: 6px;
}

/* è¾“å…¥æ§ä»¶ï¼šæ›´æ¸…æ™°ã€æ›´ç»Ÿä¸€ */
input, textarea, select{
  border-radius: 12px !important;
  padding: 10px 12px !important;
  background: rgba(2,6,23,.52) !important;
  border: 1px solid rgba(148,163,184,.26) !important;
}
select{padding-right: 34px !important;}
textarea{min-height: 160px;}
input[type="number"]{font-variant-numeric: tabular-nums;}

/* æ¬¡çº§æ–‡å­—ä¸æç¤º */
.hint{
  background: rgba(96,165,250,.06);
  border: 1px solid rgba(96,165,250,.14);
  padding: 10px 12px;
  border-radius: 12px;
}

/* ç»“æœåŒºåŸŸï¼šæ›´åƒâ€œè¾“å‡ºå¡ç‰‡â€ */
.result{
  padding: 12px 12px !important;
  border-radius: 14px !important;
  border: 1px dashed rgba(34,197,94,.34) !important;
  background: linear-gradient(180deg, rgba(34,197,94,.10), rgba(96,165,250,.06)) !important;
}

/* æŒ‰é’®ä½“ç³»ï¼šä¸»æŒ‰é’®/æ¬¡æŒ‰é’®æ›´æ˜ç¡® */
.btn{
  border-radius: 12px !important;
  padding: 10px 12px !important;
  box-shadow: 0 10px 18px rgba(0,0,0,.25);
}
.btn:hover{filter: brightness(1.04);}
.btn:active{transform: translateY(1px);}

/* åˆ†å‰²å¸ƒå±€ï¼ˆå­—ç¬¦å¤„ç†ç­‰ï¼‰æ›´è€çœ‹ */
.split .box{
  padding: 14px !important;
}
.box textarea{
  width: 100%;
}

/* ç§»åŠ¨ç«¯ï¼šå‡å°‘é˜´å½±ï¼Œé¿å…è¿‡â€œé‡â€ */
@media (max-width:980px){
  .main{padding: 12px !important;}
  .card, .box{box-shadow: 0 8px 18px rgba(0,0,0,.22) !important;}
}


/* ===== [THEME:NOTION_DARK] ===== */

/* v1.0.40 - Notion Dark (minimal, premium, very readable) */
:root{
  --bg:#0f1115;
  --panel:#151922;
  --card:#171c26;
  --text:#f3f4f6;
  --text2:#d1d5db;
  --muted:#9ca3af;
  --line:rgba(255,255,255,.08);
  --shadow:0 14px 30px rgba(0,0,0,.40);
  --radius:14px;
  --accent:#7aa2ff;
}
html,body{background:var(--bg) !important;color:var(--text) !important;}
body{font-family: ui-sans-serif,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Helvetica,Arial;}
h1,h2,h3,h4,h5{color:var(--text) !important;}
label{color:var(--text2) !important;font-weight:650;}
.hint{color:var(--muted) !important;}
/* sidebar */
.sidebar{
  background: var(--panel) !important;
  border:1px solid var(--line) !important;
  border-radius: var(--radius) !important;
  box-shadow: var(--shadow) !important;
}
.brand{border-bottom:1px solid var(--line) !important;padding:14px !important;}
.brand .t{color:var(--text) !important;font-weight:950 !important;}
.brand .s{color:rgba(209,213,219,.80) !important;}
.nav{padding:10px !important;}
.nav button{
  color: rgba(243,244,246,.92) !important;
  background: transparent !important;
  border-radius: 12px !important;
  border:1px solid transparent;
  font-weight: 650 !important;
}
.nav button:hover{background: rgba(255,255,255,.05) !important; border-color: rgba(255,255,255,.06);}
.nav button.active{
  background: rgba(122,162,255,.14) !important;
  border-color: rgba(122,162,255,.28) !important;
  color: var(--text) !important;
}
.main{
  background: var(--panel) !important;
  border:1px solid var(--line) !important;
  border-radius: var(--radius) !important;
  box-shadow: var(--shadow) !important;
  padding: 16px !important;
}
.head{
  padding:10px 12px !important;
  border-bottom:1px solid var(--line) !important;
  margin-bottom: 14px !important;
}
.head h2{font-size:20px !important;font-weight:950 !important;}
.card,.box{
  background: var(--card) !important;
  border:1px solid var(--line) !important;
  border-radius: var(--radius) !important;
  box-shadow: 0 10px 22px rgba(0,0,0,.28) !important;
}
.cardTitle,.boxHead{border-bottom:1px solid var(--line) !important;}
.badge{
  background: rgba(255,255,255,.06) !important;
  border:1px solid rgba(255,255,255,.10) !important;
  color: rgba(243,244,246,.92) !important;
  border-radius: 999px !important;
  font-weight: 800 !important;
}
input,textarea,select{
  background: rgba(0,0,0,.18) !important;
  border:1px solid rgba(255,255,255,.10) !important;
  color: var(--text) !important;
  border-radius: 12px !important;
  padding: 10px 12px !important;
}
input::placeholder,textarea::placeholder{color: rgba(156,163,175,.70) !important;}
input:focus,textarea:focus,select:focus{
  outline:none;
  border-color: rgba(122,162,255,.55) !important;
  box-shadow: 0 0 0 3px rgba(122,162,255,.16);
}
.btn{
  background: rgba(122,162,255,.92) !important;
  color:#0b1020 !important;
  font-weight: 900 !important;
  border:none !important;
  border-radius: 12px !important;
}
.btn:hover{filter: brightness(1.03);}
.result{
  background: rgba(122,162,255,.08) !important;
  border:1px dashed rgba(122,162,255,.30) !important;
  border-radius: 14px !important;
  color: var(--text) !important;
}
@media (max-width:980px){
  .sidebar,.main{border-radius:0 !important; box-shadow:none !important;}
}

</style>
</head>

<body>
<!-- =====================================================================================
  Amazon è¿è¥å·¥å…·ç®±ï¼ˆå•æ–‡ä»¶ï¼‰
  ç‰ˆæœ¬ï¼šv1.0.40
  ç»“æ„é”šç‚¹ï¼š
    [APP:VERSION] ç‰ˆæœ¬ä¿¡æ¯
    [UI:LAYOUT]   é¡µé¢ç»“æ„
    [UI:STYLE]    CSS æ ·å¼
    [NAV]         å·¦ä¾§å¯¼èˆª
    [PANEL:UNIT]  å•ä½æ¢ç®—
    [PANEL:COUNT] å­—ç¬¦å¤„ç†
    [PANEL:TRAN]  ç¿»è¯‘
    [PANEL:AMZ]   äºšé©¬é€Šæ ¸ç®—
    [UTIL]        é€šç”¨å‡½æ•°
    [BOOT]        åˆå§‹åŒ–å…¥å£
===================================================================================== -->
<div class="app">

  <!-- [HTML:BACKDROP] Mobile sidebar backdrop -->
  <div class="backdrop" id="backdrop"></div>

  <!-- =========================
       [HTML:SIDEBAR]
  ========================= -->
  <aside class="sidebar">
    <div class="brand">
      <div class="t">è¿è¥å·¥å…·ç®±</div>
      <div class="s">å•ä½æ¢ç®— Â· å­—ç¬¦å¤„ç† Â· Listing ç¿»è¯‘ Â· äºšé©¬é€Šæ ¸ç®—</div>
    </div>

    <div class="nav">
      <!-- [PANEL:UNIT] -->
<button data-panel="unit" class="active">å•ä½æ¢ç®—</button>
      <!-- [PANEL:COUNT] -->
<button data-panel="count">å­—ç¬¦å¤„ç†</button>
      <!-- [PANEL:TRAN] -->
<button data-panel="translate">ç¿»è¯‘</button>
      <!-- [PANEL:AMZ] -->
<button data-panel="amazon">äºšé©¬é€Šæ ¸ç®—</button>
    </div>

    <div class="footer"><span>ç‰ˆæœ¬</span><b id="verText">1.0.40</b></div>
  </aside>

  <main class="content">

    <!-- =========================
         [HTML:MOBILE_BAR]ï¼ˆ<=720px æ˜¾ç¤ºï¼‰
    ========================= -->
    <div class="mbar">
      <button class="iconBtn" id="btnMenu" aria-label="æ‰“å¼€èœå•">â˜°</button>
      <div class="mtitle">è¿è¥å·¥å…·ç®±</div>
      <div class="mver">v<span id="verTextM">1.0.40</span></div>
    </div>

    <!-- =========================
         [HTML:PANEL_UNIT]
    ========================= -->
    <section id="unit" class="panel active">
      <div class="head"><h2>å•ä½æ¢ç®—</h2><button class="btn" id="clearUnit">æ¸…ç©º</button></div>
      <div class="cards">
        <div class="card">
          <div class="cardTitle"><h3 style="margin:0">é•¿åº¦æ¢ç®—</h3><span class="badge">é»˜è®¤ï¼šcm â†’ inch</span></div>
          <div class="row">
            <input id="lenVal" type="number" placeholder="è¾“å…¥æ•°å€¼" />
            <select id="lenFrom" class="sel">
              <option value="cm" selected>å˜ç±³ (cm)</option><option value="m">ç±³ (m)</option><option value="mm">æ¯«ç±³ (mm)</option><option value="inch">è‹±å¯¸ (inch)</option><option value="ft">è‹±å°º (ft)</option>
            </select>
            <span class="swap" id="swapLen">â‡„</span>
            <select id="lenTo" class="sel">
              <option value="inch" selected>è‹±å¯¸ (inch)</option><option value="cm">å˜ç±³ (cm)</option><option value="m">ç±³ (m)</option><option value="mm">æ¯«ç±³ (mm)</option><option value="ft">è‹±å°º (ft)</option>
            </select>
          </div>
          <div id="lenOut" class="result">ç»“æœï¼š</div>
        </div>

        <div class="card">
          <div class="cardTitle"><h3 style="margin:0">é‡é‡æ¢ç®—</h3><span class="badge">é»˜è®¤ï¼šg â†’ oz</span></div>
          <div class="row">
            <input id="wtVal" type="number" placeholder="è¾“å…¥æ•°å€¼" />
            <select id="wtFrom" class="sel">
              <option value="g" selected>å…‹ (g)</option><option value="kg">åƒå…‹ (kg)</option><option value="lb">ç£… (lb)</option><option value="oz">ç›å¸ (oz)</option>
            </select>
            <span class="swap" id="swapWt">â‡„</span>
            <select id="wtTo" class="sel">
              <option value="oz" selected>ç›å¸ (oz)</option><option value="g">å…‹ (g)</option><option value="kg">åƒå…‹ (kg)</option><option value="lb">ç£… (lb)</option>
            </select>
          </div>
          <div id="wtOut" class="result">ç»“æœï¼š</div>
        </div>

        <div class="card">
          <div class="cardTitle"><h3 style="margin:0">å¸ç§æ¢ç®—</h3><span class="badge">é»˜è®¤ï¼šUSD â†’ CNY</span></div>
          <div class="row">
            <input id="fxVal" type="number" placeholder="è¾“å…¥é‡‘é¢" />
            <select id="fxFrom" class="sel"><option value="$" selected>$ USD</option><option value="Â¥">Â¥ CNY</option><option value="â‚¬">â‚¬ EUR</option><option value="Â£">Â£ GBP</option></select>
            <span class="swap" id="swapFx">â‡„</span>
            <select id="fxTo" class="sel"><option value="Â¥" selected>Â¥ CNY</option><option value="$">$ USD</option><option value="â‚¬">â‚¬ EUR</option><option value="Â£">Â£ GBP</option></select>
            <button class="btn" id="btnFx">è·å–æœ€æ–°æ±‡ç‡</button>
          </div>
          <div id="fxOut" class="result">ç»“æœï¼š</div>
          <div class="hint">å½“å‰æ±‡ç‡ï¼š1 USD=<span id="rUsd">7.2000</span> CNYï¼›1 EUR=<span id="rEur">7.9000</span> CNYï¼›1 GBP=<span id="rGbp">9.1000</span> CNYï¼ˆä¸æ ¸ç®—å…±äº«ï¼‰</div>
          <div class="hint" id="fxStatus"></div>
        </div>
      </div>
    </section>

    <!-- =========================
         [HTML:PANEL_COUNT]
    ========================= -->
    <section id="count" class="panel">
      <div class="head"><h2>å­—ç¬¦å¤„ç†</h2><button class="btn" id="clearCount">æ¸…ç©º</button></div>

      <div class="split">
        <div class="box">
          <div class="boxHead">
            <h3>å­—ç¬¦æ•°é‡ç»Ÿè®¡</h3>
            <span class="badge">çº¢çº¿ï¼š200 / 250 / 1000</span>
          </div>
          <textarea id="textInput" placeholder="ç²˜è´´/è¾“å…¥æ ‡é¢˜ã€äº”ç‚¹ã€æè¿°ç­‰" style="width:100%;height:170px"></textarea>

          <div class="row" style="margin-top:10px">
            <span class="pill" id="p200">Title 200</span>
            <span class="pill" id="p250">Bullet 250</span>
            <span class="pill" id="p1000">Description 1000</span>
          </div>

          <div class="stats">
            <div class="stat"><div class="k">æ€»å­—ç¬¦æ•°</div><div class="v" id="cTotal">0</div></div>
            <div class="stat"><div class="k">ä¸å«ç©ºæ ¼</div><div class="v" id="cNoSp">0</div></div>
            <div class="stat"><div class="k">è‹±æ–‡å­—ç¬¦</div><div class="v" id="cEn">0</div></div>
            <div class="stat"><div class="k">ä¸­æ–‡å­—ç¬¦</div><div class="v" id="cZh">0</div></div>
            <div class="stat"><div class="k">æ•°å­—</div><div class="v" id="cNum">0</div></div>
          </div>
          <div class="muted" style="margin-top:8px">è¯´æ˜ï¼šçº¢çº¿æŒ‰â€œæ€»å­—ç¬¦æ•°â€åˆ¤æ–­ã€‚</div>
        </div>

        <div class="box">
          <div class="boxHead">
            <h3>äºšé©¬é€Šæ ‡é¢˜ï¼šTitle Caseï¼ˆB è§„åˆ™ï¼‰</h3>
            <span class="badge">ä¸€é”®è§„èŒƒæ ‡é¢˜</span>
          </div>
          <div class="row" style="align-items:flex-start">
            <textarea id="titleIn" placeholder="ç²˜è´´ä½ çš„è‹±æ–‡æ ‡é¢˜" style="flex:1;min-width:260px;height:110px"></textarea>
            <div style="display:flex;flex-direction:column;gap:8px">
              <button class="btn" id="btnTitle">ä¸€é”®å¤„ç†</button>
              <button class="btn" id="btnCopyTitle">å¤åˆ¶ç»“æœ</button>
            </div>
          </div>
          <textarea id="titleOut" placeholder="å¤„ç†åçš„æ ‡é¢˜" style="width:100%;height:90px;margin-top:10px" readonly></textarea>
          <div class="muted" style="margin-top:8px">å°è¯ï¼ˆa/an/the/and/or/of/to/in/forâ€¦ï¼‰é»˜è®¤ä¸å¤§å†™ï¼Œé™¤éåœ¨æ ‡é¢˜å¼€å¤´/ç»“å°¾ï¼›USB/LED/FBA ç­‰çŸ­ç¼©å†™ä¿æŒå…¨å¤§å†™ï¼›è¿å­—ç¬¦ - åˆ†æ®µå¤„ç†ã€‚</div>
        </div>
      </div>
    </section>

    <!-- =========================
         [HTML:PANEL_TRANSLATE]
    ========================= -->
    <section id="translate" class="panel">
      <div class="head"><h2>ç¿»è¯‘ï¼ˆä¸“ä¸º Listingï¼‰</h2></div>
      <div class="hint" style="margin-top:0">å¯é€‰ï¼šGoogle / ç™¾åº¦ / Chat ç¿»è¯‘ï¼ˆæ—  APIï¼Œé‡‡ç”¨ç½‘é¡µ/æç¤ºè¯æ–¹å¼ï¼‰ã€‚</div>

      <div class="row" style="margin-top:12px;justify-content:space-between">
        <div class="seg" id="tSeg">
          <button data-t="google" class="active">è°·æ­Œç¿»è¯‘</button>
          <button data-t="baidu">ç™¾åº¦ç¿»è¯‘</button>
          <button data-t="chat">Chat ç¿»è¯‘</button>
        </div>
        <div class="row">
          <span class="badge">é»˜è®¤ï¼šä¸­ â†’ è‹±</span>
          <select id="tDir" style="height:34px">
            <option value="zh-en" selected>ä¸­æ–‡ â†’ English</option>
            <option value="en-zh">English â†’ ä¸­æ–‡</option>
          </select>
        </div>
      </div>

      <div id="tp_google" class="tPane active">
        <div class="hint" style="margin:0 0 10px 0">å†…åµŒ Google ç¿»è¯‘ï¼ˆéƒ¨åˆ†ç½‘ç»œç¯å¢ƒå¯èƒ½åŠ è½½æ…¢ï¼‰ã€‚</div>
        <iframe id="gFrame" src="https://translate.google.com/?sl=zh-CN&tl=en&op=translate" loading="lazy"></iframe>
        <div style="margin-top:14px" class="row">
          <button class="primary" id="btnOpenG">æ–°çª—å£æ‰“å¼€ Google ç¿»è¯‘</button>
        </div>
      </div>

      <div id="tp_baidu" class="tPane">
        <div class="box" style="margin-top:0">
          <div class="boxHead"><h3>ç™¾åº¦ç¿»è¯‘ï¼ˆè·³è½¬ä½¿ç”¨ï¼‰</h3><span class="badge">å›½å†…æ›´ç¨³å®š</span></div>
          <div class="muted">è¯´æ˜ï¼šç™¾åº¦ç¿»è¯‘é¡µé¢é€šå¸¸ä¸å…è®¸è¢« iframe å†…åµŒï¼ˆä¼šè¢«æµè§ˆå™¨æ‹¦æˆªï¼‰ã€‚è¿™é‡Œæä¾›å¿«æ·è·³è½¬ã€‚</div>
          <div class="row" style="margin-top:10px">
            <button class="primary" id="btnOpenB">æ‰“å¼€ç™¾åº¦ç¿»è¯‘</button>
            <span class="muted">ï¼ˆä¼šåœ¨æ–°çª—å£æ‰“å¼€ï¼‰</span>
          </div>
        </div>
      </div>

      <div id="tp_chat" class="tPane">
        <div class="box" style="margin-top:0">
          <div class="boxHead"><h3>Chat ç¿»è¯‘ï¼ˆæç¤ºè¯ï¼‰</h3><span class="badge">æ›´è´´è¿‘ Listing è¯­æ°”</span></div>
          <div class="two">
            <div>
              <div class="muted" style="margin-bottom:6px">åŸæ–‡</div>
              <textarea id="chatSrc" placeholder="ç²˜è´´ä¸­æ–‡/è‹±æ–‡æ–‡æ¡ˆï¼ˆæ ‡é¢˜ã€äº”ç‚¹ã€æè¿°ç­‰ï¼‰" style="width:100%;height:170px"></textarea>
            </div>
            <div>
              <div class="muted" style="margin-bottom:6px">ç”Ÿæˆçš„ç¿»è¯‘æç¤ºè¯ï¼ˆå¯ç›´æ¥å¤åˆ¶åˆ° ChatGPTï¼‰</div>
              <textarea id="chatPrompt" class="mono" readonly style="width:100%;height:170px"></textarea>
            </div>
          </div>
          <div class="row" style="margin-top:10px">
            <button class="btn" id="btnGenPrompt">ç”Ÿæˆæç¤ºè¯</button>
            <button class="btn" id="btnCopyPrompt">å¤åˆ¶æç¤ºè¯</button>
            <button class="primary" id="btnOpenChat">æ‰“å¼€ ChatGPT</button>
          </div>
          <div class="muted" style="margin-top:8px">æç¤ºï¼šå¦‚æœä½ å¸Œæœ›æ›´â€œæœ¬åœ°åŒ–/æ›´å¼ºè½¬åŒ–â€ï¼Œæˆ‘ä¹Ÿå¯ä»¥å¸®ä½ æŠŠæç¤ºè¯åšæˆå¯é…ç½®æ¨¡æ¿ï¼ˆæ¯”å¦‚ï¼šç±»ç›®ã€å—ä¼—ã€ç¦è¯ã€é£æ ¼ï¼‰ã€‚</div>
        </div>
      </div>
    </section>

    <!-- =========================
         [HTML:PANEL_AMAZON]
    ========================= -->
    <section id="amazon" class="panel">
      <div class="head"><h2>äºšé©¬é€Šæ ¸ç®—</h2><button class="btn" id="clearAmazon">æ¸…ç©º</button></div>
      <div class="hint" style="margin-top:0">æŒ‰å•ä¸ªè®¢å•ä¼°ç®—ï¼šå”®ä»·ã€é‡‡è´­ä»·ã€å¤´ç¨‹ï¼ˆè®¡è´¹é‡ï¼‰ã€ä½£é‡‘ã€VATã€é€€è´§ã€å¹¿å‘Šã€FBAï¼ˆç®€åŒ–ï¼‰ã€‚</div>

      <h3>åŸºç¡€è¾“å…¥</h3>
      <div class="row">
        <label>å”®ä»·å¸ç§<select id="sellCur"><option value="$" selected>$ USD</option><option value="â‚¬">â‚¬ EUR</option><option value="Â£">Â£ GBP</option><option value="Â¥">Â¥ CNY</option></select></label>
        <label>ç«å“å”®ä»·<input id="sellPrice" type="number" step="0.01" placeholder="29.99" /></label>
        <label>é‡‡è´­å¸ç§<select id="buyCur"><option value="Â¥" selected>Â¥ CNY</option><option value="$">$ USD</option><option value="â‚¬">â‚¬ EUR</option><option value="Â£">Â£ GBP</option></select></label>
        <label>é‡‡è´­ä»·<input id="buyCost" type="number" step="0.01" placeholder="8.50" /></label>
      </div>

      <div class="row rateRow">
        <label>1 USD=<input id="usdToCny" type="number" step="0.0001" value="7.2000" />CNY</label>
        <label>1 EUR=<input id="eurToCny" type="number" step="0.0001" value="7.9000" />CNY</label>
        <label>1 GBP=<input id="gbpToCny" type="number" step="0.0001" value="9.1000" />CNY</label>
      </div>
      <div class="hint">æ ¸ç®—å†…éƒ¨ç»Ÿä¸€æ¢ç®—åˆ° CNY è®¡ç®—ï¼›ä¸Šé¢æ±‡ç‡ä¸â€œå¸ç§æ¢ç®—â€å…±äº«ï¼Œä¼šè‡ªåŠ¨åŒæ­¥ã€‚</div>

      <h3>é‡é‡ä¸å°ºå¯¸</h3>
      <div class="row">
        <label>å®é‡(kg)<input id="wtKg" type="number" step="0.001" placeholder="0.45" /></label>
        <label>é•¿(cm)<input id="lenCm" type="number" step="0.1" placeholder="25" /></label>
        <label>å®½(cm)<input id="widCm" type="number" step="0.1" placeholder="18" /></label>
        <label>é«˜(cm)<input id="heiCm" type="number" step="0.1" placeholder="6" /></label>
      </div>

      <h3>å¤´ç¨‹ï¼ˆæŒ‰è®¡è´¹é‡ï¼Œäººæ°‘å¸ï¼‰</h3>
      <div class="row">
        <label>ä½“ç§¯é‡ç³»æ•°<input id="volDiv" type="number" step="1" value="6000" /></label>
        <label>å•ä»·(æ¯kg,CNY)<input id="shipPerKg" type="number" step="0.01" value="10" /></label>
        <label>å›ºå®šå¤´ç¨‹(æ¯å•,CNY)<input id="shipFixed" type="number" step="0.01" value="0" /></label>
      </div>
      <div class="hint">ä½“ç§¯é‡(kg)=é•¿Ã—å®½Ã—é«˜Ã·ç³»æ•°ï¼›è®¡è´¹é‡=max(å®é‡,ä½“ç§¯é‡)ã€‚</div>

      <h3>å¹³å°ä¸é£é™©</h3>
      <div class="row">
        <label>ç±»ç›®ä½£é‡‘(%)<input id="refPct" type="number" step="0.01" value="15" /></label>
        <label>VAT(%)<input id="vatPct" type="number" step="0.01" value="19" /></label>
        <label>é€€è´§ç‡(%)<input id="retRate" type="number" step="0.01" value="5" /></label>
        <label>å¹¿å‘Šå æ¯”(%)<input id="adPct" type="number" step="0.01" value="15" /></label>
      </div>

      <h3>FBAï¼ˆç®€åŒ–ï¼‰</h3>
      <div class="row">
        <label>æ–¹å¼<select id="fbaMode"><option value="amount" selected>å›ºå®šé‡‘é¢</option><option value="percent">æŒ‰å”®ä»·%</option><option value="auto">æŒ‰è®¡è´¹é‡</option></select></label>
        <label>å›ºå®šé‡‘é¢(æŒ‰å”®ä»·å¸ç§)<input id="fbaAmount" type="number" step="0.01" value="0" /></label>
        <label>ç™¾åˆ†æ¯”(%)<input id="fbaPct" type="number" step="0.01" value="0" /></label>
        <label>æ¯kgè´¹ç”¨(æŒ‰å”®ä»·å¸ç§)<input id="fbaPerKg" type="number" step="0.01" value="0" /></label>
        <label>å›ºå®šFBA(æŒ‰å”®ä»·å¸ç§)<input id="fbaFixed" type="number" step="0.01" value="0" /></label>
      </div>

      <h3>ç»“æœï¼ˆå®æ—¶ï¼‰</h3>
      <div style="margin-top:10px;display:flex;flex-wrap:wrap;gap:14px">
        <div class="result">è®¡è´¹é‡ï¼š<span id="oChargeW">0</span> kg</div>
        <div class="result">å¤´ç¨‹ï¼š<span id="oShip">0</span></div>
        <div class="result">ä½£é‡‘ï¼š<span id="oRef">0</span></div>
        <div class="result">VATï¼š<span id="oVat">0</span></div>
        <div class="result">å¹¿å‘Šï¼š<span id="oAd">0</span></div>
        <div class="result">FBAï¼š<span id="oFba">0</span></div>
      </div>
      <div style="margin-top:10px;display:flex;flex-wrap:wrap;gap:14px">
        <div class="result">åˆ©æ¶¦ï¼š<span id="oProfit">0</span></div>
        <div class="result">åˆ©æ¶¦ç‡ï¼š<span id="oMargin">0%</span></div>
      </div>
      <div class="hint" id="amazonNote"></div>
    </section>

  </main>
</div>

<script>/* [APP:CORE] v1.0.40 - é”šç‚¹æ•´ç†ï¼Œä¸æ”¹åŠŸèƒ½ */

(() => {
  'use strict';

  /* =========================
     [JS:CONFIG] ç‰ˆæœ¬ä¸å¸¸é‡
  ========================= */
  const metaVer = document.querySelector('meta[name="app-version"]');
  const APP_VERSION = metaVer?.content || 'dev';

  const Config = {
    version: APP_VERSION,
    fxStorageKey: 'toolbox_fx_rates_v2',
    lenRate: { m: 1, cm: 0.01, mm: 0.001, inch: 0.0254, ft: 0.3048 },
    wtRate: { kg: 1, g: 0.001, lb: 0.45359237, oz: 0.0283495 },
    smallWords: new Set(['a','an','the','and','or','but','nor','for','so','yet','as','at','by','in','of','on','to','up','via','per','from','into','over','with','without','vs','vs.']),
    limits: { title: 200, bullet: 250, desc: 1000 },
  };

  /* =========================
     [JS:HELPERS] å·¥å…·å‡½æ•°
  ========================= */
  const $ = (id) => document.getElementById(id);
  const num = (v) => {
    const x = parseFloat(v);
    return Number.isFinite(x) ? x : 0;
  };
  const fmt = (sym, v) => `${sym}${(Number.isFinite(v) ? v : 0).toFixed(2)}`;

  const isWhitespaceCode = (code) =>
    code === 9 || code === 10 || code === 11 || code === 12 || code === 13 || code === 32;

  const splitByWhitespace = (s) => {
    const out = [];
    let cur = '';
    for (let i = 0; i < s.length; i++) {
      const code = s.charCodeAt(i);
      if (isWhitespaceCode(code)) {
        if (cur) { out.push(cur); cur = ''; }
      } else {
        cur += s[i];
      }
    }
    if (cur) out.push(cur);
    return out;
  };

  /* =========================
     [JS:FX] æ±‡ç‡æ¨¡å—ï¼ˆä¸æ ¸ç®—å…±äº«ï¼‰
  ========================= */
  const FX = {
    load() {
      try {
        const raw = localStorage.getItem(Config.fxStorageKey);
        if (!raw) return null;
        const o = JSON.parse(raw);
        const usd = Number(o.usd), eur = Number(o.eur), gbp = Number(o.gbp);
        if (!Number.isFinite(usd) || !Number.isFinite(eur) || !Number.isFinite(gbp)) return null;
        return { usd, eur, gbp, date: o.date || '' };
      } catch { return null; }
    },
    save(usd, eur, gbp, date) {
      try {
        localStorage.setItem(Config.fxStorageKey, JSON.stringify({ usd, eur, gbp, date, at: new Date().toISOString() }));
      } catch {}
    },
    rateToCny(sym) {
      if (sym === 'Â¥') return 1;
      if (sym === '$') return Math.max(0, num($('usdToCny')?.value));
      if (sym === 'â‚¬') return Math.max(0, num($('eurToCny')?.value));
      if (sym === 'Â£') return Math.max(0, num($('gbpToCny')?.value));
      return 0;
    },
    convert(amount, from, to) {
      const fr = FX.rateToCny(from);
      const tr = FX.rateToCny(to);
      if (fr <= 0 || tr <= 0) return 0;
      return (amount * fr) / tr;
    },
    syncHint() {
      $('rUsd').textContent = ($('usdToCny')?.value || '7.2000');
      $('rEur').textContent = ($('eurToCny')?.value || '7.9000');
      $('rGbp').textContent = ($('gbpToCny')?.value || '9.1000');
    },
    setStatus(msg, isErr) {
      $('fxStatus').textContent = msg || '';
      $('fxStatus').style.color = isErr ? '#b91c1c' : '#6b7280';
    },
    apply(usd, eur, gbp) {
      if ($('usdToCny')) $('usdToCny').value = Number(usd).toFixed(4);
      if ($('eurToCny')) $('eurToCny').value = Number(eur).toFixed(4);
      if ($('gbpToCny')) $('gbpToCny').value = Number(gbp).toFixed(4);
      FX.syncHint();
      Unit.updateFx();
      Amazon.update();
    },
    async fetchLatest(auto) {
      const last = FX.load();
      try {
        FX.setStatus(auto ? 'æ‰“å¼€é¡µé¢è‡ªåŠ¨è·å–æœ€æ–°æ±‡ç‡ä¸­â€¦' : 'æ­£åœ¨è·å–æœ€æ–°æ±‡ç‡â€¦', false);
        const [u, e, g] = await Promise.all([
          fetch('https://api.frankfurter.dev/v1/latest?base=USD&symbols=CNY').then(r => r.json()),
          fetch('https://api.frankfurter.dev/v1/latest?base=EUR&symbols=CNY').then(r => r.json()),
          fetch('https://api.frankfurter.dev/v1/latest?base=GBP&symbols=CNY').then(r => r.json()),
        ]);
        const usd = u && u.rates ? u.rates.CNY : undefined;
        const eur = e && e.rates ? e.rates.CNY : undefined;
        const gbp = g && g.rates ? g.rates.CNY : undefined;
        if (!Number.isFinite(usd) || !Number.isFinite(eur) || !Number.isFinite(gbp)) throw new Error('bad payload');
        FX.apply(usd, eur, gbp);
        FX.save(Number(usd), Number(eur), Number(gbp), u && u.date ? u.date : '');
        FX.setStatus(`âœ… å·²æ›´æ–°æœ€æ–°æ±‡ç‡ï¼ˆ${u && u.date ? u.date : 'æœªçŸ¥æ—¥æœŸ'}ï¼‰`, false);
      } catch {
        if (last) {
          FX.apply(last.usd, last.eur, last.gbp);
          FX.setStatus(`âš ï¸ è·å–å¤±è´¥ï¼Œå·²ä½¿ç”¨ä¸Šæ¬¡æ±‡ç‡${last.date ? `ï¼ˆ${last.date}ï¼‰` : ''}ã€‚`, true);
        } else {
          FX.setStatus('âš ï¸ è·å–å¤±è´¥ï¼Œå½“å‰ä½¿ç”¨é¡µé¢é»˜è®¤æ±‡ç‡ã€‚', true);
        }
      }
    },
  };

  /* =========================
     [JS:UNIT] å•ä½æ¢ç®—æ¨¡å—
  ========================= */
  const Unit = {
    swap(a, b, after) {
      const A = $(a), B = $(b);
      const tmp = A.value;
      A.value = B.value;
      B.value = tmp;
      after();
    },
    updateLen() {
      const v = parseFloat($('lenVal').value);
      if (!Number.isFinite(v)) { $('lenOut').textContent = 'ç»“æœï¼š'; return; }
      const a = $('lenFrom').value;
      const b = $('lenTo').value;
      $('lenOut').textContent = `ç»“æœï¼š${(v * Config.lenRate[a] / Config.lenRate[b]).toFixed(4)} ${b}`;
    },
    updateWt() {
      const v = parseFloat($('wtVal').value);
      if (!Number.isFinite(v)) { $('wtOut').textContent = 'ç»“æœï¼š'; return; }
      const a = $('wtFrom').value;
      const b = $('wtTo').value;
      $('wtOut').textContent = `ç»“æœï¼š${(v * Config.wtRate[a] / Config.wtRate[b]).toFixed(4)} ${b}`;
    },
    updateFx() {
      FX.syncHint();
      const v = parseFloat($('fxVal').value);
      if (!Number.isFinite(v)) { $('fxOut').textContent = 'ç»“æœï¼š'; return; }
      const from = $('fxFrom').value;
      const to = $('fxTo').value;
      $('fxOut').textContent = `ç»“æœï¼š${to}${FX.convert(v, from, to).toFixed(4)}`;
    },
    clear() {
      $('lenVal').value = '';
      $('wtVal').value = '';
      $('fxVal').value = '';
      $('lenFrom').value = 'cm';
      $('lenTo').value = 'inch';
      $('wtFrom').value = 'g';
      $('wtTo').value = 'oz';
      $('fxFrom').value = '$';
      $('fxTo').value = 'Â¥';
      Unit.updateLen();
      Unit.updateWt();
      Unit.updateFx();
    },
    init() {
      ['lenVal','lenFrom','lenTo'].forEach(id => $(id).addEventListener('input', Unit.updateLen));
      ['lenFrom','lenTo'].forEach(id => $(id).addEventListener('change', Unit.updateLen));
      $('swapLen').addEventListener('click', () => Unit.swap('lenFrom','lenTo', Unit.updateLen));

      ['wtVal','wtFrom','wtTo'].forEach(id => $(id).addEventListener('input', Unit.updateWt));
      ['wtFrom','wtTo'].forEach(id => $(id).addEventListener('change', Unit.updateWt));
      $('swapWt').addEventListener('click', () => Unit.swap('wtFrom','wtTo', Unit.updateWt));

      ['fxVal','fxFrom','fxTo','usdToCny','eurToCny','gbpToCny'].forEach(id =>
        $(id).addEventListener('input', () => { Unit.updateFx(); Amazon.update(); })
      );
      ['fxFrom','fxTo'].forEach(id => $(id).addEventListener('change', Unit.updateFx));
      $('swapFx').addEventListener('click', () => Unit.swap('fxFrom','fxTo', Unit.updateFx));
      $('btnFx').addEventListener('click', () => FX.fetchLatest(false));

      $('clearUnit').addEventListener('click', Unit.clear);

      Unit.updateLen();
      Unit.updateWt();
      Unit.updateFx();
    },
  };

  /* =========================
     [JS:COUNT] å­—ç¬¦å¤„ç†æ¨¡å—
  ========================= */
  const Count = {
    setPills(total) {
      $('p200').classList.toggle('over', total > Config.limits.title);
      $('p250').classList.toggle('over', total > Config.limits.bullet);
      $('p1000').classList.toggle('over', total > Config.limits.desc);
    },
    update() {
      const t = $('textInput').value || '';
      const total = t.length;

      let noWs = 0;
      let en = 0;
      let zh = 0;
      let numCount = 0;

      for (let i = 0; i < t.length; i++) {
        const code = t.charCodeAt(i);
        if (!isWhitespaceCode(code)) noWs += 1;
        if ((code >= 65 && code <= 90) || (code >= 97 && code <= 122)) en += 1;
        if (code >= 48 && code <= 57) numCount += 1;
        const ch = t[i];
        if (ch >= 'ä¸€' && ch <= 'é¾¥') zh += 1;
      }

      $('cTotal').textContent = String(total);
      $('cNoSp').textContent = String(noWs);
      $('cEn').textContent = String(en);
      $('cZh').textContent = String(zh);
      $('cNum').textContent = String(numCount);

      Count.setPills(total);
    },

    /* ---- Title Caseï¼šB è§„åˆ™ï¼ˆç®€åŒ–ç‰ˆï¼‰ ---- */
    isAllCapsShort(token) {
      let letters = '';
      for (let i = 0; i < token.length; i++) {
        const c = token.charCodeAt(i);
        if ((c >= 65 && c <= 90) || (c >= 97 && c <= 122)) letters += token[i];
      }
      if (!letters || letters.length > 5) return false;
      return letters === letters.toUpperCase();
    },
    capFirstLowerRest(token) {
      const lower = token.toLowerCase();
      for (let i = 0; i < lower.length; i++) {
        const c = lower.charCodeAt(i);
        if (c >= 97 && c <= 122) {
          return lower.slice(0, i) + lower[i].toUpperCase() + lower.slice(i + 1);
        }
      }
      return lower;
    },
    titleSeg(seg, isFirst, isLast) {
      if (!seg) return seg;
      let hasLetter = false;
      for (let i = 0; i < seg.length; i++) {
        const c = seg.charCodeAt(i);
        if ((c >= 65 && c <= 90) || (c >= 97 && c <= 122)) { hasLetter = true; break; }
      }
      if (!hasLetter) return seg;
      if (Count.isAllCapsShort(seg)) return seg;

      const lower = seg.toLowerCase();
      let letters = '';
      for (let i = 0; i < lower.length; i++) {
        const c = lower.charCodeAt(i);
        if (c >= 97 && c <= 122) letters += lower[i];
      }

      if (!isFirst && !isLast && letters && Config.smallWords.has(letters)) return lower;
      return Count.capFirstLowerRest(seg);
    },
    toTitleCase(text) {
      const s = (text || '').trim();
      if (!s) return '';
      const tokens = splitByWhitespace(s);
      const last = tokens.length - 1;
      const out = [];
      for (let i = 0; i < tokens.length; i++) {
        const tok = tokens[i];
        const parts = tok.split('-');
        const partsOut = [];
        for (let j = 0; j < parts.length; j++) {
          partsOut.push(Count.titleSeg(parts[j], i === 0 && j === 0, i === last && j === parts.length - 1));
        }
        out.push(partsOut.join('-'));
      }
      return out.join(' ');
    },
    applyTitle() {
      $('titleOut').value = Count.toTitleCase($('titleIn').value);
    },
    async copyTitle() {
      const v = $('titleOut').value || '';
      if (!v) return;
      try {
        await navigator.clipboard.writeText(v);
      } catch {
        $('titleOut').focus();
        $('titleOut').select();
        document.execCommand('copy');
      }
    },
    clear() {
      $('textInput').value = '';
      $('titleIn').value = '';
      $('titleOut').value = '';
      Count.update();
    },
    init() {
      $('textInput').addEventListener('input', Count.update);
      $('titleIn').addEventListener('input', Count.applyTitle);
      $('btnTitle').addEventListener('click', Count.applyTitle);
      $('btnCopyTitle').addEventListener('click', Count.copyTitle);
      $('clearCount').addEventListener('click', Count.clear);
      Count.update();
    },
  };

  /* =========================
     [JS:TRANSLATE] ç¿»è¯‘æ¨¡å—
  ========================= */
  const Translate = {
    state: 'google',
    dir() { return $('tDir') ? $('tDir').value : 'zh-en'; },
    setTab(name) {
      Translate.state = name;
      document.querySelectorAll('#tSeg button').forEach(b => b.classList.toggle('active', b.dataset.t === name));
      $('tp_google').classList.toggle('active', name === 'google');
      $('tp_baidu').classList.toggle('active', name === 'baidu');
      $('tp_chat').classList.toggle('active', name === 'chat');
      if (name === 'google') Translate.updateGoogle();
      if (name === 'chat') Translate.genPrompt();
    },
    updateGoogle() {
      const d = Translate.dir();
      const sl = d === 'en-zh' ? 'en' : 'zh-CN';
      const tl = d === 'en-zh' ? 'zh-CN' : 'en';
      const url = `https://translate.google.com/?sl=${encodeURIComponent(sl)}&tl=${encodeURIComponent(tl)}&op=translate`;
      const fr = $('gFrame');
      if (fr && fr.src !== url) fr.src = url;
    },
    openGoogle() {
      const d = Translate.dir();
      const sl = d === 'en-zh' ? 'en' : 'zh-CN';
      const tl = d === 'en-zh' ? 'zh-CN' : 'en';
      window.open(`https://translate.google.com/?sl=${sl}&tl=${tl}&op=translate`, '_blank');
    },
    openBaidu() {
      const d = Translate.dir();
      const hash = d === 'en-zh' ? '#en/zh/' : '#zh/en/';
      window.open(`https://fanyi.baidu.com/${hash}`, '_blank');
    },
    genPrompt() {
      const src = ($('chatSrc')?.value || '').trim();
      const d = Translate.dir();
      const toEn = d === 'zh-en';
      const prompt = [
        'ä½ æ˜¯ä¸€åèµ„æ·±äºšé©¬é€ŠListingæ–‡æ¡ˆç¿»è¯‘ä¸æœ¬åœ°åŒ–ä¸“å®¶ã€‚',
        `è¯·æŠŠä¸‹é¢å†…å®¹ç¿»è¯‘ä¸º${toEn ? 'è‹±æ–‡' : 'ä¸­æ–‡'}ï¼Œè¦æ±‚ï¼š`,
        '1) ä¿æŒå–ç‚¹æ¸…æ™°ã€è¯­æ°”è‡ªç„¶ã€é€‚åˆç¾å›½ç«™ç‚¹è´­ç‰©è¯­å¢ƒï¼ˆå¦‚ä¸ºä¸­æ–‡åˆ™é€‚åˆä¸­æ–‡è¯»è€…ï¼‰ã€‚',
        '2) æœ¯è¯­/å•ä½/æ•°å­—ä¸è¦ç¿»é”™ï¼›å“ç‰Œåã€å‹å·ã€ç¼©å†™ä¿æŒåŸæ ·ã€‚',
        '3) å°½é‡ä½¿ç”¨ç”µå•†å¸¸ç”¨è¡¨è¾¾ï¼Œé¿å…æœºç¿»è…”ï¼›å¿…è¦æ—¶åšè½»åº¦æœ¬åœ°åŒ–ä½†ä¸æ”¹å˜äº‹å®ã€‚',
        '4) è¾“å‡ºä»…ç»™ç¿»è¯‘ç»“æœï¼Œä¸è¦è§£é‡Šã€‚',
        '',
        'ã€å¾…ç¿»è¯‘å†…å®¹ã€‘',
        src || '(æ­¤å¤„ç²˜è´´ä½ çš„æ–‡æœ¬)',
      ].join('\n');
      if ($('chatPrompt')) $('chatPrompt').value = prompt;
    },
    async copyPrompt() {
      const v = $('chatPrompt')?.value || '';
      if (!v) return;
      try { await navigator.clipboard.writeText(v); }
      catch {
        $('chatPrompt').focus();
        $('chatPrompt').select();
        document.execCommand('copy');
      }
    },
    openChat() { window.open('https://chatgpt.com/', '_blank'); },
    init() {
      document.querySelectorAll('#tSeg button').forEach(b => b.addEventListener('click', () => Translate.setTab(b.dataset.t)));
      $('tDir').addEventListener('change', () => { Translate.updateGoogle(); Translate.genPrompt(); });

      $('btnOpenG').addEventListener('click', Translate.openGoogle);
      $('btnOpenB').addEventListener('click', Translate.openBaidu);

      $('chatSrc').addEventListener('input', Translate.genPrompt);
      $('btnGenPrompt').addEventListener('click', Translate.genPrompt);
      $('btnCopyPrompt').addEventListener('click', Translate.copyPrompt);
      $('btnOpenChat').addEventListener('click', Translate.openChat);

      Translate.updateGoogle();
      Translate.genPrompt();
    },
  };

  /* =========================
     [JS:AMAZON] äºšé©¬é€Šæ ¸ç®—æ¨¡å—
  ========================= */
  const Amazon = {
    toCny(amount, cur) { return amount * FX.rateToCny(cur); },
    fromCny(cny, cur) {
      if (cur === 'Â¥') return cny;
      const r = FX.rateToCny(cur);
      return r > 0 ? cny / r : 0;
    },
    update() {
      const sellCur = $('sellCur').value;
      const buyCur = $('buyCur').value;
      const sell = num($('sellPrice').value);
      const buy = num($('buyCost').value);

      const sellCny = Amazon.toCny(sell, sellCur);
      const buyCny = Amazon.toCny(buy, buyCur);

      const wt = num($('wtKg').value);
      const L = num($('lenCm').value);
      const W = num($('widCm').value);
      const H = num($('heiCm').value);
      const div = Math.max(1, num($('volDiv').value) || 6000);
      const volW = (L > 0 && W > 0 && H > 0) ? (L * W * H) / div : 0;
      const chargeW = Math.max(wt, volW);

      const shipPerKg = num($('shipPerKg').value);
      const shipFixed = num($('shipFixed').value);
      const shipCny = (shipPerKg > 0 ? chargeW * shipPerKg : 0) + shipFixed;

      const refCny = sellCny * (num($('refPct').value) / 100);
      const vatCny = sellCny * (num($('vatPct').value) / 100);
      const adCny = sellCny * (num($('adPct').value) / 100);
      const retCny = sellCny * (num($('retRate').value) / 100);

      const mode = $('fbaMode').value;
      let fbaCny = 0;
      if (mode === 'percent') {
        fbaCny = sellCny * (num($('fbaPct').value) / 100);
      } else if (mode === 'auto') {
        const per = num($('fbaPerKg').value);
        const fixed = num($('fbaFixed').value);
        fbaCny = Amazon.toCny(chargeW * per + fixed, sellCur);
      } else {
        fbaCny = Amazon.toCny(num($('fbaAmount').value), sellCur);
      }

      const totalCost = buyCny + shipCny + refCny + vatCny + adCny + fbaCny + retCny;
      const profitCny = sellCny - totalCost;
      const margin = sellCny > 0 ? profitCny / sellCny : 0;

      $('oChargeW').textContent = chargeW.toFixed(3);
      $('oShip').textContent = fmt('Â¥', shipCny);
      $('oRef').textContent = fmt(sellCur, Amazon.fromCny(refCny, sellCur));
      $('oVat').textContent = fmt(sellCur, Amazon.fromCny(vatCny, sellCur));
      $('oAd').textContent = fmt(sellCur, Amazon.fromCny(adCny, sellCur));
      $('oFba').textContent = fmt(sellCur, Amazon.fromCny(fbaCny, sellCur));
      $('oProfit').textContent = fmt(sellCur, Amazon.fromCny(profitCny, sellCur));
      $('oMargin').textContent = `${(margin * 100).toFixed(2)}%`;

      $('amazonNote').textContent = sell > 0
        ? `è¯´æ˜ï¼šé€€è´§æˆæœ¬æŒ‰â€œé€€è´§ç‡Ã—å”®ä»·â€åšäº†ç®€åŒ–ä¼°ç®—ï¼ˆå½“å‰ ${($('retRate').value || '0')}%ï¼‰ã€‚å¦‚éœ€æ›´ç²¾ç»†ï¼Œå¯å†åŠ â€œé€€è´§æŸå¤±å æ¯”/å¤„ç†è´¹â€ã€‚`
        : '';
    },
    clear() {
      $('sellCur').value = '$';
      $('sellPrice').value = '';
      $('buyCur').value = 'Â¥';
      $('buyCost').value = '';

      $('wtKg').value = '';
      $('lenCm').value = '';
      $('widCm').value = '';
      $('heiCm').value = '';

      $('volDiv').value = '6000';
      $('shipPerKg').value = '10';
      $('shipFixed').value = '0';

      $('refPct').value = '15';
      $('vatPct').value = '19';
      $('retRate').value = '5';
      $('adPct').value = '15';

      $('fbaMode').value = 'amount';
      $('fbaAmount').value = '0';
      $('fbaPct').value = '0';
      $('fbaPerKg').value = '0';
      $('fbaFixed').value = '0';

      Amazon.update();
    },
    init() {
      const ids = [
        'sellCur','sellPrice','buyCur','buyCost',
        'usdToCny','eurToCny','gbpToCny',
        'wtKg','lenCm','widCm','heiCm',
        'volDiv','shipPerKg','shipFixed',
        'refPct','vatPct','retRate','adPct',
        'fbaMode','fbaAmount','fbaPct','fbaPerKg','fbaFixed'
      ];
      ids.forEach(id => $(id).addEventListener('input', Amazon.update));
      ['sellCur','buyCur','fbaMode'].forEach(id => $(id).addEventListener('change', Amazon.update));
      $('clearAmazon').addEventListener('click', Amazon.clear);
      Amazon.update();
    },
  };

  /* =========================
     [JS:APP] å¯¼èˆª & åˆå§‹åŒ–
  ========================= */
  const App = {
    showPanel(id) {
      document.querySelectorAll('.panel').forEach(p => p.classList.toggle('active', p.id === id));
      document.querySelectorAll('.nav button').forEach(b => b.classList.toggle('active', b.dataset.panel === id));
    },
    initNav() {
      const sidebar = document.querySelector('.sidebar');
      const backdrop = $('backdrop');
      const btnMenu = $('btnMenu');
      const isMobile = () => window.matchMedia && window.matchMedia('(max-width:720px)').matches;

      const openMenu = () => {
        if (!sidebar) return;
        sidebar.classList.add('open');
        if (backdrop) backdrop.classList.add('show');
      };
      const closeMenu = () => {
        if (!sidebar) return;
        sidebar.classList.remove('open');
        if (backdrop) backdrop.classList.remove('show');
      };

      // ä¿ç•™åŸè¡Œä¸ºï¼šç‚¹å‡»åˆ‡æ¢é¢æ¿
      document.querySelectorAll('.nav button').forEach(b => b.addEventListener('click', () => {
        App.showPanel(b.dataset.panel);
        if (isMobile()) closeMenu();
      }));

      // æ‰‹æœºç«¯ï¼šèœå•æŒ‰é’®ä¸é®ç½©
      if (btnMenu) btnMenu.addEventListener('click', () => {
        if (!sidebar) return;
        const opened = sidebar.classList.contains('open');
        if (opened) closeMenu(); else openMenu();
      });
      if (backdrop) backdrop.addEventListener('click', closeMenu);

      // æ¡Œé¢ç«¯è‡ªåŠ¨æ¸…ç†æŠ½å±‰çŠ¶æ€
      window.addEventListener('resize', () => {
        if (!isMobile()) closeMenu();
      });
    },
    syncVersionUI() {
      document.title = `è¿è¥å·¥å…·ç®± v${APP_VERSION}`;
      const verEl = $('verText');
      if (verEl) verEl.textContent = APP_VERSION;
      const verElM = $('verTextM');
      if (verElM) verElM.textContent = APP_VERSION;
    },
    init() {
      App.syncVersionUI();
      App.initNav();

      Unit.init();
      Count.init();
      Translate.init();
      Amazon.init();

      // å¯åŠ¨æ—¶ï¼šå…ˆè¯»æœ¬åœ°ç¼“å­˜ï¼Œå†å°è¯•æ‹‰å–æœ€æ–°æ±‡ç‡
      const last = FX.load();
      if (last) FX.apply(last.usd, last.eur, last.gbp);
      FX.fetchLatest(true);

      // Debugï¼šä¾¿äºä½ åœ¨æ§åˆ¶å°å®šä½/è°ƒç”¨
      window.showPanel = App.showPanel;
      window.Toolbox = { Config, FX, Unit, Count, Translate, Amazon, App };

      // è½»é‡è‡ªæ£€ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
      console.assert(typeof window.showPanel === 'function', 'showPanel should exist');
      console.assert(Count.toTitleCase('usb led light for the home') === 'USB LED Light for the Home', 'TitleCase B');
      console.assert(FX.convert(10, 'Â¥', 'Â¥') === 10, 'FX identity');
      console.assert(Translate.genPrompt && typeof Translate.genPrompt === 'function', 'Translate.genPrompt exists');
    },
  };

  document.addEventListener('DOMContentLoaded', App.init);
})();
</script>
<script>/* [NAV:ICONS] v1.0.40 - å®‰å…¨è¿½åŠ å›¾æ ‡ */

  // ===== [NAV:ICONS] v1.0.40 - non-destructive icon prepend =====
  (function(){
    const iconMap = {
      unit: "ğŸ§®",        // å•ä½æ¢ç®—
      count: "ğŸ”¤",       // å­—ç¬¦å¤„ç†
      translate: "ğŸŒ",   // ç¿»è¯‘
      amazon: "ğŸ“¦"       // äºšé©¬é€Šæ ¸ç®—
    };
    function ensureIcons(){
      document.querySelectorAll(".nav button[data-panel]").forEach(btn=>{
        if(btn.querySelector(".btn-ic")) return;
        const key = btn.getAttribute("data-panel");
        const ic = document.createElement("span");
        ic.className = "btn-ic";
        ic.textContent = iconMap[key] || "ğŸ§°";
        btn.insertBefore(ic, btn.firstChild);
      });
    }
    if(document.readyState === "loading"){
      document.addEventListener("DOMContentLoaded", ensureIcons);
    }else{
      ensureIcons();
    }
  })();
</script>
<!-- [UI:LAYOUT] END -->
</body>
</html>
