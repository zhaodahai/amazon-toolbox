<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <!-- [META:VERSION] å•ç‚¹ç‰ˆæœ¬å·ï¼šä»¥ååªæ”¹è¿™é‡Œå³å¯ï¼ˆæ ‡é¢˜/ä¾§æ /JS ä¼šè‡ªåŠ¨åŒæ­¥ï¼‰ -->
  <!-- [APP:VERSION] -->

  <meta name="app-version" content="1.2.60" />

  <title>è¿è¥å·¥å…·ç®± Â· Aurora</title>

  <style>/* =====================================================================================
  [UI:STYLE] v1.0.32
  è¯´æ˜ï¼šä»…æ•´ç†ä¸å¢åŠ é”šç‚¹æ³¨é‡Šï¼›ä¸æ”¹åŠŸèƒ½é€»è¾‘ã€‚
===================================================================================== */


    /*
      ============================================================
      è¿è¥å·¥å…·ç®±ï¼ˆå•æ–‡ä»¶åŸºçº¿ï¼‰
      ç‰ˆæœ¬ï¼šè§ <meta name="app-version" ...>

      ğŸ” å¿«é€Ÿå®šä½é”šç‚¹ï¼ˆCtrl+F æœç´¢ï¼‰ï¼š
      - [CSS:BASE] / [CSS:LAYOUT] / [CSS:COMPONENTS]
      - [CSS:MODULE_COUNT] / [CSS:MODULE_TRANSLATE]
      - [HTML:SIDEBAR] / [HTML:PANEL_UNIT] / [HTML:PANEL_COUNT]
      - [HTML:PANEL_TRANSLATE] / [HTML:PANEL_AMAZON]
      - [JS:CONFIG] / [JS:HELPERS] / [JS:FX] / [JS:UNIT]
      - [JS:COUNT] / [JS:TRANSLATE] / [JS:AMAZON] / [JS:APP]
      ============================================================
    */

    /* =========================
       [CSS:BASE]
    ========================= */
    *{box-sizing:border-box;margin:0;padding:0}
    html,body{height:100%;font-family:Arial,system-ui,-apple-system,Segoe UI,Roboto,"PingFang SC","Microsoft YaHei",sans-serif;background:#f3f4f6;color:#111827}

    /* =========================
       [CSS:LAYOUT]
    ========================= */
    .app{display:flex;height:100vh}
    .sidebar{width:220px;min-width:190px;max-width:240px;background:#fff;border-right:1px solid #e5e7eb;padding:14px 12px;display:flex;flex-direction:column;gap:12px}
    @media (max-width:980px){.sidebar{width:195px;min-width:175px}}
    .content{flex:1;padding:22px 24px;overflow:auto}
    @media (max-width:520px){.content{padding:16px 12px}}

    /* =========================
       [CSS:COMPONENTS]
    ========================= */
    .brand{padding:10px;border-radius:12px;border:1px solid #eef2f7;background:linear-gradient(180deg,#f8fafc,#fff)}
    .brand .t{font-weight:800;font-size:14px}
    .brand .s{margin-top:4px;color:#6b7280;font-size:12px;line-height:1.45}

    .nav{display:flex;flex-direction:column;gap:10px}
    .nav button{width:100%;text-align:left;padding:10px;border-radius:10px;border:1px solid #eef2f7;background:#fff;cursor:pointer;box-shadow:0 2px 10px rgba(0,0,0,.05);transition:.15s}
    .nav button:hover{transform:translateY(-1px);background:#f8fafc;box-shadow:0 6px 18px rgba(0,0,0,.08)}
    .nav button.active{background:#eef2ff;border-color:rgba(37,99,235,.25);box-shadow:inset 0 0 0 2px rgba(37,99,235,.16),0 6px 18px rgba(0,0,0,.08)}

    .footer{margin-top:auto;padding:10px;border-top:1px solid #eef2f7;color:#6b7280;font-size:12px;display:flex;justify-content:space-between}

    .panel{display:none;background:#fff;border-radius:12px;padding:16px 18px;box-shadow:0 8px 20px rgba(0,0,0,.08)}
    .panel.active{display:block}

    .head{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:10px}
    h2{font-size:18px}
    h3{margin:14px 0 8px;font-size:14px}

    .hint{margin-top:8px;color:#6b7280;font-size:13px;line-height:1.5}
    .muted{color:#6b7280;font-size:12px;line-height:1.5}

    .row{display:flex;flex-wrap:wrap;gap:12px;align-items:center}
    .row+.row{margin-top:10px}

    label{display:flex;flex-direction:column;gap:6px;font-size:12px;color:#374151}
    input,select,textarea{border:1px solid #d1d5db;border-radius:10px;padding:8px 10px;height:36px;font:inherit;background:#fff}
    input:focus,select:focus,textarea:focus{outline:none;border-color:rgba(37,99,235,.55);box-shadow:0 0 0 3px rgba(37,99,235,.14)}

    /* ä¸‹æ‹‰æ˜¾ç¤ºä¼˜åŒ–ï¼šé˜²æ­¢â€œå˜ç±³/è‹±å¯¸â€ç­‰è¢«æˆªæ–­ */
    select{font-size:13px;line-height:1.2;padding-right:28px;min-width:132px}
    option{font-size:13px}

    input[type="number"]{width:130px}
    .sel{min-width:160px}
    textarea{height:auto;resize:vertical}

    .btn{padding:8px 12px;border:1px solid #e5e7eb;border-radius:8px;background:#fff;cursor:pointer;font-size:13px}
    .btn:hover{background:#f9fafb}
    .primary{padding:10px 14px;border:none;border-radius:8px;background:#2563eb;color:#fff;cursor:pointer}

    .swap{cursor:pointer;font-size:18px;color:#2563eb;user-select:none}
    .result{margin-top:8px;font-weight:800}


/* ===== [AMZ:RESULTS_BEAUTIFY] v1.2.31 ===== */
.amzResGrid{
  margin-top:12px;
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(160px, 1fr));
  gap:12px;
}
.amzResItem{
  border:1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.04);
  border-radius:14px;
  padding:12px 12px;
  box-shadow: 0 8px 24px rgba(0,0,0,.18);
  position:relative;
  overflow:hidden;
}
.amzResItem::before{
  content:"";
  position:absolute; inset:-2px;
  background: radial-gradient(640px 200px at 10% 0%, rgba(122,162,255,.12), transparent 60%),
              radial-gradient(520px 160px at 95% 0%, rgba(167,139,250,.10), transparent 62%);
  opacity:.9;
  pointer-events:none;
}
.amzResK{
  position:relative;
  color: rgba(226,232,240,.78);
  font-size:12px;
  letter-spacing:.2px;
}
.amzResV{
  position:relative;
  margin-top:6px;
  font-weight:950;
  font-size:18px;
  letter-spacing:.2px;
}
.amzResUnit{ margin-left:6px; font-size:12px; font-weight:900; color: rgba(226,232,240,.62); }
.amzResItemBig .amzResV{ font-size:20px; }
.amzProfit.pos, .amzMargin.pos{ color: rgba(74,222,128,.92); text-shadow: 0 1px 0 rgba(0,0,0,.35); }
.amzProfit.neg, .amzMargin.neg{ color: rgba(248,113,113,.95); text-shadow: 0 1px 0 rgba(0,0,0,.35); }

    .cards{display:flex;flex-direction:column;gap:12px}
    .card{border:1px solid #e5e7eb;background:#fbfdff;border-radius:12px;padding:12px}
    .cardTitle{display:flex;align-items:center;justify-content:space-between;margin-bottom:8px}
    .badge{font-size:12px;color:#6b7280;background:#f3f4f6;border-radius:999px;padding:4px 8px}

    .pill{display:inline-block;padding:4px 8px;border-radius:999px;background:#f3f4f6;color:#374151;font-size:12px;margin-right:8px}
    .pill.over{background:#fee2e2;color:#991b1b;font-weight:800}

    iframe{width:100%;height:420px;border:1px solid #e5e7eb;border-radius:10px}

    /* =========================
       [CSS:MODULE_COUNT]
    ========================= */
    .split{display:flex;flex-direction:column;gap:12px;margin-top:10px}
    .box{border:1px solid #e5e7eb;background:#fbfdff;border-radius:12px;padding:12px}
    .boxHead{display:flex;align-items:center;justify-content:space-between;gap:10px;margin-bottom:8px}
    .boxHead h3{margin:0;font-size:14px}

    .stats{display:flex;flex-wrap:wrap;gap:10px;margin-top:10px}
    .stat{border:1px solid #eef2f7;background:#fff;border-radius:10px;padding:10px 12px;min-width:150px}
    .stat .k{color:#6b7280;font-size:12px}
    .stat .v{font-weight:900;font-size:18px;margin-top:4px}

    /* =========================
       [CSS:MODULE_TRANSLATE]
    ========================= */
    .seg{display:inline-flex;border:1px solid #e5e7eb;border-radius:999px;overflow:hidden;background:#fff}
    .seg button{border:0;background:transparent;padding:8px 12px;font-size:13px;cursor:pointer;color:#374151}
    .seg button.active{background:#eef2ff;color:#1d4ed8;font-weight:800}
    .tPane{display:none;margin-top:12px}
    .tPane.active{display:block}
    .two{display:grid;grid-template-columns:1fr 1fr;gap:12px}
    @media (max-width:860px){.two{grid-template-columns:1fr}}
    .mono{font-family:ui-monospace,SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace}
  
    /* =========================
       [CSS:MOBILE] æ‰‹æœºé€‚é…ï¼ˆ<=720pxï¼‰
       - é¡¶éƒ¨æ˜¾ç¤ºå·¥å…·æ ï¼ˆèœå•/æ ‡é¢˜/ç‰ˆæœ¬ï¼‰
       - ä¾§æ å˜ä¸ºæŠ½å±‰èœå•ï¼ˆé»˜è®¤éšè—ï¼‰
       - ç‚¹å‡»é®ç½©/åˆ‡æ¢é¢æ¿è‡ªåŠ¨æ”¶èµ·
    ========================= */
    .mbar{display:none}
    .backdrop{display:none}
    .iconBtn{
      border:1px solid #e5e7eb;
      background:#fff;
      border-radius:10px;
      width:40px;height:36px;
      font-size:18px;
      cursor:pointer;
    }
    @media (max-width:720px){
      .app{flex-direction:column}
      /* é¡¶éƒ¨æ å›ºå®šåœ¨å†…å®¹åŒºé¡¶éƒ¨ */
      .mbar{
        display:flex;
        align-items:center;
        justify-content:space-between;
        gap:10px;
        position:sticky;
        top:0;
        z-index:40;
        padding:10px 10px;
        margin:-22px -24px 12px -24px; /* æŠµæ¶ˆ .content çš„ padding */
        background:rgba(243,244,246,.88);
        backdrop-filter:saturate(1.2) blur(8px);
        border-bottom:1px solid #e5e7eb;
      }
      .mtitle{font-weight:800;font-size:14px}
      .mver{font-size:12px;color:#6b7280;white-space:nowrap}

      /* æŠ½å±‰ä¾§æ  */
      .sidebar{
        position:fixed;
        left:0; top:0; bottom:0;
        width:min(78vw, 320px);
        max-width:320px;
        transform:translateX(-110%);
        transition:transform .18s ease;
        z-index:60;
        box-shadow:0 12px 40px rgba(0,0,0,.18);
      }
      .sidebar.open{transform:translateX(0)}
      .nav button{padding:12px 12px;font-size:14px}

      /* é®ç½© */
      .backdrop{
        display:block;
        position:fixed;
        inset:0;
        background:rgba(0,0,0,.28);
        z-index:55;
        opacity:0;
        pointer-events:none;
        transition:opacity .18s ease;
      }
      .backdrop.show{opacity:1;pointer-events:auto}

      /* å†…å®¹åŒº padding å˜å°ä¸€ç‚¹ */
      .content{padding:14px 12px}
      .mbar{margin:-14px -12px 12px -12px}
    }

  
    /* ===== [UI:DESKTOP_MOBILE_MODES] v1.0.32 ===== */
    @media (min-width: 981px){
      .nav button{
        font-size:16px;
        font-weight:700;
        letter-spacing:.2px;
        padding:12px 12px;
        display:flex;
        align-items:center;
        gap:10px;
      }
      .nav button .btn-txt{flex:1;}
.nav button .btn-ic{
        width:22px;
        flex:0 0 22px;
        display:inline-flex;
        align-items:center;
        justify-content:center;
        font-size:18px;
        line-height:1;
      }
      .brand .t{font-size:16px;font-weight:900}
    }
    @media (max-width: 980px){
      .nav button{
        display:flex;
        align-items:center;
        gap:8px;
      }
      .nav button .btn-ic{
        width:20px;
        flex:0 0 20px;
        display:inline-flex;
        align-items:center;
        justify-content:center;
        font-size:16px;
        line-height:1;
      }
    }

/* ===== [PANEL:AMZ][RATE_ROW_LAYOUT] v1.0.32 ===== */
.panel#amazon .rateRow label{
  flex-direction:row;
  align-items:center;
  gap:6px;
}
.panel#amazon .rateRow input{
  width:92px;
}
.panel#amazon .rateRow label{
  white-space:nowrap;
}



/* ===== [AMZ:FBA_MODE_BOXES] v1.2.30 ===== */
.fbaRow{align-items:stretch}
.fbaModeBox{
  flex:1;
  min-width:160px;
  border:1px solid var(--border);
  background: var(--card);
  border-radius:10px;
  padding:8px;
  box-shadow: 0 3px 10px rgba(0,0,0,.10);
  position:relative;
  overflow:hidden;
}
.fbaModeTop{
  display:flex;
  align-items:center;
  gap:8px;
  font-weight:900;
  margin-bottom:8px;
}
.fbaIc{
  width:28px;height:28px;
  display:inline-flex;align-items:center;justify-content:center;
  border-radius:10px;
  background: rgba(122,162,255,.16);
  border: 1px solid rgba(122,162,255,.22);
}
.fbaModeName{letter-spacing:.2px}
.fbaModeHint{
  margin-top:8px;
  font-size:12px;
  color: var(--muted);
  padding:7px 9px;
  border-radius:10px;
  border:1px dashed rgba(255,255,255,.12);
  background: rgba(255,255,255,.04);
  line-height:1.45;
}
.fbaModeBox.active{
  border-color: rgba(122,162,255,.55);
  box-shadow: 0 0 0 3px rgba(122,162,255,.16), 0 12px 34px rgba(0,0,0,.30);
}
.fbaModeBox.active::before{
  content:"";
  position:absolute; inset:-2px;
  background: radial-gradient(800px 220px at 15% 0%, rgba(122,162,255,.22), transparent 60%),
              radial-gradient(700px 220px at 90% 10%, rgba(167,139,250,.18), transparent 62%);
  pointer-events:none;
}
.fbaModeBox.active .fbaModeHint{
  color: var(--text);
  border-color: rgba(122,162,255,.38);
  background: rgba(122,162,255,.12);
}

@media (max-width:860px){
  .fbaModeBox{min-width: 100%;}
}
/* ===== [LAYOUT:TOPBAR + SIDEBAR + WORKSPACE] v1.0.51 (base 1.0.32) ===== */
.page{display:flex;flex-direction:column;height:100vh;min-height:100vh}
.topbar{
  display:flex;align-items:center;justify-content:space-between;
  gap:12px;padding:12px 14px;
  border-bottom:1px solid rgba(17,24,39,.10);
  background:#ffffff;
}
.topBrand{display:flex;flex-direction:column;gap:2px;min-width:0}
.topTitle{font-weight:900;letter-spacing:.2px}
.topSub{font-size:12px;color:#6b7280;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;max-width:78vw}
.topMeta{display:flex;align-items:center;gap:10px;color:#6b7280;font-weight:800}
.topVer{padding:6px 10px;border-radius:999px;border:1px solid #eef2f7;background:#f8fafc}
.topVerNum{font-variant-numeric:tabular-nums}

/* å…³é”®ï¼šä¸‹æ–¹ä»ä¿æŒâ€œä¾§è¾¹æ  + å·¥ä½œåŒºâ€å¹¶æ’ */
.app{flex:1;height:auto;min-height:0}
.sidebar{height:auto}
.content{min-height:0}

/* è§†è§‰ä¸ŠæŠŠâ€œè¿è¥å·¥å…·ç®±æ¨¡å—â€æ¬åˆ°é¡¶éƒ¨ï¼šéšè—å·¦ä¾§ brand */
.sidebar .brand{display:none !important;}
/* ç§»åŠ¨ç«¯ï¼šå‰¯æ ‡é¢˜éšè— */
@media (max-width:720px){
  .topSub{display:none}
}

/* ===== [TOPBAR:NO_VERSION][FONT_SCALE_UP] v1.0.52 ===== */
/* 1) é¡¶éƒ¨å¯¼èˆªæ ä¸æ˜¾ç¤ºç‰ˆæœ¬å·ï¼ˆç‰ˆæœ¬åªä¿ç•™åœ¨ä¾§è¾¹æ ï¼‰ */
.topbar .topMeta{display:none !important;}

/* 2) å­—ä½“æ•´ä½“æ”¾å¤§ä¸€äº›ï¼ˆä¿æŒå¸ƒå±€ä¸ä¹±ï¼‰ */
html{font-size:16px;} /* åŸæ¥æ›´å°ï¼Œè¿™é‡Œæ•´ä½“æå‡ */
.sidebar{font-size:15px;}
.nav button{font-size:15px; font-weight:800;}
.content{font-size:15px;}
.head h2{font-size:20px;}
.cardTitle h3{font-size:16px;}
input, textarea, select{font-size:15px;}
.result{font-size:15px; line-height:1.6;}

/* ===== [COUNT:RISK_HINT] v1.2.3 ===== */
#riskHint{
  background: rgba(245,158,11,.10);
  border: 1px solid rgba(245,158,11,.22);
  color: rgba(243,244,246,.92);
}

/* ===== [COUNT:RISK_HINT_READABLE] v1.2.4 ===== */
#riskHint{
  display:block;
  font-weight: 850;
  line-height: 1.6;
  letter-spacing: .1px;
  background: rgba(245,158,11,.14);
  border: 1px solid rgba(245,158,11,.32);
  color: var(--text) !important;
  text-shadow: 0 1px 0 rgba(0,0,0,.25);
}

/* ===== [COUNT:RISK_HIGHLIGHT_IN_TEXTAREA] v1.2.6 ===== */
.hlWrap{position:relative;}
.hlLayer{
  position:absolute; inset:0;
  margin:0; pointer-events:none;
  white-space:pre-wrap; word-wrap:break-word;
  overflow:hidden;
  padding:12px 12px;
  border-radius:12px;
  font: inherit;
  line-height: 1.6;
  color: var(--text); /* base text color in layer */
}
.hlLayer mark.risk{
  background: rgba(245, 158, 11, .45);
  color: var(--text);
  padding: 0 2px;
  border-radius: 4px;
}
#textInputWrap textarea#textInput{
  position:relative;
  background: transparent !important;
  color: transparent !important; /* hide real text, show layer text */
  -webkit-text-fill-color: transparent !important;
  caret-color: var(--text);
}
#textInputWrap textarea#textInput::placeholder{
  color: rgba(209,213,219,.80);
  -webkit-text-fill-color: rgba(209,213,219,.80);
}
/* selection style (best-effort) */
#textInputWrap textarea#textInput::selection{background: rgba(122,162,255,.35);}

/* ===== [COUNT:CARET_FIX] v1.2.7 ===== */
/* ä¸å†æŠŠçœŸå®æ–‡æœ¬å®Œå…¨é€æ˜ï¼Œå¦åˆ™æŸäº›æµè§ˆå™¨ä¼šéšè—å…‰æ ‡ */
#textInputWrap textarea#textInput{
  color: rgba(0,0,0,0.02) !important; /* å‡ ä¹ä¸å¯è§ï¼Œä½†å¯ä¿æŒå…‰æ ‡ */
  -webkit-text-fill-color: rgba(0,0,0,0.02) !important;
  caret-color: var(--text) !important; /* æ˜ç¡®æŒ‡å®šå…‰æ ‡é¢œè‰² */
}
/* ç¡®ä¿èšç„¦æ—¶å…‰æ ‡å¯è§ */
#textInputWrap textarea#textInput:focus{
  caret-color: var(--text) !important;
}

/* ===== [COUNT:RISK_PREVIEW_MODE] v1.2.18 ===== */
/* å½»åº•å–æ¶ˆå å±‚é«˜äº®ï¼ˆé»„åº•/é”™ä½/å…‰æ ‡é—®é¢˜çš„æ ¹æºï¼‰ï¼Œåªä¿ç•™â€œé¢„è§ˆåŒºé»„è‰²åŠ ç²—â€ */
#riskColorPreview{border: 1px dashed rgba(255,255,255,.14);}
#riskColorPreview .riskColor{ color:#f59e0b; font-weight:850; }
textarea#textInput{
  color: var(--text) !important;
  -webkit-text-fill-color: var(--text) !important;
  caret-color: var(--text) !important;
}

/* ===== [COUNT:CONTENTEDITABLE_RISK_INLINE] v1.2.19 ===== */
.ceInput{
  width: 100%;
  min-height: 140px;
  padding: 8px 10px;
  border-radius: 10px;
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.04);
  color: var(--text);
  outline: none;
  white-space: pre-wrap;
  word-break: break-word;
  line-height: 1.6;
  font: inherit;
}
.ceInput:focus{
  border-color: rgba(122,162,255,.45);
  box-shadow: 0 0 0 3px rgba(122,162,255,.18);
}
.ceInput .riskWord{
  color: #f59e0b;
  font-weight: 850;
}
.ceInput:empty:before{
  content: attr(data-placeholder);
  color: rgba(209,213,219,.60);
  pointer-events: none;
}

/* ===== [COUNT:CE_BORDER_FIX] v1.2.20 ===== */
.ceInput{
  border: 1px solid rgba(148,163,184,.35) !important; /* slate-400 */
  background: rgba(255,255,255,.04);
}
.ceInput:hover{
  border-color: rgba(148,163,184,.55);
}
.ceInput:focus{
  border-color: #7aa2ff !important;
  box-shadow: 0 0 0 3px rgba(122,162,255,.22) !important;
}

/* ===== [COUNT:CE_BG_UNIFY] v1.2.21 ===== */
/* ä¸å…¶ä»–è¾“å…¥/å¡ç‰‡ä¿æŒä¸€è‡´çš„èƒŒæ™¯è‰² */
.ceInput{
  background: var(--card-bg, rgba(255,255,255,.06)) !important;
}

/* ===== [COUNT:CE_BG_MATCH_INPUT] v1.2.22 ===== */
/* ä¸é¡µé¢ä¸­ textarea/input çš„èƒŒæ™¯ä¿æŒä¸€è‡´ï¼ˆå½“å‰ä¸»é¢˜ä¸ºæµ…è‰²ï¼šbackground:#fffï¼‰ */
.ceInput{
  background: #fff !important;
  border: 1px solid #d1d5db !important;
}
.ceInput:hover{ border-color:#cbd5e1 !important; }
.ceInput:focus{
  border-color:#7aa2ff !important;
  box-shadow: 0 0 0 3px rgba(122,162,255,.18) !important;
}

/* =====================================================================================
   [THEME:DARK_A] å¤œè§†æ·±è‰²ä¸»é¢˜ï¼ˆæ–¹æ¡ˆAï¼šä¸“ä¸šå¤œè§†ï¼‰ v1.2.26
   - A1ï¼šæ‰‹åŠ¨åˆ‡æ¢ï¼ˆæ—¥/å¤œï¼‰
   - B1ï¼šé£é™©è¯æŸ”å’Œç¥ç€é»„
===================================================================================== */
:root{
  --bg:#f3f4f6;
  --panel:#ffffff;
  --card:#fbfdff;
  --text:#111827;
  --muted:#6b7280;
  --border:#e5e7eb;
  --border-2:#eef2f7;
  --accent:#2563eb;
  --accent-2:#1d4ed8;
  --risk:#f59e0b;
  --shadow:0 8px 20px rgba(0,0,0,.08);
}

/* ä¸»é¢˜åˆ‡æ¢æŒ‰é’® */
.themeBtn{
  display:inline-flex; align-items:center; gap:8px;
  padding:8px 10px;
  border-radius:999px;
  border:1px solid var(--border);
  background:var(--panel);
  cursor:pointer;
  font-weight:850;
  color:var(--text);
  box-shadow:0 2px 10px rgba(0,0,0,.05);
  user-select:none;
}
.themeBtn:hover{ transform:translateY(-1px); }
.themeBtn .ic{ width:18px; display:inline-flex; justify-content:center; }
.themeBtn .moon{ display:none; }
.themeBtn .txt{ font-size:13px; opacity:.9; }

/* ç§»åŠ¨ç«¯ï¼šä¸»é¢˜æŒ‰é’®æ›´ç´§å‡‘ */
.iconBtn.themeIcon{ width:40px; }

/* æ·±è‰²ä¸»é¢˜å˜é‡ */
body.dark{
  --bg:linear-gradient(180deg, #070b18 0%, #0b1220 55%, #070b18 100%);
  --panel:rgba(15, 23, 42, .62);
  --card:rgba(17, 28, 52, .58);
  --text:#e5e7eb;
  --muted:#9aa4b2;
  --border:rgba(255,255,255,.10);
  --accent:#7aa2ff;
  --accent2:#a78bfa;
  --risk:#fbbf24;
  --shadow:0 16px 46px rgba(0,0,0,.55);
}

/* ===== [AURORA:TEXT_TONE_FIX] v1.2.32 ===== */
body.dark .hint,
body.dark .muted{
  color: rgba(226,232,240,.72) !important;
}
body.dark .hint strong,
body.dark .muted strong{
  color: rgba(226,232,240,.90);
}




/* ===== [BEAUTY:ENHANCED_UI] v1 ===== */
body.dark{
  /* subtle noise / vignette layer */
}
body.dark::before{
  content:"";
  position:fixed; inset:0;
  pointer-events:none;
  background:
    radial-gradient(1200px 600px at 15% 10%, rgba(255,255,255,.10), transparent 55%),
    radial-gradient(900px 500px at 85% 20%, rgba(255,255,255,.06), transparent 60%),
    radial-gradient(900px 700px at 60% 90%, rgba(255,255,255,.05), transparent 65%),
    linear-gradient(180deg, rgba(0,0,0,.18), rgba(0,0,0,.38));
  opacity:.85;
  mix-blend-mode:screen;
  filter:saturate(1.05);
  z-index:-1;
}
/* glassy panels */
body.dark .panel{
  background: var(--panel);
  border: 1px solid rgba(255,255,255,.10);
  box-shadow: var(--shadow);
  backdrop-filter: blur(10px) saturate(1.1);
}
body.dark .card,
body.dark .box,
body.dark .stat{
  background: var(--card);
  border: 1px solid rgba(255,255,255,.10);
  box-shadow: 0 10px 24px rgba(0,0,0,.35);
}
body.dark .brand,
body.dark .topbar{
  background: rgba(15,23,42,.68);
  border-bottom: 1px solid rgba(255,255,255,.10);
  backdrop-filter: blur(10px) saturate(1.1);
}
body.dark .sidebar{
  border-right: 1px solid rgba(255,255,255,.10);
}
/* richer nav buttons */
body.dark .nav button{
  border: 1px solid rgba(255,255,255,.10);
  background: rgba(255,255,255,.04);
}
body.dark .nav button:hover{
  background: rgba(255,255,255,.06);
  transform: translateY(-1px);
}
body.dark .nav button.active{
  border-color: rgba(255,255,255,.14);
  box-shadow: 0 10px 24px rgba(0,0,0,.35), inset 0 0 0 2px rgba(255,255,255,.06);
}
/* inputs */
body.dark input, body.dark select, body.dark textarea{
  background: rgba(255,255,255,.04);
  border: 1px solid rgba(255,255,255,.12);
  color: var(--text);
}
body.dark input:focus, body.dark select:focus, body.dark textarea:focus{
  border-color: rgba(122,162,255,.65);
  box-shadow: 0 0 0 3px rgba(122,162,255,.18);
}
/* badges / pills */
body.dark .badge{
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.10);
  color: var(--muted);
}
body.dark .pill{
  background: rgba(255,255,255,.06);
  border: 1px solid rgba(255,255,255,.10);
  color: var(--text);
}
body.dark .pill.over{
  background: rgba(239,68,68,.18);
  border-color: rgba(239,68,68,.35);
  color: #fecaca;
}
/* risk highlight (B1: amber) */
body.dark .ceInput .riskWord{ color: var(--risk); text-shadow: 0 1px 0 rgba(0,0,0,.35); }
body.dark #riskHint{
  background: rgba(245,158,11,.14);
  border: 1px solid rgba(245,158,11,.28);
  color: var(--text);
}
/* nice separators */
body.dark .footer{
  border-top: 1px solid rgba(255,255,255,.10);
}

body.dark .primary{
  background: linear-gradient(135deg, #7aa2ff 0%, #a78bfa 100%);
  box-shadow: 0 10px 24px rgba(0,0,0,.35);
}
body.dark .nav button.active{
  background: linear-gradient(135deg, rgba(255,255,255,.07) 0%, rgba(255,255,255,.03) 70%), 
              linear-gradient(135deg, rgba(0,0,0,.0) 0%, rgba(0,0,0,.0) 100%);
}
body.dark .nav button.active .btn-ic{ color:#7aa2ff; filter: drop-shadow(0 6px 10px rgba(0,0,0,.35)); }
body.dark .swap{ color:#7aa2ff; }
body.dark input:focus, body.dark select:focus, body.dark textarea:focus{
  border-color: color-mix(in srgb, #7aa2ff 65%, white 0%);
  box-shadow: 0 0 0 3px color-mix(in srgb, #7aa2ff 22%, transparent);
}
/* subtle gradient line under topbar */
body.dark .topbar{ position:sticky; top:0; z-index:80; }
body.dark .topbar::after{
  content:"";
  position:absolute; left:0; right:0; bottom:-1px; height:2px;
  background: linear-gradient(90deg, transparent 0%, #7aa2ff 35%, #a78bfa 65%, transparent 100%);
  opacity:.55;
}



/* æ·±è‰²æ¨¡å¼ï¼šåŸºç¡€èƒŒæ™¯ä¸æ–‡å­— */
body{ background:var(--bg); color:var(--text); }
.page{ background:var(--bg); color:var(--text); }

/* é¡¶æ /ä¾§æ /é¢æ¿ */
.topbar{
  background:var(--panel);
  border-bottom:1px solid var(--border);
}
.sidebar{
  background:var(--panel);
  border-right:1px solid var(--border);
}
.panel{
  background:var(--panel);
  box-shadow:var(--shadow);
}
.card{
  background:var(--card);
  border:1px solid var(--border);
}
body.dark .box{ background:var(--card); border:1px solid var(--border); }
.stat{
  background:var(--panel);
  border:1px solid var(--border-2);
}
.badge,.pill{ background:rgba(148,163,184,.12); color:var(--muted); }
body.dark .badge, body.dark .pill{ background:rgba(148,163,184,.14); color:var(--muted); }
.pill.over{
  background:rgba(239,68,68,.18);
  color:#fecaca;
  font-weight:900;
}

/* æ–‡æœ¬è‰²åˆ†çº§ */
.hint,.muted,.footer{ color:var(--muted); }
.brand .s{ color:var(--muted); }
.stat .k{ color:var(--muted); }

/* å¯¼èˆªæŒ‰é’® */
.nav button{
  background:var(--panel);
  border:1px solid var(--border-2);
  color:var(--text);
}
.nav button:hover{ background:rgba(148,163,184,.10); }
.nav button.active{
  background:rgba(122,162,255,.18);
  border-color:rgba(122,162,255,.35);
}

/* è¾“å…¥æ§ä»¶ */
input,select,textarea{
  background:var(--panel);
  color:var(--text);
  border:1px solid rgba(148,163,184,.28);
}
input::placeholder, textarea::placeholder{ color:rgba(154,164,178,.75); }
input:focus,select:focus,textarea:focus{
  border-color:rgba(122,162,255,.55);
  box-shadow:0 0 0 3px rgba(122,162,255,.18);
}

/* contenteditable è¾“å…¥æ¡†ï¼ˆä½ ç¨³å®šæ–¹æ¡ˆçš„æ ¸å¿ƒï¼‰ */
body.dark .ceInput{
  background:var(--panel) !important;
  color:var(--text) !important;
  border:1px solid rgba(148,163,184,.30) !important;
}
body.dark .ceInput:hover{ border-color:rgba(148,163,184,.46) !important; }
body.dark .ceInput:focus{
  border-color:var(--accent) !important;
  box-shadow:0 0 0 3px rgba(122,162,255,.20) !important;
}
body.dark .ceInput:empty:before{ color:rgba(154,164,178,.70); }

/* é£é™©è¯ï¼šB1 æŸ”å’Œç¥ç€é»„ï¼ˆå¤œè§†å‹å¥½ï¼‰ */
.ceInput .riskWord{
  color:var(--risk);
  font-weight:900;
}

/* é£é™©æç¤ºæ¡ */
#riskHint{
  background: rgba(251,191,36,.12) !important;
  border: 1px solid rgba(251,191,36,.25) !important;
  color: var(--text) !important;
}

/* åˆ‡æ¢æŒ‰é’®ï¼šæš—è‰²æ—¶æ˜¾ç¤ºæœˆäº®å›¾æ ‡ */
body.dark .themeBtn .sun{ display:none; }
body.dark .themeBtn .moon{ display:inline-flex; }
body.dark .themeBtn{ border-color:var(--border); }

/* iframe è¾¹æ¡†è·Ÿéšä¸»é¢˜ */
iframe{ border:1px solid var(--border); background:var(--panel); }


/* ===== [HOTFIX:INTERACTION] v1.2.28 ===== */
body.dark .panel, body.dark .content, body.dark .nav button, body.dark .seg button{ pointer-events:auto; }

/* ===== [AMZ:UNIFY_STYLE] v1.2.32 ===== */
.panel#amazon h3{
  font-size:14px;
  font-weight:900;
  color: rgba(226,232,240,.92);
  margin-top:16px;
  margin-bottom:10px;
}
body.dark .panel#amazon label{
  background: rgba(255,255,255,.03);
  border: 1px solid rgba(255,255,255,.10);
  border-radius: 12px;
  padding: 10px 10px;
}
body.dark .panel#amazon label > input,
body.dark .panel#amazon label > select{
  background: rgba(0,0,0,.18) !important;
  border: 1px solid rgba(255,255,255,.12) !important;
}
body.dark .panel#amazon .rateRow label{
  background: rgba(255,255,255,.02);
}
body.dark .panel#amazon .amzResItem{
  border:1px solid rgba(255,255,255,.12);
  background: rgba(255,255,255,.035);
}



/* =====================================================================================
   [LIGHT:AMZ_POLISH] v1.2.34
   è¯´æ˜ï¼šä»…ä¼˜åŒ–ç™½å¤©æ¨¡å¼ï¼ˆèƒŒæ™¯è‰²/æ–‡å­—è‰²ï¼‰ï¼›ä¸æ”¹å¸ƒå±€/äº¤äº’/JSï¼›å¤œé—´æ¨¡å¼(Aurora)ä¸å—å½±å“ã€‚
   ç›®æ ‡ï¼šæ¢å¤ v1.2.22 é‚£ç§å¹²å‡€ã€åè°ƒã€å·¥å…·å‹è§‚æ„Ÿï¼ˆé‡ç‚¹ï¼šäºšé©¬é€Šæ ¸ç®—æ¨¡å—ï¼‰ã€‚
===================================================================================== */

/* ç™½å¤©æ¨¡å¼åˆ¤å®šï¼šbody æ²¡æœ‰ .dark */
body:not(.dark){
  background:#f3f4f6;
  color:#111827;
}
body:not(.dark) .topbar{
  background:#ffffff;
  border-bottom:1px solid rgba(17,24,39,.10);
}
body:not(.dark) .sidebar{
  background:#ffffff;
  border-right:1px solid #e5e7eb;
}

/* â€”â€” Amazon æ ¸ç®—ï¼šè¾“å…¥åŒºï¼ˆè®©â€œå¡ç‰‡æ„Ÿâ€æ›´ç»Ÿä¸€ï¼‰ â€”â€” */
body:not(.dark) .panel#amazon .hint{ color:#6b7280 !important; }
body:not(.dark) .panel#amazon h3{
  color:#111827 !important;
}
body:not(.dark) .panel#amazon label{
  background:#ffffff !important;
  border:1px solid #e5e7eb !important;
  border-radius:12px;
  padding:10px 10px;
}
body:not(.dark) .panel#amazon label > input,
body:not(.dark) .panel#amazon label > select{
  background:#ffffff !important;
  border:1px solid #d1d5db !important;
  color:#111827 !important;
}
body:not(.dark) .panel#amazon .rateRow label{
  background:#f9fafb !important;
  border-color:#e5e7eb !important;
}

/* â€”â€” FBA ä¸‰å—æ¨¡å¼ï¼šç™½å¤©å»æ‰â€œå¤œè§†ç»ç’ƒæ„Ÿâ€ï¼Œæ”¹ä¸ºæ¸…çˆ½å·¥å…·é£ â€”â€” */
body:not(.dark) .fbaModeBox{
  background:#ffffff !important;
  border:1px solid #e5e7eb !important;
  box-shadow:0 6px 16px rgba(17,24,39,.08) !important;
}
body:not(.dark) .fbaModeHint{
  color:#6b7280 !important;
  border:1px dashed #e5e7eb !important;
  background:#f9fafb !important;
}
body:not(.dark) .fbaModeBox.active{
  border-color:rgba(37,99,235,.35) !important;
  box-shadow:0 0 0 3px rgba(37,99,235,.12), 0 10px 22px rgba(17,24,39,.10) !important;
}
body:not(.dark) .fbaModeBox.active::before{
  content:none !important;
}
body:not(.dark) .fbaIc{
  background:rgba(37,99,235,.10) !important;
  border:1px solid rgba(37,99,235,.18) !important;
}

/* â€”â€” ç»“æœåŒºï¼šä»â€œå¤œè§†å¡ç‰‡â€æ”¹å›ç™½å¤©æ¸…çˆ½ç»“æœå¡ â€”â€” */
body:not(.dark) .amzResItem{
  border:1px solid #e5e7eb !important;
  background:#ffffff !important;
  box-shadow:0 10px 22px rgba(17,24,39,.08) !important;
}
body:not(.dark) .amzResItem::before{ content:none !important; }
body:not(.dark) .amzResK{ color:#6b7280 !important; }
body:not(.dark) .amzResV{ color:#111827 !important; }
body:not(.dark) .amzResUnit{ color:#9ca3af !important; }
body:not(.dark) .amzProfit.pos,
body:not(.dark) .amzMargin.pos,
body:not(.dark) .amzProfit.neg,
body:not(.dark) .amzMargin.neg{
  text-shadow:none !important;
}


/* =========================
   v1.2.60 â€” Aurora night text brightness boost
   Scope: text color ONLY (no layout / no JS)
========================= */
body.dark,
body[data-theme="dark"]{
  --aurora-text-1: #e5e7eb;  /* primary */
  --aurora-text-2: #cbd5e1;  /* secondary */
  --aurora-text-3: #94a3b8;  /* muted */
}

body.dark :where(p,span,div,li,label,input,textarea,select),
body[data-theme="dark"] :where(p,span,div,li,label,input,textarea,select){
  color: var(--aurora-text-1);
}

body.dark :where(small,.hint,.desc,.note,.sub),
body[data-theme="dark"] :where(small,.hint,.desc,.note,.sub){
  color: var(--aurora-text-2);
}

body.dark ::placeholder,
body[data-theme="dark"] ::placeholder{
  color: var(--aurora-text-3);
}


/* =========================
   v1.2.60 â€” é€‰å“å‰åˆ¤æ–­ï¼šå¯æ‰¿å—å¹¿å‘Š & ç»“è®ºï¼ˆè½»é‡ç‰ˆï¼‰
   ä»…æ–°å¢å±•ç¤ºä¸è®¡ç®—ï¼Œä¸å¢åŠ è¾“å…¥é¡¹ï¼Œä¸æ”¹äº¤äº’ç»“æ„
========================= */
.amzVerdict{ font-weight:700; letter-spacing:.5px; }
.amzVerdict.good{ color:#10b981; }  /* green */
.amzVerdict.warn{ color:#f59e0b; }  /* amber */
.amzVerdict.bad{  color:#ef4444; }  /* red */
.amzMaxAd{ font-weight:600; }


/* =========================
   v1.2.60 â€” æ ¸ç®—è¾“å…¥æé†’ï¼ˆé»˜è®¤å€¼æç¤º + å¿…å¡«ç¼ºå¤±çº¢ç‚¹ï¼‰
   ä»…æç¤ºï¼Œä¸æ”¹å¸ƒå±€ã€ä¸æ”¹äº¤äº’ã€ä¸æ”¹æ ¸å¿ƒè®¡ç®—é€»è¾‘
========================= */
.field-badge{
  display:inline-flex;
  align-items:center;
  gap:6px;
  margin-left:6px;
  padding:2px 8px;
  border-radius:999px;
  font-size:12px;
  line-height:1;
  border:1px solid transparent;
  vertical-align:middle;
  user-select:none;
}
.field-badge.default{
  background:rgba(245,158,11,.12);
  border-color:rgba(245,158,11,.28);
}
.field-badge.required{
  background:rgba(239,68,68,.12);
  border-color:rgba(239,68,68,.28);
}
/* red dot on label when required missing */
label.req-missing-label{
  position:relative;
}
label.req-missing-label::after{
  content:'';
  position:absolute;
  top:6px;
  right:8px;
  width:8px;
  height:8px;
  border-radius:50%;
  background:rgba(239,68,68,.95);
  box-shadow:0 0 0 2px rgba(239,68,68,.15);
}
/* input border highlight for missing required */
input.req-missing, select.req-missing, textarea.req-missing{
  border-color:rgba(239,68,68,.85) !important;
  box-shadow:0 0 0 3px rgba(239,68,68,.12) !important;
}
/* subtle highlight when still default (not error) */
input.is-default{
  border-color:rgba(245,158,11,.55) !important;
}


/* =========================
   v1.2.60 â€” è¾“å…¥çŠ¶æ€ç‚¹ï¼ˆçº¢/é»„/ç»¿ï¼‰
   è§„åˆ™ï¼šçº¢=å¿…å¡«æœªå¡«ï¼›é»„=é»˜è®¤å€¼ï¼›ç»¿=éé»˜è®¤å·²å¡«ï¼›å¯ä¸å¡«=ä¸æ˜¾ç¤º
========================= */
.field-badge{ display:none !important; } /* hide v1.2.37 badges */
label.req-missing-label::after{ display:none !important; } /* disable old red-dot */

.stateLegend{
  display:flex;
  align-items:center;
  gap:10px;
  padding:8px 10px;
  margin:8px 0 14px;
  border-radius:12px;
  border:1px solid rgba(148,163,184,.25);
  background:rgba(148,163,184,.06);
  font-size:12px;
}
.stateLegend .lg{ color:inherit; opacity:.85; margin-right:2px; }
.stateLegend .dot{
  width:10px;height:10px;border-radius:50%;
  display:inline-block;
  box-shadow:0 0 0 2px rgba(255,255,255,.04);
}
.stateLegend .dot.red{ background:rgba(239,68,68,.95); }
.stateLegend .dot.yellow{ background:rgba(245,158,11,.95); }
.stateLegend .dot.green{ background:rgba(16,185,129,.95); }

label.st-dot{ position:relative; }
label.st-dot::after{
  content:'';
  position:absolute;
  top:6px;
  right:8px;
  width:9px;
  height:9px;
  border-radius:50%;
  background:transparent;
  box-shadow:0 0 0 2px rgba(0,0,0,.08);
}
label.st-red::after{ background:rgba(239,68,68,.95); }
label.st-yellow::after{ background:rgba(245,158,11,.95); }
label.st-green::after{ background:rgba(16,185,129,.95); }

/* optional: subtle input outline when missing required */
input.req-missing, select.req-missing, textarea.req-missing{
  border-color:rgba(239,68,68,.85) !important;
  box-shadow:0 0 0 3px rgba(239,68,68,.12) !important;
}


/* v1.2.60 â€” header right legend placement */
.headAmazon{ display:flex; align-items:center; justify-content:space-between; gap:10px; }
.headAmazon .headRight{ display:flex; align-items:center; gap:10px; }
.stateLegendTop{
  margin:0;
  padding:6px 10px;
  border-radius:999px;
  white-space:nowrap;
}
.stateLegendTop .lg{ margin-right:6px; }
@media (max-width: 720px){
  .stateLegendTop{ display:none; } /* mobile: keep clean */
}

/* v1.2.60 â€” reliable label dot (real element, not ::after) */
label.st-dot{ position:relative; }
label .stDotSpan{
  position:absolute;
  top:6px;
  right:8px;
  width:9px;
  height:9px;
  border-radius:50%;
  display:inline-block;
  box-shadow:0 0 0 2px rgba(0,0,0,.08);
}
label .stDotSpan.red{ background:rgba(239,68,68,.95); }
label .stDotSpan.yellow{ background:rgba(245,158,11,.95); }
label .stDotSpan.green{ background:rgba(16,185,129,.95); }

/* disable old pseudo dot styles */
/* =========================
   v1.2.60 â€” State dots visibility & spacing fix
========================= */
label{ position:relative; }
label .stDotSpan{
  position:absolute;
  top:4px;
  right:-6px;           /* pull slightly outside label text */
  width:8px;
  height:8px;
  border-radius:50%;
  display:inline-block;
  z-index:5;
}
label .stDotSpan.red{ background:#ef4444; }
label .stDotSpan.yellow{ background:#f59e0b; }
label .stDotSpan.green{ background:#10b981; }

/* header spacing */
.headAmazon .headRight{
  gap:16px;             /* separate legend and button */
}
.stateLegendTop{
  padding:6px 12px;
}


/* =========================
   v1.2.60 â€” çŠ¶æ€ç‚¹ä¿®å¤ï¼ˆæ¢å¤å¯è§ï¼‰+ é¡¶éƒ¨ä½ç½®å¾®è°ƒ + æ¸…ç©ºæŒ‰é’®ç¾åŒ–
========================= */

/* (A) Working dots via ::after (matches current JS class logic) */
label{ position:relative; }
label.st-dot::after{
  content:'';
  position:absolute;
  top:4px;
  right:6px;           /* inside label, avoid being clipped */
  width:9px;
  height:9px;
  border-radius:50%;
  display:inline-block;
  z-index:6;
  box-shadow:0 0 0 2px rgba(0,0,0,.10);
}
label.st-red::after{ background:#ef4444; }
label.st-yellow::after{ background:#f59e0b; }
label.st-green::after{ background:#10b981; }

/* ensure we do NOT hide the dot */
label.st-dot::after{ visibility:visible !important; opacity:1 !important; }

/* (B) Legend move slightly toward center & improve spacing */
.headAmazon{ position:relative; }
.headAmazon .headRight{ gap:18px; padding-right:10px; }
.stateLegendTop{
  margin-right:18px;           /* pull away from the far-right */
}

/* (C) Clear button polish */
#clearAmazon.btn{
  border-radius:12px;
  padding:8px 12px;
  border:1px solid rgba(148,163,184,.35);
  background:rgba(148,163,184,.08);
  transition:transform .08s ease, background .15s ease, border-color .15s ease;
}
#clearAmazon.btn:hover{
  background:rgba(148,163,184,.14);
  border-color:rgba(148,163,184,.55);
}
#clearAmazon.btn:active{
  transform:scale(.98);
}


/* =========================
   v1.2.60 â€” å¿…å¡«çº¢ç‚¹ä¿®å¤ + FBAå¡ç‰‡å¤–å±‚çº¢ç‚¹ï¼ˆå³ä¸Šè§’ï¼‰
========================= */

/* å¼ºåˆ¶ label çº¢/é»„/ç»¿ç‚¹å¯è§ï¼ˆè¦†ç›–ä»»ä½•åç»­æ ·å¼ï¼‰ */
label.st-dot{ position:relative !important; }
label.st-dot::after{
  content:'' !important;
  position:absolute !important;
  top:4px !important;
  right:6px !important;
  width:9px !important;
  height:9px !important;
  border-radius:50% !important;
  display:inline-block !important;
  z-index:999 !important;
  opacity:1 !important;
  visibility:visible !important;
  box-shadow:0 0 0 2px rgba(0,0,0,.12) !important;
}
label.st-red::after{ background:#ef4444 !important; }
label.st-yellow::after{ background:#f59e0b !important; }
label.st-green::after{ background:#10b981 !important; }

/* FBA å¤–å±‚å¡ç‰‡ç‚¹ï¼ˆæ”¾åœ¨çŸ©å½¢èƒŒæ™¯å³ä¸Šè§’ï¼‰ */
.fbaModeBox{ position:relative; }
.fbaModeBox.st-dot::after{
  content:'';
  position:absolute;
  top:8px;
  right:10px;
  width:10px;
  height:10px;
  border-radius:50%;
  z-index:999;
  box-shadow:0 0 0 2px rgba(0,0,0,.12);
}
.fbaModeBox.st-red::after{ background:#ef4444; }
.fbaModeBox.st-yellow::after{ background:#f59e0b; }
.fbaModeBox.st-green::after{ background:#10b981; }


/* =========================
   v1.2.60 â€” æ¸…ç©ºæŒ‰é’®å¤œé—´å¯è§æ€§ä¼˜åŒ– + FBAä»…ä¿ç•™å¤–åœˆç‚¹
========================= */

/* FBAï¼šä»…ä¿ç•™å¡ç‰‡å³ä¸Šè§’ç‚¹ï¼Œéšè—å¡ç‰‡å†…éƒ¨ label ç‚¹ */
#fbaRow #fbaRow label.st-red::after,
#fbaRow label.st-yellow::after,
#fbaRow label.st-green::after{ display:none !important; }

/* Clear button: clean, tool-like, visible in both themes */
#clearAmazon.btn{
  border-radius:12px;
  padding:8px 12px;
  font-weight:600;
  border:1px solid rgba(148,163,184,.35);
  background:rgba(148,163,184,.10);
  color:inherit;
  transition:transform .08s ease, background .15s ease, border-color .15s ease, box-shadow .15s ease;
}
#clearAmazon.btn:hover{
  background:rgba(148,163,184,.16);
  border-color:rgba(148,163,184,.55);
}
#clearAmazon.btn:active{ transform:scale(.98); }

/* Night mode explicit boost (Aurora) */
body.dark #clearAmazon.btn,
body[data-theme="dark"] #clearAmazon.btn{
  border-color:rgba(226,232,240,.35);
  background:rgba(226,232,240,.10);
  color:rgba(240,244,255,.92);
  box-shadow:0 6px 18px rgba(0,0,0,.28);
}
body.dark #clearAmazon.btn:hover,
body[data-theme="dark"] #clearAmazon.btn:hover{
  background:rgba(226,232,240,.16);
  border-color:rgba(226,232,240,.55);
}


/* =========================
   v1.2.60 â€” ç‚¹ä½ç½®ä¿®æ­£ï¼ˆä¸è½åœ¨è¾“å…¥æ¡†ä¸Šï¼‰+ 0/è´Ÿæ•°çº¢ç‚¹è§„åˆ™
========================= */

/* label dot: place slightly OUTSIDE the label block (top-right), so it won't look like an input dot */
label.st-dot{ position:relative !important; }
label.st-dot::after{
  right:-8px !important;
  top:2px !important;
}

/* ensure label doesn't clip the dot */
label{ overflow:visible !important; }


/* =========================
   v1.2.60 â€” éFBAè¾“å…¥æ¡†çŠ¶æ€ç‚¹ä½ç½®ä¿®æ­£ï¼ˆå›åˆ°çŸ©å½¢å†…ï¼‰
   ç›®æ ‡ï¼šç‚¹åœ¨labelå³ä¸Šè§’å†…ä¾§ï¼Œä¸è·‘åˆ°å¡ç‰‡å¤–ï¼Œä¸å‹åˆ°è¾“å…¥æ¡†
========================= */
#amazon label.st-dot{ padding-right:14px; } /* reserve room for dot */
#amazon label.st-dot::after{
  right:6px !important;   /* inside label */
  top:6px !important;
}
/* keep it visually away from input box by placing near the label text line */
#amazon label.st-dot{ align-items:flex-start; }


/* =========================
   v1.2.60 â€” VATåˆ†åŒº + FBAå¡ç‰‡è®¡ç®—å±•ç¤ºï¼ˆä»…æ˜¾ç¤ºï¼Œä¸æ”¹äº¤äº’ï¼‰
========================= */
.fbaCalcLine{
  margin-top:6px;
  font-size:12px;
  opacity:.9;
}
#vatRegion{
  width:100%;
}


/* =========================
   v1.2.60 â€” FBAå¡ç‰‡å³ä¾§é‡‘é¢å±•ç¤ºï¼ˆæ›´æ¸…æ™°ï¼‰
========================= */
.fbaModeTop{
  display:flex;
  align-items:center;
  gap:8px;
}
.fbaAmtShow{
  margin-left:auto;
  font-size:16px;
  font-weight:800;
  letter-spacing:.2px;
  opacity:.95;
}


/* =========================
   v1.2.60 â€” FBA ç»“æœæ”¾åˆ°è¾“å…¥æ¡†å³ä¾§ï¼ˆæ›´æ¸…æ™°ï¼‰
========================= */
.fbaLine, .fbaAutoWrap{
  display:flex;
  align-items:flex-start;
  gap:10px;
}
.fbaLineLabel{
  flex: 0 0 62%;
}
.fbaLineLabel input{
  width:100%;
}
.fbaLineResult{
  flex: 1 1 auto;
  text-align:right;
  font-size:18px;
  font-weight:900;
  line-height: 1.2;
  padding-top: 18px; /* align with input baseline visually */
  opacity:.95;
}
.fbaAutoWrap .fbaInputs{
  flex: 0 0 62%;
}
.fbaAutoWrap .fbaLineResult{
  padding-top: 6px;
}


/* =========================
   v1.2.60 â€” çŠ¶æ€ç‚¹æ¢å¤ï¼ˆçº¢/é»„/ç»¿ï¼‰+ FBAä¸‰å¡å³ä¾§é‡‘é¢å±•ç¤º
========================= */
#amazon label.st-dot{ position:relative; padding-right:14px; overflow:visible; }
#amazon label.st-dot::after{
  content:'';
  position:absolute;
  top:6px;
  right:6px;
  width:9px;
  height:9px;
  border-radius:50%;
  display:inline-block;
  z-index:9;
  box-shadow:0 0 0 2px rgba(0,0,0,.10);
}
#amazon label.st-red::after{ background:#ef4444; }
#amazon label.st-yellow::after{ background:#f59e0b; }
#amazon label.st-green::after{ background:#10b981; }

/* FBA outer card dot (keep) */
#amazon .fbaModeBox{ position:relative; }
#amazon .fbaModeBox.st-dot::after{
  content:'';
  position:absolute;
  top:8px;
  right:10px;
  width:10px;
  height:10px;
  border-radius:50%;
  z-index:10;
  box-shadow:0 0 0 2px rgba(0,0,0,.10);
}
#amazon .fbaModeBox.st-red::after{ background:#ef4444; }
#amazon .fbaModeBox.st-yellow::after{ background:#f59e0b; }
#amazon .fbaModeBox.st-green::after{ background:#10b981; }

/* FBA input-left / result-right layout */
#amazon .fbaLine, #amazon .fbaAutoWrap{
  display:flex;
  align-items:flex-start;
  gap:10px;
}
#amazon .fbaLineLabel{ flex: 0 0 62%; }
#amazon .fbaLineLabel input{ width:100%; }
#amazon .fbaLineResult{
  flex: 1 1 auto;
  text-align:right;
  font-size:18px;
  font-weight:900;
  line-height:1.2;
  padding-top:18px;
  opacity:.95;
}
#amazon .fbaAutoWrap .fbaInputs{ flex: 0 0 62%; }
#amazon .fbaAutoWrap .fbaLineResult{ padding-top:6px; }


/* =========================
   v1.2.60 â€” FBAå›ºå®šé‡‘é¢å³ä¾§æ˜¾ç¤º + è®¡è´¹é‡ä¸¤è¾“å…¥å¹¶æ’
========================= */
#amazon .fbaAutoWrap .fbaInputs{
  display:flex;
  gap:10px;
}
#amazon .fbaAutoWrap .fbaInputs label{
  flex:1 1 0;
  margin:0;
}


/* =========================
   v1.2.60 â€” å›ºå®šé‡‘é¢æ ‡é¢˜ä¸æ¢è¡Œï¼ˆä¿®å¤å 3è¡Œï¼‰
========================= */
#amazon .fbaLineLabel{
  display:flex;
  flex-direction:column;
  gap:6px;
}
#amazon .fbaLineTitle{
  display:block;
  white-space:nowrap;
  line-height:1.1;
}


/* =========================
   v1.2.60 â€” å¤œé—´æ¨¡å¼ä¸‹æ‹‰æ¡†é€‰é¡¹å¯è¯»æ€§ä¿®å¤
   ä»…æ ·å¼ï¼šæå‡ select / option çš„å‰æ™¯/èƒŒæ™¯å¯¹æ¯”åº¦
========================= */

/* Dark theme selectors (support both body.dark and data-theme) */
body.dark select,
body[data-theme="dark"] select{
  color: rgba(240,244,255,.92);
  background: rgba(15,23,42,.55);
  border-color: rgba(226,232,240,.20);
}

/* Options list background/foreground (works in most Chromium/Edge/Firefox; Safari varies) */
body.dark select option,
body[data-theme="dark"] select option{
  color: rgba(240,244,255,.94);
  background: rgba(2,6,23,.95);
}

/* Hover/selected states (browser support varies; safe defaults) */
body.dark select option:checked,
body[data-theme="dark"] select option:checked{
  background: rgba(59,130,246,.35);
  color: rgba(240,244,255,.96);
}

/* Focus ring for dark */
body.dark select:focus,
body[data-theme="dark"] select:focus{
  outline: none;
  box-shadow: 0 0 0 3px rgba(59,130,246,.25);
}


/* =========================
   v1.2.60 â€” æœ€æ–°æ±‡ç‡æ›´æ–°æç¤º
========================= */
.fx-updated{
  margin-right:6px;
  padding:2px 6px;
  border-radius:999px;
  font-size:12px;
  font-weight:600;
  background:rgba(16,185,129,.15);
  color:#10b981;
}
body.dark .fx-updated,
body[data-theme="dark"] .fx-updated{
  background:rgba(16,185,129,.18);
  color:#34d399;
}


/* v1.2.60: badge layout for check */
.fx-updated{ display:inline-flex; align-items:center; gap:4px; }

</style>
</head>

<body>
<div class="page">
<!-- =========================
     [HTML:TOPBAR]
========================= -->
<header class="topbar">
  <div class="topBrand">
    <div class="topTitle">è¿è¥å·¥å…·ç®±</div>
    <div class="topSub">å•ä½æ¢ç®— Â· å­—ç¬¦å¤„ç† Â· Listing ç¿»è¯‘ Â· äºšé©¬é€Šæ ¸ç®—</div>
  </div>
  <div class="topActions">
    <button class="themeBtn" id="themeToggle" type="button" aria-label="åˆ‡æ¢å¤œè§†æ¨¡å¼">
      <span class="ic sun">â˜€</span><span class="ic moon">ğŸŒ™</span><span class="txt">å¤œè§†</span>
    </button>
  </div>
  <div class="topMeta">
    <span class="topVer">v<span class="topVerNum">1.2.27</span></span>
  </div>
</header>
<!-- =====================================================================================
  Amazon è¿è¥å·¥å…·ç®±ï¼ˆå•æ–‡ä»¶ï¼‰
  ç‰ˆæœ¬ï¼šv1.0.32
  ç»“æ„é”šç‚¹ï¼š
    [APP:VERSION] ç‰ˆæœ¬ä¿¡æ¯
    [UI:LAYOUT]   é¡µé¢ç»“æ„
    [UI:STYLE]    CSS æ ·å¼
    [NAV]         å·¦ä¾§å¯¼èˆª
    [PANEL:UNIT]  å•ä½æ¢ç®—
    [PANEL:COUNT] å­—ç¬¦å¤„ç†
    [PANEL:TRAN]  ç¿»è¯‘
    [PANEL:AMZ]   äºšé©¬é€Šæ ¸ç®—
    [UTIL]        é€šç”¨å‡½æ•°
    [BOOT]        åˆå§‹åŒ–å…¥å£
===================================================================================== -->
<div class="app">

  <!-- [HTML:BACKDROP] Mobile sidebar backdrop -->
  <div class="backdrop" id="backdrop"></div>

  <!-- =========================
       [HTML:SIDEBAR]
  ========================= -->
  <aside class="sidebar">
    <div class="brand">
      <div class="t">è¿è¥å·¥å…·ç®±</div>
      <div class="s">å•ä½æ¢ç®— Â· å­—ç¬¦å¤„ç† Â· Listing ç¿»è¯‘ Â· äºšé©¬é€Šæ ¸ç®—</div>
    </div>

    <div class="nav">
      <!-- [PANEL:UNIT] -->
<button data-panel="unit" class="active"><span class="btn-ic">ğŸ“</span><span class="btn-txt">å•ä½æ¢ç®—</span></button>
      <!-- [PANEL:COUNT] -->
<button data-panel="count"><span class="btn-ic">ğŸ”¤</span><span class="btn-txt">å­—ç¬¦å¤„ç†</span></button>
      <!-- [PANEL:TRAN] -->
<button data-panel="translate"><span class="btn-ic">ğŸŒ</span><span class="btn-txt">ç¿»è¯‘</span></button>
      <!-- [PANEL:AMZ] -->
<button data-panel="amazon"><span class="btn-ic">ğŸ§®</span><span class="btn-txt">äºšé©¬é€Šæ ¸ç®—</span></button>
    </div>

    <div class="footer"><span>ç‰ˆæœ¬</span><b id="verText">1.2.60</b></div>
  </aside>

  <main class="content">

    <!-- =========================
         [HTML:MOBILE_BAR]ï¼ˆ<=720px æ˜¾ç¤ºï¼‰
    ========================= -->
    <div class="mbar">
      <button class="iconBtn" id="btnMenu" aria-label="æ‰“å¼€èœå•">â˜°</button>
      <div class="mtitle">è¿è¥å·¥å…·ç®±</div>
      <div class="mver">v<span id="verTextM">1.2.60</span></div>
      <button class="iconBtn themeIcon" id="themeToggleM" aria-label="åˆ‡æ¢å¤œè§†æ¨¡å¼">ğŸŒ™</button>
    </div>

    <!-- =========================
         [HTML:PANEL_UNIT]
    ========================= -->
    <section id="unit" class="panel active">
      <div class="head"><h2>å•ä½æ¢ç®—</h2><button class="btn" id="clearUnit">æ¸…ç©º</button></div>
      <div class="cards">
        <div class="card">
          <div class="cardTitle"><h3 style="margin:0">é•¿åº¦æ¢ç®—</h3><span class="badge">é»˜è®¤ï¼šcm â†’ inch</span></div>
          <div class="row">
            <input id="lenVal" type="number" placeholder="è¾“å…¥æ•°å€¼" />
            <select id="lenFrom" class="sel">
              <option value="cm" selected>å˜ç±³ (cm)</option><option value="m">ç±³ (m)</option><option value="mm">æ¯«ç±³ (mm)</option><option value="inch">è‹±å¯¸ (inch)</option><option value="ft">è‹±å°º (ft)</option>
            </select>
            <span class="swap" id="swapLen">â‡„</span>
            <select id="lenTo" class="sel">
              <option value="inch" selected>è‹±å¯¸ (inch)</option><option value="cm">å˜ç±³ (cm)</option><option value="m">ç±³ (m)</option><option value="mm">æ¯«ç±³ (mm)</option><option value="ft">è‹±å°º (ft)</option>
            </select>
          </div>
          <div id="lenOut" class="result">ç»“æœï¼š</div>
        </div>

        <div class="card">
          <div class="cardTitle"><h3 style="margin:0">é‡é‡æ¢ç®—</h3><span class="badge">é»˜è®¤ï¼šg â†’ oz</span></div>
          <div class="row">
            <input id="wtVal" type="number" placeholder="è¾“å…¥æ•°å€¼" />
            <select id="wtFrom" class="sel">
              <option value="g" selected>å…‹ (g)</option><option value="kg">åƒå…‹ (kg)</option><option value="lb">ç£… (lb)</option><option value="oz">ç›å¸ (oz)</option>
            </select>
            <span class="swap" id="swapWt">â‡„</span>
            <select id="wtTo" class="sel">
              <option value="oz" selected>ç›å¸ (oz)</option><option value="g">å…‹ (g)</option><option value="kg">åƒå…‹ (kg)</option><option value="lb">ç£… (lb)</option>
            </select>
          </div>
          <div id="wtOut" class="result">ç»“æœï¼š</div>
        </div>

        <div class="card">
          <div class="cardTitle"><h3 style="margin:0">å¸ç§æ¢ç®—</h3><span class="badge">é»˜è®¤ï¼šUSD â†’ CNY</span></div>
          <div class="row">
            <input id="fxVal" type="number" placeholder="è¾“å…¥é‡‘é¢" />
            <select id="fxFrom" class="sel"><option value="$" selected>$ USD</option><option value="Â¥">Â¥ CNY</option><option value="â‚¬">â‚¬ EUR</option><option value="Â£">Â£ GBP</option></select>
            <span class="swap" id="swapFx">â‡„</span>
            <select id="fxTo" class="sel"><option value="Â¥" selected>Â¥ CNY</option><option value="$">$ USD</option><option value="â‚¬">â‚¬ EUR</option><option value="Â£">Â£ GBP</option></select>
            <button class="btn" id="btnFx">è·å–æœ€æ–°æ±‡ç‡</button>
          </div>
          <div id="fxOut" class="result">ç»“æœï¼š</div>
          <div class="hint">å½“å‰æ±‡ç‡ï¼š1 USD=<span id="rUsd">7.2000</span> CNYï¼›1 EUR=<span id="rEur">7.9000</span> CNYï¼›1 GBP=<span id="rGbp">9.1000</span> CNYï¼ˆä¸æ ¸ç®—å…±äº«ï¼‰</div>
          <div class="hint" id="fxStatus"></div>
        </div>
      </div>
    </section>

    <!-- =========================
         [HTML:PANEL_COUNT]
    ========================= -->
    <section id="count" class="panel">
      <div class="head"><h2>å­—ç¬¦å¤„ç†</h2><button class="btn" id="clearCount">æ¸…ç©º</button></div>

      <div class="split">
        <div class="box">
          <div class="boxHead">
            <h3>å­—ç¬¦æ•°é‡ç»Ÿè®¡ & é£é™©è¯æç¤º</h3>
            <span class="badge">çº¢çº¿ï¼š200 / 250 / 1000</span>
          </div>
          <div id="textInputCE" class="ceInput" contenteditable="true" data-placeholder="ç²˜è´´æˆ–è¾“å…¥éœ€è¦ç»Ÿè®¡çš„æ–‡æœ¬â€¦"></div>
<textarea id="textInput" style="display:none"></textarea>
<div class="row" style="margin-top:10px">
            <span class="pill" id="p200">Title 200</span>
            <span class="pill" id="p250">Bullet 250</span>
            <span class="pill" id="p1000">Description 1000</span>
          </div>

          <div class="stats">
            <div class="stat"><div class="k">æ€»å­—ç¬¦æ•°</div><div class="v" id="cTotal">0</div></div>
            <div class="stat"><div class="k">ä¸å«ç©ºæ ¼</div><div class="v" id="cNoSp">0</div></div>
            <div class="stat"><div class="k">è‹±æ–‡å­—ç¬¦</div><div class="v" id="cEn">0</div></div>
            <div class="stat"><div class="k">ä¸­æ–‡å­—ç¬¦</div><div class="v" id="cZh">0</div></div>
            <div class="stat"><div class="k">æ•°å­—</div><div class="v" id="cNum">0</div></div>
          </div>
          <div class="hint" id="riskHint" style="display:none" style="margin-top:10px;display:none"></div>
          <div class="muted" style="margin-top:8px">è¯´æ˜ï¼šçº¢çº¿æŒ‰â€œæ€»å­—ç¬¦æ•°â€åˆ¤æ–­ã€‚</div>
        </div>

        <div class="box">
          <div class="boxHead">
            <h3>äºšé©¬é€Šæ ‡é¢˜ï¼šTitle Caseï¼ˆB è§„åˆ™ï¼‰</h3>
            <span class="badge">ä¸€é”®è§„èŒƒæ ‡é¢˜</span>
          </div>
          <div class="row" style="align-items:flex-start">
            <textarea id="titleIn" placeholder="ç²˜è´´ä½ çš„è‹±æ–‡æ ‡é¢˜" style="flex:1;min-width:260px;height:110px"></textarea>
            <div style="display:flex;flex-direction:column;gap:8px">
              <button class="btn" id="btnTitle">ä¸€é”®å¤„ç†</button>
              <button class="btn" id="btnCopyTitle">å¤åˆ¶ç»“æœ</button>
            </div>
          </div>
          <textarea id="titleOut" placeholder="å¤„ç†åçš„æ ‡é¢˜" style="width:100%;height:90px;margin-top:10px" readonly></textarea>
          <div class="muted" style="margin-top:8px">å°è¯ï¼ˆa/an/the/and/or/of/to/in/forâ€¦ï¼‰é»˜è®¤ä¸å¤§å†™ï¼Œé™¤éåœ¨æ ‡é¢˜å¼€å¤´/ç»“å°¾ï¼›USB/LED/FBA ç­‰çŸ­ç¼©å†™ä¿æŒå…¨å¤§å†™ï¼›è¿å­—ç¬¦ - åˆ†æ®µå¤„ç†ã€‚</div>
        </div>
      </div>
    </section>

    <!-- =========================
         [HTML:PANEL_TRANSLATE]
    ========================= -->
    <section id="translate" class="panel">
      <div class="head"><h2>ç¿»è¯‘ï¼ˆä¸“ä¸º Listingï¼‰</h2></div>
      <div class="hint" style="margin-top:0">å¯é€‰ï¼šGoogle / ç™¾åº¦ / Chat ç¿»è¯‘ï¼ˆæ—  APIï¼Œé‡‡ç”¨ç½‘é¡µ/æç¤ºè¯æ–¹å¼ï¼‰ã€‚</div>

      <div class="row" style="margin-top:12px;justify-content:space-between">
        <div class="seg" id="tSeg">
          <button data-t="google" class="active">è°·æ­Œç¿»è¯‘</button>
          <button data-t="baidu">ç™¾åº¦ç¿»è¯‘</button>
          <button data-t="chat">Chat ç¿»è¯‘</button>
        </div>
        <div class="row">
          <span class="badge">é»˜è®¤ï¼šä¸­ â†’ è‹±</span>
          <select id="tDir" style="height:34px">
            <option value="zh-en" selected>ä¸­æ–‡ â†’ English</option>
            <option value="en-zh">English â†’ ä¸­æ–‡</option>
          </select>
        </div>
      </div>

      <div id="tp_google" class="tPane active">
        <div class="hint" style="margin:0 0 10px 0">å†…åµŒ Google ç¿»è¯‘ï¼ˆéƒ¨åˆ†ç½‘ç»œç¯å¢ƒå¯èƒ½åŠ è½½æ…¢ï¼‰ã€‚</div>
        <iframe id="gFrame" src="https://translate.google.com/?sl=zh-CN&tl=en&op=translate" loading="lazy"></iframe>
        <div style="margin-top:14px" class="row">
          <button class="primary" id="btnOpenG">æ–°çª—å£æ‰“å¼€ Google ç¿»è¯‘</button>
        </div>
      </div>

      <div id="tp_baidu" class="tPane">
        <div class="box" style="margin-top:0">
          <div class="boxHead"><h3>ç™¾åº¦ç¿»è¯‘ï¼ˆè·³è½¬ä½¿ç”¨ï¼‰</h3><span class="badge">å›½å†…æ›´ç¨³å®š</span></div>
          <div class="muted">è¯´æ˜ï¼šç™¾åº¦ç¿»è¯‘é¡µé¢é€šå¸¸ä¸å…è®¸è¢« iframe å†…åµŒï¼ˆä¼šè¢«æµè§ˆå™¨æ‹¦æˆªï¼‰ã€‚è¿™é‡Œæä¾›å¿«æ·è·³è½¬ã€‚</div>
          <div class="row" style="margin-top:10px">
            <button class="primary" id="btnOpenB">æ‰“å¼€ç™¾åº¦ç¿»è¯‘</button>
            <span class="muted">ï¼ˆä¼šåœ¨æ–°çª—å£æ‰“å¼€ï¼‰</span>
          </div>
        </div>
      </div>

      <div id="tp_chat" class="tPane">
        <div class="box" style="margin-top:0">
          <div class="boxHead"><h3>Chat ç¿»è¯‘ï¼ˆæç¤ºè¯ï¼‰</h3><span class="badge">æ›´è´´è¿‘ Listing è¯­æ°”</span></div>
          <div class="two">
            <div>
              <div class="muted" style="margin-bottom:6px">åŸæ–‡</div>
              <textarea id="chatSrc" placeholder="ç²˜è´´ä¸­æ–‡/è‹±æ–‡æ–‡æ¡ˆï¼ˆæ ‡é¢˜ã€äº”ç‚¹ã€æè¿°ç­‰ï¼‰" style="width:100%;height:170px"></textarea>
            </div>
            <div>
              <div class="muted" style="margin-bottom:6px">ç”Ÿæˆçš„ç¿»è¯‘æç¤ºè¯ï¼ˆå¯ç›´æ¥å¤åˆ¶åˆ° ChatGPTï¼‰</div>
              <textarea id="chatPrompt" class="mono" readonly style="width:100%;height:170px"></textarea>
            </div>
          </div>
          <div class="row" style="margin-top:10px">
            <button class="btn" id="btnGenPrompt">ç”Ÿæˆæç¤ºè¯</button>
            <button class="btn" id="btnCopyPrompt">å¤åˆ¶æç¤ºè¯</button>
            <button class="primary" id="btnOpenChat">æ‰“å¼€ ChatGPT</button>
          </div>
          <div class="muted" style="margin-top:8px">æç¤ºï¼šå¦‚æœä½ å¸Œæœ›æ›´â€œæœ¬åœ°åŒ–/æ›´å¼ºè½¬åŒ–â€ï¼Œæˆ‘ä¹Ÿå¯ä»¥å¸®ä½ æŠŠæç¤ºè¯åšæˆå¯é…ç½®æ¨¡æ¿ï¼ˆæ¯”å¦‚ï¼šç±»ç›®ã€å—ä¼—ã€ç¦è¯ã€é£æ ¼ï¼‰ã€‚</div>
        </div>
      </div>
    </section>

    <!-- =========================
         [HTML:PANEL_AMAZON]
    ========================= -->
    <section id="amazon" class="panel">
      <div class="head headAmazon"><h2>äºšé©¬é€Šæ ¸ç®—</h2><div class="headRight"><div class="stateLegend stateLegendTop">
        <span class="dot red"></span><span class="lg">å¿…å¡«æœªå¡«</span>
        <span class="dot yellow"></span><span class="lg">é»˜è®¤å€¼</span>
        <span class="dot green"></span><span class="lg">å·²å¡«(éé»˜è®¤)</span>
</div><button class="btn" id="clearAmazon">æ¸…ç©º</button></div></div>
      <div class="hint" style="margin-top:0">æŒ‰å•ä¸ªè®¢å•ä¼°ç®—ï¼šå”®ä»·ã€é‡‡è´­ä»·ã€å¤´ç¨‹ï¼ˆè®¡è´¹é‡ï¼‰ã€ä½£é‡‘ã€VATã€é€€è´§ã€å¹¿å‘Šã€FBAï¼ˆç®€åŒ–ï¼‰ã€‚</div>

      <h3>åŸºç¡€è¾“å…¥</h3>
<div class="row">
        <label>å”®ä»·å¸ç§<select id="sellCur"><option value="$" selected>$ USD</option><option value="â‚¬">â‚¬ EUR</option><option value="Â£">Â£ GBP</option><option value="Â¥">Â¥ CNY</option></select></label>
        <label>ç«å“å”®ä»·<input id="sellPrice" type="number" step="0.01" placeholder="29.99" /></label>
        <label>é‡‡è´­å¸ç§<select id="buyCur"><option value="Â¥" selected>Â¥ CNY</option><option value="$">$ USD</option><option value="â‚¬">â‚¬ EUR</option><option value="Â£">Â£ GBP</option></select></label>
        <label>é‡‡è´­ä»·<input id="buyCost" type="number" step="0.01" placeholder="8.50" /></label>
      </div>

      <div class="row rateRow">
        <label>1 USD=<input id="usdToCny" type="number" step="0.0001" value="7.2000" />CNY</label>
        <label>1 EUR=<input id="eurToCny" type="number" step="0.0001" value="7.9000" />CNY</label>
        <label>1 GBP=<input id="gbpToCny" type="number" step="0.0001" value="9.1000" />CNY</label>
      </div>
      <div class="hint"><span id="fxUpdatedBadge" class="fx-updated" style="display:none;">âœ“ å·²æ›´æ–°æœ€æ–°æ±‡ç‡ï¼ˆ<span id="fxUpdatedDate"></span>ï¼‰</span>æ±‡ç‡ä¸ã€Œå¸ç§æ¢ç®—ã€åŒæ­¥ï¼Œæ ¸ç®—ç»Ÿä¸€æŒ‰ CNYã€‚</div>

      <h3>é‡é‡ä¸å°ºå¯¸</h3>
      <div class="row">
        <label>å®é‡(kg)<input id="wtKg" type="number" step="0.001" placeholder="0.45" /></label>
        <label>é•¿(cm)<input id="lenCm" type="number" step="0.1" placeholder="25" /></label>
        <label>å®½(cm)<input id="widCm" type="number" step="0.1" placeholder="18" /></label>
        <label>é«˜(cm)<input id="heiCm" type="number" step="0.1" placeholder="6" /></label>
      </div>

      <h3>å¤´ç¨‹ï¼ˆæŒ‰è®¡è´¹é‡ï¼Œäººæ°‘å¸ï¼‰</h3>
      <div class="row">
        <label>ä½“ç§¯é‡ç³»æ•°<input id="volDiv" type="number" step="1" value="6000" /></label>
        <label>å•ä»·(æ¯kg,CNY)<input id="shipPerKg" type="number" step="0.01" value="10" /></label>
        <label>å›ºå®šå¤´ç¨‹(æ¯å•,CNY)<input id="shipFixed" type="number" step="0.01" value="0" /></label>
      </div>
      <div class="hint">ä½“ç§¯é‡(kg)=é•¿Ã—å®½Ã—é«˜Ã·ç³»æ•°ï¼›è®¡è´¹é‡=max(å®é‡,ä½“ç§¯é‡)ã€‚</div>

      <h3>å¹³å°ä¸é£é™©</h3>
      <div class="row">
        <label>ç±»ç›®ä½£é‡‘(%)<input id="refPct" type="number" step="0.01" value="15" /></label>
        <label>ç«™ç‚¹<select id="vatRegion"><option value="US">ç¾åŒº</option><option value="EU" selected>æ¬§åŒº</option></select></label>
        <label>VAT(%)<input id="vatPct" type="number" step="0.01" value="19" /></label>
        <label>é€€è´§ç‡(%)<input id="retRate" type="number" step="0.01" value="5" /></label>
        <label>å¹¿å‘Šå æ¯”(%)<input id="adPct" type="number" step="0.01" value="15" /></label>
      </div>

      <h3>FBAï¼ˆç®€åŒ–ï¼‰</h3>
      <div class="row fbaRow" id="fbaRow">
        <div class="fbaModeBox active" data-mode="amount">
          <div class="fbaModeTop"><span class="fbaIc">ğŸ’°</span><span class="fbaModeName">å›ºå®šé‡‘é¢</span></div>
          <div class="fbaLine"><label class="fbaLineLabel"><span class="fbaLineTitle">å›ºå®šé‡‘é¢ï¼ˆ<span id="fbaAmountUnit">$</span>ï¼‰</span><input id="fbaAmount" type="number" step="0.01" placeholder="0" /></label><div class="fbaLineResult"><span id="fbaAmountShow">â€”</span></div></div>
          <div class="fbaModeHint">è¾“å…¥å›ºå®š FBA é‡‘é¢ï¼›è¾“å…¥å³è‡ªåŠ¨é€‰ä¸­è¯¥æ¨¡å¼</div>
        </div>

        <div class="fbaModeBox" data-mode="percent">
          <div class="fbaModeTop"><span class="fbaIc">ï¼…</span><span class="fbaModeName">æŒ‰å”®ä»·%</span></div>
          <div class="fbaLine"><label class="fbaLineLabel">ç™¾åˆ†æ¯”(%)<input id="fbaPct" type="number" step="0.01" placeholder="0" /></label><div class="fbaLineResult"><span id="fbaPctAmt">â€”</span></div></div>
<div class="fbaModeHint">è¾“å…¥ç™¾åˆ†æ¯”ï¼ˆå¦‚ 12ï¼‰å³æŒ‰å”®ä»·æ¯”ä¾‹è®¡ç®—</div>
        </div>

        <div class="fbaModeBox" data-mode="auto">
          <div class="fbaModeTop"><span class="fbaIc">âš–ï¸</span><span class="fbaModeName">æŒ‰è®¡è´¹é‡</span></div>
          <div class="fbaAutoWrap"><div class="fbaInputs">
            <label>æ¯kgè´¹ç”¨(æŒ‰å”®ä»·å¸ç§)<input id="fbaPerKg" type="number" step="0.01" placeholder="0" /></label>
            <label>å›ºå®šFBA(æŒ‰å”®ä»·å¸ç§)<input id="fbaFixed" type="number" step="0.01" placeholder="0" /></label>
          </div><div class="fbaLineResult"><span id="fbaAutoAmt">â€”</span></div></div>
<div class="fbaModeHint">è¾“å…¥ä»»ä¸€é¡¹å³æŒ‰ã€Œè®¡è´¹é‡Ã—æ¯kg + å›ºå®šFBAã€è®¡ç®—</div>
        </div>
      </div>

      <h3>ç»“æœï¼ˆå®æ—¶ï¼‰</h3>
      <div class="amzResGrid">
        <div class="amzResItem">
          <div class="amzResK">è®¡è´¹é‡</div>
          <div class="amzResV"><span id="oChargeW">0</span><span class="amzResUnit">kg</span></div>
        </div>
        <div class="amzResItem"><div class="amzResK">å¤´ç¨‹</div><div class="amzResV"><span id="oShip">0</span></div></div>
        <div class="amzResItem"><div class="amzResK">ä½£é‡‘</div><div class="amzResV"><span id="oRef">0</span></div></div>
        <div class="amzResItem"><div class="amzResK">VAT</div><div class="amzResV"><span id="oVat">0</span></div></div>
        <div class="amzResItem"><div class="amzResK">å¹¿å‘Š</div><div class="amzResV"><span id="oAd">0</span></div></div>
        <div class="amzResItem"><div class="amzResK">FBA</div><div class="amzResV"><span id="oFba">0</span></div></div>

        <div class="amzResItem amzResItemBig">
          <div class="amzResK">åˆ©æ¶¦</div>
          <div class="amzResV"><span id="oProfit" class="amzProfit">0</span></div>
        </div>
        <div class="amzResItem amzResItemBig">
          <div class="amzResK">åˆ©æ¶¦ç‡</div>
          <div class="amzResV"><span id="oMargin" class="amzMargin">0%</span></div>
        </div>
        <div class="amzResItem">
          <div class="amzResK">å¯æ‰¿å—å¹¿å‘Š</div>
          <div class="amzResV"><span id="oMaxAdPct" class="amzMaxAd">0%</span></div>
        </div>
        <div class="amzResItem amzResItemBig">
          <div class="amzResK">ç»“è®º</div>
          <div class="amzResV"><span id="oAdVerdict" class="amzVerdict">-</span></div>
        </div>
      </div>
      <div class="hint" id="amazonNote"></div>
    </section>

  </main>
</div>

<script>/* [APP:CORE] v1.0.32 - é”šç‚¹æ•´ç†ï¼Œä¸æ”¹åŠŸèƒ½ */

(() => {
  'use strict';

  /* =========================
     [JS:CONFIG] ç‰ˆæœ¬ä¸å¸¸é‡
  ========================= */
  const metaVer = document.querySelector('meta[name="app-version"]');
  const APP_VERSION = metaVer?.content || 'dev';

  const Config = {
    version: APP_VERSION,
    fxStorageKey: 'toolbox_fx_rates_v2',
    lenRate: { m: 1, cm: 0.01, mm: 0.001, inch: 0.0254, ft: 0.3048 },
    wtRate: { kg: 1, g: 0.001, lb: 0.45359237, oz: 0.0283495 },
    smallWords: new Set(['a','an','the','and','or','but','nor','for','so','yet','as','at','by','in','of','on','to','up','via','per','from','into','over','with','without','vs','vs.']),
    limits: { title: 200, bullet: 250, desc: 1000 },
  };

  /* =========================
     [JS:HELPERS] å·¥å…·å‡½æ•°
  ========================= */
  const $ = (id) => document.getElementById(id);
  const num = (v) => {
    const x = parseFloat(v);
    return Number.isFinite(x) ? x : 0;
  };
  const fmt = (sym, v) => `${sym}${(Number.isFinite(v) ? v : 0).toFixed(2)}`;

  const isWhitespaceCode = (code) =>
    code === 9 || code === 10 || code === 11 || code === 12 || code === 13 || code === 32;

  const splitByWhitespace = (s) => {
    const out = [];
    let cur = '';
    for (let i = 0; i < s.length; i++) {
      const code = s.charCodeAt(i);
      if (isWhitespaceCode(code)) {
        if (cur) { out.push(cur); cur = ''; }
      } else {
        cur += s[i];
      }
    }
    if (cur) out.push(cur);
    return out;
  };


  /* =========================
     [JS:THEME] å¤œè§†æ·±è‰²ä¸»é¢˜ï¼ˆæ–¹æ¡ˆAï¼‰v1.2.26
     - A1 æ‰‹åŠ¨åˆ‡æ¢ï¼ˆæ—¥/å¤œæŒ‰é’®ï¼‰
     - é»˜è®¤ï¼šå¤œè§†å¼€å¯ï¼ˆæœ¬æ–‡ä»¶ä¸ºå¤œè§†ç‰ˆï¼‰
  ========================= */
  const Theme = {
    key: 'toolbox_theme_mode',
    mode: 'dark', // 'dark' | 'light'
    apply(mode) {
      Theme.mode = (mode === 'light') ? 'light' : 'dark';
      document.body.classList.toggle('dark', Theme.mode === 'dark');

      const btn = $('themeToggle');
      if (btn) btn.setAttribute('aria-label', Theme.mode === 'dark' ? 'åˆ‡æ¢åˆ°æ—¥é—´æ¨¡å¼' : 'åˆ‡æ¢åˆ°å¤œè§†æ¨¡å¼');

      const btnM = $('themeToggleM');
      if (btnM) btnM.textContent = Theme.mode === 'dark' ? 'â˜€' : 'ğŸŒ™';

      // é¡¶éƒ¨æŒ‰é’®æ–‡æ¡ˆ
      const txt = document.querySelector('#themeToggle .txt');
      if (txt) txt.textContent = Theme.mode === 'dark' ? 'å¤œè§†' : 'æ—¥é—´';
    },
    load() {
      try {
        const v = localStorage.getItem(Theme.key);
        if (v === 'light' || v === 'dark') return v;
      } catch {}
      return null;
    },
    save() {
      try { localStorage.setItem(Theme.key, Theme.mode); } catch {}
    },
    toggle() {
      Theme.apply(Theme.mode === 'dark' ? 'light' : 'dark');
      Theme.save();
    },
    init() {
      // æœ¬æ–‡ä»¶é»˜è®¤å¤œè§†ï¼›å¦‚ç”¨æˆ·ä¹‹å‰å­˜è¿‡åå¥½ï¼Œåˆ™ä»¥åå¥½ä¸ºå‡†
      const saved = Theme.load();
      Theme.apply(saved || 'dark');

      const btn = $('themeToggle');
      if (btn) btn.addEventListener('click', Theme.toggle);

      const btnM = $('themeToggleM');
      if (btnM) btnM.addEventListener('click', Theme.toggle);
    },
  };

  /* =========================
     [JS:FX] æ±‡ç‡æ¨¡å—ï¼ˆä¸æ ¸ç®—å…±äº«ï¼‰
  ========================= */
  const FX = {
    load() {
      try {
        const raw = localStorage.getItem(Config.fxStorageKey);
        if (!raw) return null;
        const o = JSON.parse(raw);
        const usd = Number(o.usd), eur = Number(o.eur), gbp = Number(o.gbp);
        if (!Number.isFinite(usd) || !Number.isFinite(eur) || !Number.isFinite(gbp)) return null;
        return { usd, eur, gbp, date: o.date || '' };
      } catch { return null; }
    },
    save(usd, eur, gbp, date) {
      try {
        localStorage.setItem(Config.fxStorageKey, JSON.stringify({ usd, eur, gbp, date, at: new Date().toISOString() }));
      } catch {}
    },
    rateToCny(sym) {
      if (sym === 'Â¥') return 1;
      if (sym === '$') return Math.max(0, num($('usdToCny')?.value));
      if (sym === 'â‚¬') return Math.max(0, num($('eurToCny')?.value));
      if (sym === 'Â£') return Math.max(0, num($('gbpToCny')?.value));
      return 0;
    },
    convert(amount, from, to) {
      const fr = FX.rateToCny(from);
      const tr = FX.rateToCny(to);
      if (fr <= 0 || tr <= 0) return 0;
      return (amount * fr) / tr;
    },
    syncHint() {
      $('rUsd').textContent = ($('usdToCny')?.value || '7.2000');
      $('rEur').textContent = ($('eurToCny')?.value || '7.9000');
      $('rGbp').textContent = ($('gbpToCny')?.value || '9.1000');
    },
    setStatus(msg, isErr) {
      $('fxStatus').textContent = msg || '';
      $('fxStatus').style.color = isErr ? '#b91c1c' : '#6b7280';
    },
    apply(usd, eur, gbp) {
      if ($('usdToCny')) $('usdToCny').value = Number(usd).toFixed(4);
      if ($('eurToCny')) $('eurToCny').value = Number(eur).toFixed(4);
      if ($('gbpToCny')) $('gbpToCny').value = Number(gbp).toFixed(4);
      FX.syncHint();
      Unit.updateFx();
      Amazon.update();
    },
    async fetchLatest(auto) {
      const last = FX.load();
      try {
        FX.setStatus(auto ? 'æ‰“å¼€é¡µé¢è‡ªåŠ¨è·å–æœ€æ–°æ±‡ç‡ä¸­â€¦' : 'æ­£åœ¨è·å–æœ€æ–°æ±‡ç‡â€¦', false);
        const [u, e, g] = await Promise.all([
          fetch('https://api.frankfurter.dev/v1/latest?base=USD&symbols=CNY').then(r => r.json()),
          fetch('https://api.frankfurter.dev/v1/latest?base=EUR&symbols=CNY').then(r => r.json()),
          fetch('https://api.frankfurter.dev/v1/latest?base=GBP&symbols=CNY').then(r => r.json()),
        ]);
        const usd = u && u.rates ? u.rates.CNY : undefined;
        const eur = e && e.rates ? e.rates.CNY : undefined;
        const gbp = g && g.rates ? g.rates.CNY : undefined;
        if (!Number.isFinite(usd) || !Number.isFinite(eur) || !Number.isFinite(gbp)) throw new Error('bad payload');
        FX.apply(usd, eur, gbp);
        FX.save(Number(usd), Number(eur), Number(gbp), u && u.date ? u.date : '');
        FX.setStatus(`âœ… å·²æ›´æ–°æœ€æ–°æ±‡ç‡ï¼ˆ${u && u.date ? u.date : 'æœªçŸ¥æ—¥æœŸ'}ï¼‰`, false);
      } catch {
        if (last) {
          FX.apply(last.usd, last.eur, last.gbp);
          FX.setStatus(`âš ï¸ è·å–å¤±è´¥ï¼Œå·²ä½¿ç”¨ä¸Šæ¬¡æ±‡ç‡${last.date ? `ï¼ˆ${last.date}ï¼‰` : ''}ã€‚`, true);
        } else {
          FX.setStatus('âš ï¸ è·å–å¤±è´¥ï¼Œå½“å‰ä½¿ç”¨é¡µé¢é»˜è®¤æ±‡ç‡ã€‚', true);
        }
      }
    },
  };

  /* =========================
     [JS:UNIT] å•ä½æ¢ç®—æ¨¡å—
  ========================= */
  const Unit = {
    swap(a, b, after) {
      const A = $(a), B = $(b);
      const tmp = A.value;
      A.value = B.value;
      B.value = tmp;
      after();
    },
    updateLen() {
      const v = parseFloat($('lenVal').value);
      if (!Number.isFinite(v)) { $('lenOut').textContent = 'ç»“æœï¼š'; return; }
      const a = $('lenFrom').value;
      const b = $('lenTo').value;
      $('lenOut').textContent = `ç»“æœï¼š${(v * Config.lenRate[a] / Config.lenRate[b]).toFixed(4)} ${b}`;
    },
    updateWt() {
      const v = parseFloat($('wtVal').value);
      if (!Number.isFinite(v)) { $('wtOut').textContent = 'ç»“æœï¼š'; return; }
      const a = $('wtFrom').value;
      const b = $('wtTo').value;
      $('wtOut').textContent = `ç»“æœï¼š${(v * Config.wtRate[a] / Config.wtRate[b]).toFixed(4)} ${b}`;
    },
    updateFx() {
      FX.syncHint();
      const v = parseFloat($('fxVal').value);
      if (!Number.isFinite(v)) { $('fxOut').textContent = 'ç»“æœï¼š'; return; }
      const from = $('fxFrom').value;
      const to = $('fxTo').value;
      $('fxOut').textContent = `ç»“æœï¼š${to}${FX.convert(v, from, to).toFixed(4)}`;
    },
    clear() {
      $('lenVal').value = '';
      $('wtVal').value = '';
      $('fxVal').value = '';
      $('lenFrom').value = 'cm';
      $('lenTo').value = 'inch';
      $('wtFrom').value = 'g';
      $('wtTo').value = 'oz';
      $('fxFrom').value = '$';
      $('fxTo').value = 'Â¥';
      Unit.updateLen();
      Unit.updateWt();
      Unit.updateFx();
    },
    init() {
      // v1.2.6 é£é™©è¯é«˜äº®å±‚æ»šåŠ¨åŒæ­¥
      const __ta = $('textInput');
      if(__ta){ __ta.addEventListener('scroll', ()=>{ if(Count.updateRiskHighlight) Count.updateRiskHighlight(__ta.value); }); }

      ['lenVal','lenFrom','lenTo'].forEach(id => $(id).addEventListener('input', Unit.updateLen));
      ['lenFrom','lenTo'].forEach(id => $(id).addEventListener('change', Unit.updateLen));
      $('swapLen').addEventListener('click', () => Unit.swap('lenFrom','lenTo', Unit.updateLen));

      ['wtVal','wtFrom','wtTo'].forEach(id => $(id).addEventListener('input', Unit.updateWt));
      ['wtFrom','wtTo'].forEach(id => $(id).addEventListener('change', Unit.updateWt));
      $('swapWt').addEventListener('click', () => Unit.swap('wtFrom','wtTo', Unit.updateWt));

      ['fxVal','fxFrom','fxTo','usdToCny','eurToCny','gbpToCny'].forEach(id =>
        $(id).addEventListener('input', () => { Unit.updateFx(); Amazon.update(); })
      );
      ['fxFrom','fxTo'].forEach(id => $(id).addEventListener('change', Unit.updateFx));
      $('swapFx').addEventListener('click', () => Unit.swap('fxFrom','fxTo', Unit.updateFx));
      $('btnFx').addEventListener('click', () => FX.fetchLatest(false));

      $('clearUnit').addEventListener('click', Unit.clear);

      Unit.updateLen();
      Unit.updateWt();
      Unit.updateFx();

// v1.2.19ï¼šcontenteditable è¾“å…¥æ¡†ï¼ˆå†…è”é«˜äº®é£é™©è¯ï¼‰
const ce = $('textInputCE');
const ta = $('textInput');
if (ce && ta){
  const onChange = ()=>{ Count.syncCEToTextareaAndHighlight(); Count.update(); };
  ce.addEventListener('input', onChange);
  ce.addEventListener('keyup', onChange);
  ce.addEventListener('click', ()=>{ /* ä»…åˆ·æ–°æç¤ºä¸æ”¹å†…å®¹ */ });
  // çº¯æ–‡æœ¬ç²˜è´´
  ce.addEventListener('paste', (e)=>{
    e.preventDefault();
    const text = (e.clipboardData || window.clipboardData).getData('text/plain');
    document.execCommand('insertText', false, text);
  });
  // åˆæ¬¡åŒæ­¥
  setTimeout(()=>{ Count.syncCEToTextareaAndHighlight(); Count.update(); }, 0);
}
    },
  };

  /* =========================
     [JS:COUNT] å­—ç¬¦å¤„ç†æ¨¡å—
  ========================= */
  const Count = {
    setPills(total) {
      $('p200').classList.toggle('over', total > Config.limits.title);
      $('p250').classList.toggle('over', total > Config.limits.bullet);
      $('p1000').classList.toggle('over', total > Config.limits.desc);
    },
    /* ---- åˆè§„/é«˜é£é™©è¯æç¤ºï¼ˆåµŒå…¥å­—ç¬¦æ•°é‡ç»Ÿè®¡ï¼‰ v1.2.3 ---- */
riskWords: [
      'best',
      'top',
      'top-rated',
      'no.1',
      '#1',
      'number one',
      'ultimate',
      'perfect',
      'flawless',
      'unbeatable',
      'premium',
      'highest quality',
      'superior',
      'better',
      'better than',
      'better than others',
      'most',
      'world\'s',
      'leading',
      'exclusive',
      'guarantee',
      'guaranteed',
      'warranty',
      'lifetime warranty',
      'money back',
      'refund',
      'risk free',
      'no risk',
      '100% satisfaction',
      'satisfaction guaranteed',
      'forever',
      'free',
      'bonus',
      'gift',
      'discount',
      'sale',
      'save big',
      'cheap',
      'lowest price',
      'limited time',
      'special offer',
      'deal',
      'official',
      'officially',
      'amazon',
      'prime',
      'amazon\'s choice',
      'amazons choice',
      'best seller',
      'bestseller',
      'cure',
      'treat',
      'heal',
      'prevent',
      'diagnose',
      'therapy',
      'therapeutic',
      'medical',
      'medical grade',
      'clinically proven',
      'clinically tested',
      'antibacterial',
      'antiviral',
      'kills bacteria',
      'kills viruses',
      'sterilize',
      'sterilises',
      'disinfect',
      'disinfectant',
      'pain relief',
      'anti-inflammatory',
      'relieve pain',
      'safe',
      'safety',
      'certified',
      'certificate',
      'approved',
      'fda',
      'ce',
      'rohs',
      'ul listed',
      'lab tested',
      'tested',
      'non-toxic',
      'toxin free',
      'bpa free',
      'lead free',
      'sex',
      'adult',
      'erotic',
      'drug',
      'cannabis',
      'thc',
      'cbd',
      'weapon',
      'gun',
      'competitor',
      'brand',
      'better than competitors',
      'beats'
    ],
findRisks(text) {
  const t = (text || '').toLowerCase();
  const hits = [];
  for (let i = 0; i < Count.riskWords.length; i++) {
    const w = Count.riskWords[i];
    if (!w) continue;
    if (t.includes(w)) hits.push(w);
  }
  // å»é‡
  return Array.from(new Set(hits));
},
updateRiskHint(text) {
  const box = $('riskHint');
  if (!box) return;
  const hits = Count.findRisks(text);
  if (!hits.length){
    box.style.display = 'none';
    box.textContent = '';
    return;
  }
  box.style.display = 'block';
  box.textContent = `âš ï¸ é«˜é£é™©è¯æç¤ºï¼šæ£€æµ‹åˆ° ${hits.slice(0,16).join(', ')}${hits.length>8?'â€¦':''}ï¼ˆä»…æç¤ºï¼Œä¸ä»£è¡¨ä¸€å®šè¿è§„ï¼‰`;
},

// v1.2.30 å…¼å®¹å…œåº•ï¼šæ—§å å±‚é«˜äº®å‡½æ•°åœ¨å½“å‰ç‰ˆæœ¬ä¸å†éœ€è¦ï¼Œä¿ç•™ç©ºå®ç°é¿å…è°ƒç”¨æ—¶æŠ¥é”™
updateRiskHighlight(text){ /* noop */ },

    update() {
      const t = $('textInput').value || '';
      const total = t.length;

      let noWs = 0;
      let en = 0;
      let zh = 0;
      let numCount = 0;

      for (let i = 0; i < t.length; i++) {
        const code = t.charCodeAt(i);
        if (!isWhitespaceCode(code)) noWs += 1;
        if ((code >= 65 && code <= 90) || (code >= 97 && code <= 122)) en += 1;
        if (code >= 48 && code <= 57) numCount += 1;
        const ch = t[i];
        if (ch >= 'ä¸€' && ch <= 'é¾¥') zh += 1;
      }

      $('cTotal').textContent = String(total);
      $('cNoSp').textContent = String(noWs);
      $('cEn').textContent = String(en);
      $('cZh').textContent = String(zh);
      $('cNum').textContent = String(numCount);

      Count.setPills(total);

      // v1.2.18 é£é™©è¯é¢„è§ˆï¼ˆå½“å‰å·²ä¸ä½¿ç”¨å å±‚é¢„è§ˆï¼›ä¿ç•™é’©å­ä»¥å…¼å®¹æ—§ç‰ˆæœ¬ï¼‰
      // if (typeof Count.updateRiskColor === 'function') Count.updateRiskColor(t);

      // v1.2.3 åˆè§„/é«˜é£é™©è¯æç¤ºï¼ˆåµŒå…¥æ•°é‡ç»Ÿè®¡ï¼‰
      Count.updateRiskHint(t);

      // å…¼å®¹ï¼šéƒ¨åˆ†ç¾åŒ–ç‰ˆç§»é™¤äº†æ—§çš„ risk highlight layerï¼Œè¿™é‡Œåšé˜²å¾¡å¼è°ƒç”¨ï¼Œé¿å…è„šæœ¬ä¸­æ–­
      if (typeof Count.updateRiskHighlight === 'function') Count.updateRiskHighlight(t);
},


updateRiskColor(text){
  var box = $('riskColorPreview');
  if(!box) return;
  var raw = (text||'').toString();
  if(!raw){
    box.style.display='none';
    box.innerHTML='';
    return;
  }
  var safe = raw.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
  var words = (Count.riskWords||[]).filter(Boolean).map(function(w){return w.toString();})
    .sort(function(a,b){return b.length-a.length;});
  if(!words.length){
    box.style.display='none'; box.innerHTML=''; return;
  }
  var esc = function(s){return s.replace(/[.*+?^${}()|[\]\\]/g,'\\$&');};
  var re2 = new RegExp('(' + words.map(esc).join('|') + ')','gi');
  var html = safe.replace(re2, '<span class="riskColor">$1</span>');
  if (html === safe){
    box.style.display='none';
    box.innerHTML='';
    return;
  }
  box.style.display='block';
  box.innerHTML = 'é£é™©è¯é¢„è§ˆï¼ˆé»„è‰²åŠ ç²—ï¼‰ï¼š\n' + html;
},

/* ---- v1.2.19ï¼šcontenteditable è¾“å…¥æ¡†å†…è”é«˜äº®é£é™©è¯ ---- */
_ceUpdating: false,
getCEText(){
  const ce = $('textInputCE');
  return ce ? (ce.innerText || '').replace(/\u00A0/g,' ') : '';
},
// è·å–å½“å‰å…‰æ ‡åœ¨çº¯æ–‡æœ¬ä¸­çš„åç§»ï¼ˆå­—ç¬¦æ•°ï¼‰
getCaretOffsetInCE(){
  const ce = $('textInputCE');
  const sel = window.getSelection && window.getSelection();
  if(!ce || !sel || sel.rangeCount===0) return 0;
  const range = sel.getRangeAt(0).cloneRange();
  range.selectNodeContents(ce);
  range.setEnd(sel.getRangeAt(0).endContainer, sel.getRangeAt(0).endOffset);
  return range.toString().length;
},
// å°†å…‰æ ‡æ¢å¤åˆ°çº¯æ–‡æœ¬åç§»å¤„
setCaretOffsetInCE(offset){
  const ce = $('textInputCE');
  const sel = window.getSelection && window.getSelection();
  if(!ce || !sel) return;
  let current = 0;
  const walker = document.createTreeWalker(ce, NodeFilter.SHOW_TEXT, null);
  let node;
  while((node = walker.nextNode())){
    const next = current + node.nodeValue.length;
    if(offset <= next){
      const r = document.createRange();
      r.setStart(node, Math.max(0, offset - current));
      r.collapse(true);
      sel.removeAllRanges();
      sel.addRange(r);
      return;
    }
    current = next;
  }
  // fallback: end
  const r = document.createRange();
  r.selectNodeContents(ce);
  r.collapse(false);
  sel.removeAllRanges();
  sel.addRange(r);
},
// æ ¹æ® riskWords æ¸²æŸ“é«˜äº® HTML
renderRiskHighlight(text){
  const esc = (s)=>s.replace(/&/g,'&amp;').replace(/</g,'&lt;').replace(/>/g,'&gt;');
  let safe = esc(text || '');
  const words = (Count.riskWords||[]).filter(Boolean).map(w=>w.toString()).sort((a,b)=>b.length-a.length);
  if(!words.length) return safe;
  const escRe = (s)=>s.replace(/[.*+?^${}()|[\]\\]/g,'\\$&');
  const re2 = new RegExp('(' + words.map(escRe).join('|') + ')', 'gi');
  safe = safe.replace(re2, '<span class="riskWord">$1</span>');
  // ä¿ç•™æ¢è¡Œ
  return safe.replace(/\n/g,'<br>');
},
syncCEToTextareaAndHighlight(){
  const ce = $('textInputCE');
  const ta = $('textInput');
  if(!ce || !ta) return;
  if(Count._ceUpdating) return;
  Count._ceUpdating = true;

  const plain = Count.getCEText();
  const caret = Count.getCaretOffsetInCE();

  // åŒæ­¥ç»™åŸé€»è¾‘ textarea
  ta.value = plain;

  // é«˜äº®æ¸²æŸ“ï¼ˆä¼šé‡å†™ innerHTMLï¼‰
  ce.innerHTML = Count.renderRiskHighlight(plain);

  // æ¢å¤å…‰æ ‡
  Count.setCaretOffsetInCE(caret);

  Count._ceUpdating = false;
},

    /* ---- Title Caseï¼šB è§„åˆ™ï¼ˆç®€åŒ–ç‰ˆï¼‰ ---- */
    isAllCapsShort(token) {
      let letters = '';
      for (let i = 0; i < token.length; i++) {
        const c = token.charCodeAt(i);
        if ((c >= 65 && c <= 90) || (c >= 97 && c <= 122)) letters += token[i];
      }
      if (!letters || letters.length > 5) return false;
      return letters === letters.toUpperCase();
    },
    capFirstLowerRest(token) {
      const lower = token.toLowerCase();
      for (let i = 0; i < lower.length; i++) {
        const c = lower.charCodeAt(i);
        if (c >= 97 && c <= 122) {
          return lower.slice(0, i) + lower[i].toUpperCase() + lower.slice(i + 1);
        }
      }
      return lower;
    },
    titleSeg(seg, isFirst, isLast) {
      if (!seg) return seg;
      let hasLetter = false;
      for (let i = 0; i < seg.length; i++) {
        const c = seg.charCodeAt(i);
        if ((c >= 65 && c <= 90) || (c >= 97 && c <= 122)) { hasLetter = true; break; }
      }
      if (!hasLetter) return seg;
      if (Count.isAllCapsShort(seg)) return seg;

      const lower = seg.toLowerCase();
      let letters = '';
      for (let i = 0; i < lower.length; i++) {
        const c = lower.charCodeAt(i);
        if (c >= 97 && c <= 122) letters += lower[i];
      }

      if (!isFirst && !isLast && letters && Config.smallWords.has(letters)) return lower;
      return Count.capFirstLowerRest(seg);
    },
    toTitleCase(text) {
      const s = (text || '').trim();
      if (!s) return '';
      const tokens = splitByWhitespace(s);
      const last = tokens.length - 1;
      const out = [];
      for (let i = 0; i < tokens.length; i++) {
        const tok = tokens[i];
        const parts = tok.split('-');
        const partsOut = [];
        for (let j = 0; j < parts.length; j++) {
          partsOut.push(Count.titleSeg(parts[j], i === 0 && j === 0, i === last && j === parts.length - 1));
        }
        out.push(partsOut.join('-'));
      }
      return out.join(' ');
    },
    applyTitle() {
      $('titleOut').value = Count.toTitleCase($('titleIn').value);
    },
    async copyTitle() {
      const v = $('titleOut').value || '';
      if (!v) return;
      try {
        await navigator.clipboard.writeText(v);
      } catch {
        $('titleOut').focus();
        $('titleOut').select();
        document.execCommand('copy');
      }
    },
    clear() {
      $('textInput').value = '';
            const ce = $('textInputCE'); if(ce){ ce.innerHTML=''; }
if($('riskColorPreview')){ $('riskColorPreview').style.display='none'; $('riskColorPreview').innerHTML=''; }
      $('titleIn').value = '';
      $('titleOut').value = '';
      Count.update();
          if($('riskHint')){ $('riskHint').style.display='none'; $('riskHint').textContent=''; }
          if($('')) $('').textContent='';
},
    init() {
      $('textInput').addEventListener('input', Count.update);
      $('titleIn').addEventListener('input', Count.applyTitle);
      $('btnTitle').addEventListener('click', Count.applyTitle);
      $('btnCopyTitle').addEventListener('click', Count.copyTitle);
      $('clearCount').addEventListener('click', Count.clear);
      Count.update();
    },
  };

  /* =========================
     [JS:TRANSLATE] ç¿»è¯‘æ¨¡å—
  ========================= */
  const Translate = {
    state: 'google',
    dir() { return $('tDir') ? $('tDir').value : 'zh-en'; },
    setTab(name) {
      Translate.state = name;
      document.querySelectorAll('#tSeg button').forEach(b => b.classList.toggle('active', b.dataset.t === name));
      $('tp_google').classList.toggle('active', name === 'google');
      $('tp_baidu').classList.toggle('active', name === 'baidu');
      $('tp_chat').classList.toggle('active', name === 'chat');
      if (name === 'google') Translate.updateGoogle();
      if (name === 'chat') Translate.genPrompt();
    },
    updateGoogle() {
      const d = Translate.dir();
      const sl = d === 'en-zh' ? 'en' : 'zh-CN';
      const tl = d === 'en-zh' ? 'zh-CN' : 'en';
      const url = `https://translate.google.com/?sl=${encodeURIComponent(sl)}&tl=${encodeURIComponent(tl)}&op=translate`;
      const fr = $('gFrame');
      if (fr && fr.src !== url) fr.src = url;
    },
    openGoogle() {
      const d = Translate.dir();
      const sl = d === 'en-zh' ? 'en' : 'zh-CN';
      const tl = d === 'en-zh' ? 'zh-CN' : 'en';
      window.open(`https://translate.google.com/?sl=${sl}&tl=${tl}&op=translate`, '_blank');
    },
    openBaidu() {
      const d = Translate.dir();
      const hash = d === 'en-zh' ? '#en/zh/' : '#zh/en/';
      window.open(`https://fanyi.baidu.com/${hash}`, '_blank');
    },
    genPrompt() {
      const src = ($('chatSrc')?.value || '').trim();
      const d = Translate.dir();
      const toEn = d === 'zh-en';
      const prompt = [
        'ä½ æ˜¯ä¸€åèµ„æ·±äºšé©¬é€ŠListingæ–‡æ¡ˆç¿»è¯‘ä¸æœ¬åœ°åŒ–ä¸“å®¶ã€‚',
        `è¯·æŠŠä¸‹é¢å†…å®¹ç¿»è¯‘ä¸º${toEn ? 'è‹±æ–‡' : 'ä¸­æ–‡'}ï¼Œè¦æ±‚ï¼š`,
        '1) ä¿æŒå–ç‚¹æ¸…æ™°ã€è¯­æ°”è‡ªç„¶ã€é€‚åˆç¾å›½ç«™ç‚¹è´­ç‰©è¯­å¢ƒï¼ˆå¦‚ä¸ºä¸­æ–‡åˆ™é€‚åˆä¸­æ–‡è¯»è€…ï¼‰ã€‚',
        '2) æœ¯è¯­/å•ä½/æ•°å­—ä¸è¦ç¿»é”™ï¼›å“ç‰Œåã€å‹å·ã€ç¼©å†™ä¿æŒåŸæ ·ã€‚',
        '3) å°½é‡ä½¿ç”¨ç”µå•†å¸¸ç”¨è¡¨è¾¾ï¼Œé¿å…æœºç¿»è…”ï¼›å¿…è¦æ—¶åšè½»åº¦æœ¬åœ°åŒ–ä½†ä¸æ”¹å˜äº‹å®ã€‚',
        '4) è¾“å‡ºä»…ç»™ç¿»è¯‘ç»“æœï¼Œä¸è¦è§£é‡Šã€‚',
        '',
        'ã€å¾…ç¿»è¯‘å†…å®¹ã€‘',
        src || '(æ­¤å¤„ç²˜è´´ä½ çš„æ–‡æœ¬)',
      ].join('\n');
      if ($('chatPrompt')) $('chatPrompt').value = prompt;
    },
    async copyPrompt() {
      const v = $('chatPrompt')?.value || '';
      if (!v) return;
      try { await navigator.clipboard.writeText(v); }
      catch {
        $('chatPrompt').focus();
        $('chatPrompt').select();
        document.execCommand('copy');
      }
    },
    openChat() { window.open('https://chatgpt.com/', '_blank'); },
    init() {
      document.querySelectorAll('#tSeg button').forEach(b => b.addEventListener('click', () => Translate.setTab(b.dataset.t)));
      $('tDir').addEventListener('change', () => { Translate.updateGoogle(); Translate.genPrompt(); });

      $('btnOpenG').addEventListener('click', Translate.openGoogle);
      $('btnOpenB').addEventListener('click', Translate.openBaidu);

      $('chatSrc').addEventListener('input', Translate.genPrompt);
      $('btnGenPrompt').addEventListener('click', Translate.genPrompt);
      $('btnCopyPrompt').addEventListener('click', Translate.copyPrompt);
      $('btnOpenChat').addEventListener('click', Translate.openChat);

      Translate.updateGoogle();
      Translate.genPrompt();
    },
  };

  /* =========================
     [JS:AMAZON] äºšé©¬é€Šæ ¸ç®—æ¨¡å—
  ========================= */
  const Amazon = {
    toCny(amount, cur) { return amount * FX.rateToCny(cur); },
    fromCny(cny, cur) {
      if (cur === 'Â¥') return cny;
      const r = FX.rateToCny(cur);
      return r > 0 ? cny / r : 0;
    },
    /* ---- FBA æ¨¡å¼ï¼ˆå»æ‰ä¸‹æ‹‰æ¡†ï¼Œé â€œè¾“å…¥/èšç„¦â€è‡ªåŠ¨é€‰ä¸­ï¼‰ v1.2.30 ---- */
    fbaMode: 'amount', // 'amount' | 'percent' | 'auto'
    setFbaMode(mode) {
      Amazon.fbaMode = (mode === 'percent' || mode === 'auto') ? mode : 'amount';
      const row = $('fbaRow');
      if (!row) return;
      row.querySelectorAll('.fbaModeBox').forEach(box => {
        box.classList.toggle('active', box.dataset.mode === Amazon.fbaMode);
      });
    },
    detectFbaMode() {
      // 1) è‹¥ä¹‹å‰å·²é€‰ä¸­ï¼ˆèšç„¦/è¾“å…¥è§¦å‘ï¼‰ï¼Œç›´æ¥ç”¨
      if (Amazon.fbaMode) return Amazon.fbaMode;

      // 2) å¦åˆ™æ ¹æ®å½“å‰å€¼åšå…œåº•åˆ¤æ–­
      const amount = num($('fbaAmount')?.value);
      const pct = num($('fbaPct')?.value);
      const per = num($('fbaPerKg')?.value);
      const fixed = num($('fbaFixed')?.value);

      if (pct > 0) return 'percent';
      if (per > 0 || fixed > 0) return 'auto';
      if (amount > 0) return 'amount';
      return 'amount';
    },
    update() {
      const sellCur = $('sellCur').value;
      // v1.2.60: keep FBA unit display in sync with sell currency
      const unitEl = $('fbaAmountUnit');
      if(unitEl) unitEl.textContent = sellCur;

      const buyCur = $('buyCur').value;
      const sell = num($('sellPrice').value);
      const buy = num($('buyCost').value);

      const sellCny = Amazon.toCny(sell, sellCur);
      const buyCny = Amazon.toCny(buy, buyCur);

      const wt = num($('wtKg').value);
      const L = num($('lenCm').value);
      const W = num($('widCm').value);
      const H = num($('heiCm').value);
      const div = Math.max(1, num($('volDiv').value) || 6000);
      const volW = (L > 0 && W > 0 && H > 0) ? (L * W * H) / div : 0;
      const chargeW = Math.max(wt, volW);

      // v1.2.60: VAT region (US=0, EU=enable VAT input)
      const vatRegion = $('vatRegion') ? $('vatRegion').value : 'EU';
      if (vatRegion === 'US') {
        $('vatPct').value = '0';
        $('vatPct').disabled = true;
      } else {
        $('vatPct').disabled = false;
        if (num($('vatPct').value) <= 0) $('vatPct').value = '19';
      }

      const shipPerKg = num($('shipPerKg').value);
      const shipFixed = num($('shipFixed').value);
      const shipCny = (shipPerKg > 0 ? chargeW * shipPerKg : 0) + shipFixed;

      const refCny = sellCny * (num($('refPct').value) / 100);
      const vatCny = sellCny * (num($('vatPct').value) / 100);
      const adCny = sellCny * (num($('adPct').value) / 100);
      const retCny = sellCny * (num($('retRate').value) / 100);

      const mode = Amazon.detectFbaMode();
      let fbaCny = 0;
      if (mode === 'percent') {
        fbaCny = sellCny * (num($('fbaPct').value) / 100);
      } else if (mode === 'auto') {
        const per = num($('fbaPerKg').value);
        const fixed = num($('fbaFixed').value);
        fbaCny = Amazon.toCny(chargeW * per + fixed, sellCur);
      } else {
        fbaCny = Amazon.toCny(num($('fbaAmount').value), sellCur);
      }

      const totalCost = buyCny + shipCny + refCny + vatCny + adCny + fbaCny + retCny;
      const profitCny = sellCny - totalCost;
      const margin = sellCny > 0 ? profitCny / sellCny : 0;

      

      // v1.2.60ï¼šé€‰å“åˆ¤æ–­â€”æœ€å¤§å¯æ‰¿å—å¹¿å‘Šå æ¯”ï¼ˆAd Headroomï¼‰ & ç»“è®º
      const nonAdCost = totalCost - adCny; // æ’é™¤å¹¿å‘Šåçš„æˆæœ¬
      let maxAdPct = sellCny > 0 ? (1 - (nonAdCost / sellCny)) * 100 : 0;
      if (!isFinite(maxAdPct)) maxAdPct = 0;
      maxAdPct = Math.max(0, Math.min(100, maxAdPct));

      const realAdPct = num($('adPct').value);
      let verdict = 'â€”', vCls = '';
      if (sellCny <= 0){
        verdict = 'â€”';
      } else if (realAdPct <= maxAdPct - 5){
        verdict = 'å€¼å¾—å¹²';
        vCls = 'good';
      } else if (realAdPct <= maxAdPct){
        verdict = 'æé™å¯åš';
        vCls = 'warn';
      } else {
        verdict = 'ä¸å€¼å¾—å¹²';
        vCls = 'bad';
      }

      // v1.2.60: FBA display amounts (sell currency)
      try{
        const sell = num($('sellPrice').value);
        const pct = num($('fbaPct').value);
        const per = num($('fbaPerKg').value);
        const fixed = num($('fbaFixed').value);
        const pctAmt = (sell > 0 && pct > 0) ? (sell * pct / 100) : 0;
        const autoAmt = ((per > 0 || fixed > 0) ? (chargeW * Math.max(0, per) + Math.max(0, fixed)) : 0);

        const pctEl = $('fbaPctAmt');
        if(pctEl){
          pctEl.textContent = (sell > 0 && pct > 0) ? `â‰ˆ ${pctAmt.toFixed(2)}${sellCur}` : 'â€”';
        }
        const autoEl = $('fbaAutoAmt');
        if(autoEl){
          autoEl.textContent = ((per > 0 || fixed > 0) ? `â‰ˆ ${autoAmt.toFixed(2)}${sellCur}` : 'â€”');
        }
      }catch{}
$('oChargeW').textContent = chargeW.toFixed(3);
      $('oShip').textContent = fmt('Â¥', shipCny);
      $('oRef').textContent = fmt(sellCur, Amazon.fromCny(refCny, sellCur));
      $('oVat').textContent = fmt(sellCur, Amazon.fromCny(vatCny, sellCur));
      $('oAd').textContent = fmt(sellCur, Amazon.fromCny(adCny, sellCur));
      $('oFba').textContent = fmt(sellCur, Amazon.fromCny(fbaCny, sellCur));
      $('oProfit').textContent = fmt(sellCur, Amazon.fromCny(profitCny, sellCur));
      $('oMargin').textContent = `${(margin * 100).toFixed(2)}%`;

      try{
        const maxEl = $('oMaxAdPct');
        if(maxEl) maxEl.textContent = `${maxAdPct.toFixed(1)}%`;
        const vEl = $('oAdVerdict');
        if(vEl){
          vEl.textContent = verdict;
          vEl.classList.remove('good','warn','bad');
          if(vCls) vEl.classList.add(vCls);
        }
      }catch{}

      // v1.2.31ï¼šåˆ©æ¶¦æ­£è´Ÿé¢œè‰²æç¤º
      try{
        const pEl = $('oProfit');
        const mEl = $('oMargin');
        if(pEl){ pEl.classList.toggle('pos', profitCny > 0); pEl.classList.toggle('neg', profitCny < 0); }
        if(mEl){ mEl.classList.toggle('pos', margin > 0); mEl.classList.toggle('neg', margin < 0); }
      }catch{}

      $('amazonNote').textContent = sell > 0
        ? `è¯´æ˜ï¼šé€€è´§æˆæœ¬æŒ‰â€œé€€è´§ç‡Ã—å”®ä»·â€åšäº†ç®€åŒ–ä¼°ç®—ï¼ˆå½“å‰ ${($('retRate').value || '0')}%ï¼‰ã€‚å¦‚éœ€æ›´ç²¾ç»†ï¼Œå¯å†åŠ â€œé€€è´§æŸå¤±å æ¯”/å¤„ç†è´¹â€ã€‚`
        : '';
    },
    clear() {
      $('sellCur').value = '$';
      $('sellPrice').value = '';
      $('buyCur').value = 'Â¥';
      $('buyCost').value = '';

      $('wtKg').value = '';
      $('lenCm').value = '';
      $('widCm').value = '';
      $('heiCm').value = '';

      $('volDiv').value = '6000';
      $('shipPerKg').value = '10';
      $('shipFixed').value = '0';

      $('refPct').value = '15';
      $('vatRegion').value = 'EU';
      $('vatPct').value = '19';
      $('vatPct').disabled = false;
      $('retRate').value = '5';
      $('adPct').value = '15';
      $('fbaAmount').value = '';
      $('fbaPct').value = '';
      $('fbaPerKg').value = '';
      $('fbaFixed').value = '';

      Amazon.setFbaMode('amount');
      Amazon.update();
    },
    init() {
      const ids = [
        'sellCur','sellPrice','buyCur','buyCost',
        'usdToCny','eurToCny','gbpToCny',
        'wtKg','lenCm','widCm','heiCm',
        'volDiv','shipPerKg','shipFixed',
        'refPct','vatPct','retRate','adPct',
        'fbaAmount','fbaPct','fbaPerKg','fbaFixed'
      ];
      ids.forEach(id => { const el = $(id); if(!el) return; el.addEventListener('input', Amazon.update); el.addEventListener('change', Amazon.update); el.addEventListener('keyup', Amazon.update); });

      // v1.2.30ï¼šFBA æ¨¡å¼ä¸å†ç”¨ä¸‹æ‹‰æ¡†ï¼Œæ”¹ä¸ºâ€œè¾“å…¥/èšç„¦å³é€‰ä¸­â€
      const fbaMap = { amount:['fbaAmount'], percent:['fbaPct'], auto:['fbaPerKg','fbaFixed'] };
      Object.entries(fbaMap).forEach(([mode, arr])=>{
        arr.forEach(id=>{
          const el = $(id);
          if(!el) return;
          el.addEventListener('focus', ()=> Amazon.setFbaMode(mode));
          el.addEventListener('input', ()=> Amazon.setFbaMode(mode));
          el.addEventListener('change', ()=> Amazon.setFbaMode(mode));
        });
      });
      Amazon.setFbaMode(Amazon.detectFbaMode());

      // v1.2.31ï¼šç‚¹å‡»æ•´å¼ å¡ç‰‡ä¹Ÿå¯åˆ‡æ¢æ¨¡å¼ï¼ˆå¹¶è‡ªåŠ¨èšç„¦åˆ°è¯¥å¡ç‰‡çš„ç¬¬ä¸€ä¸ªè¾“å…¥æ¡†ï¼‰
      try{
        const row = $('fbaRow');
        if(row && !row.__cardClick){
          row.__cardClick = true;
          row.querySelectorAll('.fbaModeBox').forEach(box=>{
            box.addEventListener('click', (e)=>{
              // è¾“å…¥æ¡†æœ¬èº«ç‚¹å‡»ä¸é¢å¤–å¤„ç†ï¼ˆé¿å…é‡å¤ focusï¼‰
              const tag = (e.target && e.target.tagName) ? e.target.tagName.toLowerCase() : '';
              if(tag === 'input' || tag === 'textarea' || tag === 'select') return;
              const mode = box.dataset.mode;
              Amazon.setFbaMode(mode);
              const first = box.querySelector('input');
              if(first) first.focus();
              Amazon.update();
            });
          });
        }
      }catch{}

      const __ca=$('clearAmazon'); if(__ca) __ca.addEventListener('click', Amazon.clear);
      Amazon.update();
    },
  };

  /* =========================
     [JS:APP] å¯¼èˆª & åˆå§‹åŒ–
  ========================= */
  const App = {
    showPanel(id) {
      document.querySelectorAll('.panel').forEach(p => p.classList.toggle('active', p.id === id));
      document.querySelectorAll('.nav button').forEach(b => b.classList.toggle('active', b.dataset.panel === id));
    },
    initNav() {
      const sidebar = document.querySelector('.sidebar');
      const backdrop = $('backdrop');
      const btnMenu = $('btnMenu');
      const isMobile = () => window.matchMedia && window.matchMedia('(max-width:720px)').matches;

      const openMenu = () => {
        if (!sidebar) return;
        sidebar.classList.add('open');
        if (backdrop) backdrop.classList.add('show');
      };
      const closeMenu = () => {
        if (!sidebar) return;
        sidebar.classList.remove('open');
        if (backdrop) backdrop.classList.remove('show');
      };

      // ä¿ç•™åŸè¡Œä¸ºï¼šç‚¹å‡»åˆ‡æ¢é¢æ¿
      document.querySelectorAll('.nav button').forEach(b => b.addEventListener('click', () => {
        App.showPanel(b.dataset.panel);
        if (isMobile()) closeMenu();
      }));

      // æ‰‹æœºç«¯ï¼šèœå•æŒ‰é’®ä¸é®ç½©
      if (btnMenu) btnMenu.addEventListener('click', () => {
        if (!sidebar) return;
        const opened = sidebar.classList.contains('open');
        if (opened) closeMenu(); else openMenu();
      });
      if (backdrop) backdrop.addEventListener('click', closeMenu);

      // æ¡Œé¢ç«¯è‡ªåŠ¨æ¸…ç†æŠ½å±‰çŠ¶æ€
      window.addEventListener('resize', () => {
        if (!isMobile()) closeMenu();
      });
    },
    syncVersionUI() {
      document.title = `è¿è¥å·¥å…·ç®± v${APP_VERSION}`;
      const verEl = $('verText');
      if (verEl) verEl.textContent = APP_VERSION;
      const verElM = $('verTextM');
      if (verElM) verElM.textContent = APP_VERSION;
    },
    init() {
      Theme.init();
      App.syncVersionUI();
      App.initNav();

      Unit.init();
      Count.init();
      Translate.init();
      Amazon.init();

      // [HOTFIX] v1.2.28 Aurora: ensure Translate tabs & Amazon calc always respond even if individual listeners fail
      // 1) Translate: delegated click fallback
      try {
        const seg = document.getElementById('tSeg');
        if (seg && !seg.__delegated) {
          seg.__delegated = true;
          seg.addEventListener('click', (ev) => {
            const btn = ev.target && ev.target.closest && ev.target.closest('button[data-t]');
            if (!btn) return;
            Translate.setTab(btn.dataset.t);
          });
        }
      } catch {}

      // 2) Amazon: delegated input/change fallback (covers any missed bindings)
      try {
        const amz = document.getElementById('amazon');
        if (amz && !amz.__delegated) {
          amz.__delegated = true;
          const fn = () => Amazon.update();
          amz.addEventListener('input', fn);
          amz.addEventListener('change', fn);
          amz.addEventListener('keyup', fn);
        }
      } catch {}

      // å¯åŠ¨æ—¶ï¼šå…ˆè¯»æœ¬åœ°ç¼“å­˜ï¼Œå†å°è¯•æ‹‰å–æœ€æ–°æ±‡ç‡
      const last = FX.load();
      if (last) FX.apply(last.usd, last.eur, last.gbp);
      FX.fetchLatest(true);

      // Debugï¼šä¾¿äºä½ åœ¨æ§åˆ¶å°å®šä½/è°ƒç”¨
      window.showPanel = App.showPanel;
      window.Toolbox = { Config, FX, Unit, Count, Translate, Amazon, App };

      // è½»é‡è‡ªæ£€ï¼ˆä¸å½±å“åŠŸèƒ½ï¼‰
      console.assert(typeof window.showPanel === 'function', 'showPanel should exist');
      console.assert(Count.toTitleCase('usb led light for the home') === 'USB LED Light for the Home', 'TitleCase B');
      console.assert(FX.convert(10, 'Â¥', 'Â¥') === 10, 'FX identity');
      console.assert(Translate.genPrompt && typeof Translate.genPrompt === 'function', 'Translate.genPrompt exists');
    },
  };

  document.addEventListener('DOMContentLoaded', App.init);
})();
</script>
<script>/* [NAV:ICONS] v1.0.32 - å®‰å…¨è¿½åŠ å›¾æ ‡ */

  // ===== [NAV:ICONS] v1.0.32 - non-destructive icon prepend =====
  (function(){
    const iconMap = {
      unit: "ğŸ§®",        // å•ä½æ¢ç®—
      count: "ğŸ”¤",       // å­—ç¬¦å¤„ç†
      translate: "ğŸŒ",   // ç¿»è¯‘
      amazon: "ğŸ“¦"       // äºšé©¬é€Šæ ¸ç®—
    };
    function ensureIcons(){
      document.querySelectorAll(".nav button[data-panel]").forEach(btn=>{
        if(btn.querySelector(".btn-ic")) return;
        const key = btn.getAttribute("data-panel");
        const ic = document.createElement("span");
        ic.className = "btn-ic";
        ic.textContent = iconMap[key] || "ğŸ§°";
        btn.insertBefore(ic, btn.firstChild);
      });
    }
    if(document.readyState === "loading"){
      document.addEventListener("DOMContentLoaded", ensureIcons);
    }else{
      ensureIcons();
    }
  })();
</script>
<!-- [UI:LAYOUT] END -->
</div>
<script>

/* =========================
   v1.2.60 â€” Amazon: çŠ¶æ€ç‚¹ + FBAå³ä¾§é‡‘é¢å±•ç¤º + VATç¾åŒºä¸æ ‡ç‚¹
========================= */
(function(){
  const amazon = document.getElementById('amazon');
  if(!amazon) return;

  const $ = (id)=>document.getElementById(id);
  const s = (el)=> (el && el.value!=null) ? String(el.value).trim() : '';
  const n = (el)=>{
    const v = s(el);
    if(v==='') return NaN;
    const num = Number(v);
    return Number.isFinite(num) ? num : NaN;
  };
  const filledPos = (el)=>{ const v=n(el); return Number.isFinite(v) && v>0; };
  const filledNonPos = (el)=>{ const v=n(el); return Number.isFinite(v) && v<=0; };
  const labelOf = (el)=> el ? (el.closest('label')||null) : null;

  const DEFAULT_IDS = ['usdToCny','eurToCny','gbpToCny','volDiv','shipPerKg','vatPct','refPct','retRate','adPct'];
  const ALWAYS_REQ = ['sellPrice','buyCost'];
  const WT = 'wtKg';
  const DIMS = ['lenCm','widCm','heiCm'];

  function rememberDefaults(){
    DEFAULT_IDS.forEach(id=>{
      const el = $(id);
      if(el && el.dataset.defaultValue==null){
        el.dataset.defaultValue = s(el);
      }
    });
  }

  function setLabelState(lab, state){
    if(!lab) return;
    lab.classList.remove('st-dot','st-red','st-yellow','st-green');
    if(!state) return;
    lab.classList.add('st-dot');
    if(state==='red') lab.classList.add('st-red');
    if(state==='yellow') lab.classList.add('st-yellow');
    if(state==='green') lab.classList.add('st-green');
  }
  function setBoxState(box, state){
    if(!box) return;
    box.classList.remove('st-dot','st-red','st-yellow','st-green');
    if(!state) return;
    box.classList.add('st-dot');
    if(state==='red') box.classList.add('st-red');
    if(state==='yellow') box.classList.add('st-yellow');
    if(state==='green') box.classList.add('st-green');
  }

  function updateDots(){
    // clear label states
    amazon.querySelectorAll('label').forEach(l=>l.classList.remove('st-dot','st-red','st-yellow','st-green'));

    const vr = $('vatRegion');
    const vat = $('vatPct');
    const isUS = !!(vr && vr.value==='US');

    // any filled <=0 => red (except vat in US)
    amazon.querySelectorAll('input[type="number"]').forEach(el=>{
      if(el.id==='vatPct' && isUS) return;
      const lab = labelOf(el);
      if(!lab) return;
      if(filledNonPos(el)) setLabelState(lab,'red');
    });

    // always required: empty or not >0 => red else green
    ALWAYS_REQ.forEach(id=>{
      const el = $(id);
      if(!el) return;
      const lab = labelOf(el);
      const bad = (s(el)==='') || !filledPos(el);
      if(bad) setLabelState(lab,'red');
      else setLabelState(lab,'green');
    });

    // weight/size group: wt OR all dims
    const wtEl = $(WT);
    const dimEls = DIMS.map(id=>$(id));
    const wtOk = wtEl ? filledPos(wtEl) : false;
    const dimsOk = dimEls.every(e=>e && filledPos(e));
    const groupOk = wtOk || dimsOk;
    if(!groupOk){
      [wtEl, ...dimEls].forEach(el=>{ if(el) setLabelState(labelOf(el),'red'); });
    }else{
      [wtEl, ...dimEls].forEach(el=>{
        if(!el) return;
        if(filledPos(el)) setLabelState(labelOf(el),'green');
        else {
          // optional empty => no dot (unless it was already red due to <=0)
          const lab = labelOf(el);
          if(lab && !lab.classList.contains('st-red')) setLabelState(lab,'');
        }
      });
    }

    // v1.2.60: å›ºå®šå¤´ç¨‹(æ¯å•) â€” å½“é‡é‡/å°ºå¯¸éƒ½æ²¡å¡«æ—¶ä¸ºå¿…å¡«ï¼›ä»»ä¸€é¡¹å¡«å†™å®Œæ•´åå˜ä¸ºéå¿…å¡«(æ— ç‚¹)
    const shipFixedEl = $('shipFixed');
    if(shipFixedEl){
      const lab = labelOf(shipFixedEl);
      if(!groupOk){
        if(s(shipFixedEl)==='' || !filledPos(shipFixedEl)) setLabelState(lab,'red');
        else setLabelState(lab,'green');
      }else{
        if(filledPos(shipFixedEl)) setLabelState(lab,'green');
        else setLabelState(lab,'');
      }
    }

    // defaults: unchanged & >0 => yellow; changed & >0 => green; empty => none; (except vat in US => none)
    DEFAULT_IDS.forEach(id=>{
      if(isUS && id==='vatPct') return;
      const el = $(id);
      if(!el) return;
      const lab = labelOf(el);
      if(!lab || lab.classList.contains('st-red')) return;
      if(s(el)===''){ setLabelState(lab,''); return; }
      if(!filledPos(el)){ setLabelState(lab,'red'); return; } // <=0 already handled, but keep safe
      const def = (el.dataset.defaultValue ?? '').trim();
      const cur = s(el);
      if(def!=='' && cur===def) setLabelState(lab,'yellow');
      else setLabelState(lab,'green');
    });

    // VAT US => no dot ever
    if(isUS && vat){
      const lab = labelOf(vat);
      if(lab) setLabelState(lab,'');
    }

    // FBA outer dots: require at least one mode filled (>0)
    const modeAmountOk = filledPos($('fbaAmount'));
    const modePctOk = filledPos($('fbaPct'));
    const modeAutoOk = filledPos($('fbaPerKg')) || filledPos($('fbaFixed'));
    const anyFba = modeAmountOk || modePctOk || modeAutoOk;

    const boxAmount = amazon.querySelector('#fbaRow .fbaModeBox[data-mode="amount"]');
    const boxPct = amazon.querySelector('#fbaRow .fbaModeBox[data-mode="percent"]');
    const boxAuto = amazon.querySelector('#fbaRow .fbaModeBox[data-mode="auto"]');

    [boxAmount, boxPct, boxAuto].forEach(b=>setBoxState(b,''));
    if(!anyFba){
      [boxAmount, boxPct, boxAuto].forEach(b=>setBoxState(b,'red'));
    }else{
      if(modeAmountOk) setBoxState(boxAmount,'green');
      if(modePctOk) setBoxState(boxPct,'green');
      if(modeAutoOk) setBoxState(boxAuto,'green');
    }

    // Hide inner FBA label dots: keep clean
    const fbaRow = $('fbaRow');
    if(fbaRow){
      fbaRow.querySelectorAll('label').forEach(l=>l.classList.remove('st-dot','st-red','st-yellow','st-green'));
    }
  }

  function updateFbaAmounts(){
    const sellCur = $('sellCur') ? $('sellCur').value : '$';
    const unitEl = $('fbaAmountUnit');
    if(unitEl) unitEl.textContent = sellCur;

    const sell = n($('sellPrice'));
    const amt = n($('fbaAmount'));
    const pct = n($('fbaPct'));
    const per = n($('fbaPerKg'));
    const fixed = n($('fbaFixed'));

    const amtShow = $('fbaAmountShow');
    if(amtShow) amtShow.textContent = (Number.isFinite(amt) && amt>0) ? `â‰ˆ ${amt.toFixed(2)}${sellCur}` : 'â€”';

    const pctShow = $('fbaPctAmt');
    const pctAmt = (Number.isFinite(sell) && sell>0 && Number.isFinite(pct) && pct>0) ? (sell * pct / 100) : 0;
    if(pctShow) pctShow.textContent = (pctAmt>0) ? `â‰ˆ ${pctAmt.toFixed(2)}${sellCur}` : 'â€”';

    // charge weight from existing outputs if present, else compute from inputs
    let chargeW = n($('oChargeW'));
    if(!Number.isFinite(chargeW) || chargeW<=0){
      const wt = n($('wtKg'));
      const l = n($('lenCm')), w = n($('widCm')), h = n($('heiCm'));
      const div = n($('volDiv'));
      const volW = (Number.isFinite(l)&&Number.isFinite(w)&&Number.isFinite(h)&&Number.isFinite(div)&&div>0) ? (l*w*h/div) : 0;
      chargeW = Math.max(Number.isFinite(wt)?wt:0, volW);
    }
    const autoAmt = ((Number.isFinite(per)&&per>0)||(Number.isFinite(fixed)&&fixed>0)) ? (Math.max(0,chargeW)*Math.max(0,Number.isFinite(per)?per:0) + Math.max(0,Number.isFinite(fixed)?fixed:0)) : 0;
    const autoShow = $('fbaAutoAmt');
    if(autoShow) autoShow.textContent = (autoAmt>0) ? `â‰ˆ ${autoAmt.toFixed(2)}${sellCur}` : 'â€”';
  }

  function updateAll(){
    updateFbaAmounts();
    updateDots();
  }

  function attach(){
    rememberDefaults();
    amazon.querySelectorAll('input,select,textarea').forEach(el=>{
      el.addEventListener('input', updateAll);
      el.addEventListener('change', updateAll);
    });
    const clearBtn = $('clearAmazon');
    if(clearBtn && !clearBtn.__v1252){
      clearBtn.addEventListener('click', ()=>setTimeout(updateAll,0));
      clearBtn.__v1252 = true;
    }
    updateAll();
  }

  if(document.readyState==='loading') document.addEventListener('DOMContentLoaded', attach);
  else attach();
})();

</script>
<script>

/* =========================
   v1.2.60 â€” FX æ›´æ–°æ ‡è®°ï¼ˆä¸ä¾µå…¥ç°æœ‰é€»è¾‘ï¼‰
========================= */
(function(){
  function today(){
    const d = new Date();
    const y = d.getFullYear();
    const m = String(d.getMonth()+1).padStart(2,'0');
    const da = String(d.getDate()).padStart(2,'0');
    return `${y}-${m}-${da}`;
  }
  function showBadge(){
    const b = document.getElementById('fxUpdatedBadge');
    const d = document.getElementById('fxUpdatedDate');
    if(b && d){
      d.textContent = today();
      b.style.display = 'inline-block';
    }
  }
  // Expose a helper for existing fetch logic (if present)
  window.markFxUpdated = function(){
    showBadge();
  };

  // Fallback: observe FX inputs changes that look programmatic (multiple set at once)
  const fxIds = ['usdToCny','eurToCny','gbpToCny'];
  const els = fxIds.map(id=>document.getElementById(id)).filter(Boolean);
  if(els.length){
    let timer = null;
    els.forEach(el=>{
      el.addEventListener('change', ()=>{
        clearTimeout(timer);
        timer = setTimeout(showBadge, 200);
      });
    });
  }
})();

</script>
<script>

/* =========================
   v1.2.60 â€” æ±‡ç‡å·²æ›´æ–°æ ‡è®°ï¼ˆæ ¸ç®—é¡µï¼Œå¼ºåˆ¶å¯é æ˜¾ç¤ºï¼‰
========================= */
(function(){
  function today(){
    const d = new Date();
    const y = d.getFullYear();
    const m = String(d.getMonth()+1).padStart(2,'0');
    const da = String(d.getDate()).padStart(2,'0');
    return `${y}-${m}-${da}`;
  }
  function showBadge(){
    const b = document.getElementById('fxUpdatedBadge');
    const d = document.getElementById('fxUpdatedDate');
    if(b && d){
      d.textContent = today();
      b.style.display = 'inline-block';
    }
  }

  // 1) When clicking "è·å–æœ€æ–°æ±‡ç‡"ï¼Œåœ¨çŸ­å»¶è¿Ÿåæ˜¾ç¤ºï¼ˆä¸ä¾èµ– fetch å†…éƒ¨å®ç°ï¼‰
  const btn = document.getElementById('btnFx');
  if(btn){
    btn.addEventListener('click', ()=>{
      setTimeout(showBadge, 800);
    });
  }

  // 2) When any FX input changes (programmatic or manual)
  const fxIds = ['usdToCny','eurToCny','gbpToCny'];
  fxIds.forEach(id=>{
    const el = document.getElementById(id);
    if(!el) return;
    el.addEventListener('input', showBadge);
    el.addEventListener('change', showBadge);
  });

  // Expose for manual call if needed
  window.markFxUpdated = showBadge;
})();

</script>
<script>

/* =========================
   v1.2.60 â€” æ±‡ç‡å·²æ›´æ–°æ ‡è®°ï¼ˆæ ¸ç®—é¡µï¼šæŒ‰é’®/å˜åŒ–/è½®è¯¢ ä¸‰ä¿é™©ï¼‰
========================= */
(function(){
  function today(){
    const d = new Date();
    const y = d.getFullYear();
    const m = String(d.getMonth()+1).padStart(2,'0');
    const da = String(d.getDate()).padStart(2,'0');
    return `${y}-${m}-${da}`;
  }
  function showBadge(){
    const b = document.getElementById('fxUpdatedBadge');
    const d = document.getElementById('fxUpdatedDate');
    if(b && d){
      d.textContent = today();
      b.style.display = 'inline-flex';
      b.style.alignItems = 'center';
      b.style.gap = '4px';
    }
  }

  const fxIds = ['usdToCny','eurToCny','gbpToCny'];
  const els = fxIds.map(id=>document.getElementById(id)).filter(Boolean);
  if(!els.length) return;

  // record initial values (page load)
  const init = els.map(el=>String(el.value ?? ''));

  // 1) click "è·å–æœ€æ–°æ±‡ç‡" -> show after a short delay
  const btn = document.getElementById('btnFx');
  if(btn){
    btn.addEventListener('click', ()=> setTimeout(showBadge, 600));
  }

  // 2) any user/programmatic event that actually fires input/change
  els.forEach(el=>{
    el.addEventListener('input', showBadge);
    el.addEventListener('change', showBadge);
  });

  // 3) polling: if values changed compared to initial (programmatic set without events), show once
  let shown = false;
  const timer = setInterval(()=>{
    if(shown) return;
    for(let i=0;i<els.length;i++){
      const cur = String(els[i].value ?? '');
      if(cur !== init[i]){
        shown = true;
        showBadge();
        clearInterval(timer);
        break;
      }
    }
  }, 500);

  window.markFxUpdated = showBadge;
})();

</script>
</body>
</html>
